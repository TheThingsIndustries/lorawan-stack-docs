<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.112.3">
  <title>The Things Node | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/devices/models/the-things-node/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.0311ffa632efefdf2c4bfeff8ca5fb6eea8bdaf8cefc6bbe13c2ee3990abce82.css" integrity="sha256-AxH/pjLv798sS/7/jKX7buqL2vjO/Gu&#43;E8LuOZCrzoI=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="The Things Node">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="The Things Node">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/devices/models/the-things-node/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="The Things Node" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.7.2/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/the-things-stack/">The Things Stack</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Devices</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/devices/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/adding-devices/" class="">Adding Devices</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/configuring-devices/" class="">Configuring Devices</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/concepts/" class="">Concepts</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/models/" class="">Models</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/devices/models/generic-node-se/" class="">Generic Node Sensor Edition</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/devices/models/the-things-node/" class="is-active">The Things Node</a>
    
    



    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/devices/models/the-things-uno/" class="">The Things Uno</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/troubleshooting/" class="">Troubleshooting Devices</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">The Things Node
          
        </h1>
        
        <div class="content">
          <figure class="float plain"><img src="TheThingsNode.jpg"
         alt="The Things Node"/>
</figure>

<p>In this quickstart, you will learn how to register your Things Node with The Things Stack and program it with the Arduino software for activating with The Things Stack.</p>
<p><strong>The Things Node</strong> is based on the <a href="https://www.sparkfun.com/products/12587">SparkFun Pro Micro - 3.3V/8Mhz</a> with an added Microchip LoRaWAN® module (<a href="https://www.microchip.com/wwwproducts/en/RN2483">RN2483</a> or <a href="https://www.microchip.com/wwwproducts/en/RN2903">RN2903</a>). It features a temperature sensor, <a href="http://www.nxp.com/products/sensors/accelerometers/3-axis-accelerometers/2g-4g-8g-low-g-12-bit-digital-accelerometer:MMA8452Q">NXP’s digital accelerometer</a>, light sensor, pushbutton, and RGB LED. All this is packaged in a matchbox-sized waterproof (IP54) casing with a 3 AAA battery compartment.
The Things Node is compatible with the <strong>Arduino software (IDE)</strong>.</p>
<h2 id="setting-up-arduino">Setting Up Arduino</h2>
<p><strong>Download</strong> the latest release of the <a href="https://www.arduino.cc/en/Main/Software">Arduino Software (IDE)</a> and <a href="https://www.arduino.cc/en/Guide">install</a> it on your operating system.</p>
<p><strong>Start</strong> the Arduino Software (IDE).</p>
<p>The Things Network has written two Arduino libraries (<a href="https://github.com/TheThingsNetwork/arduino-device-lib">The Things Network Arduino Library</a> and <a href="https://github.com/TheThingsNetwork/arduino-node-lib">The Things Node Arduino Library</a>) for the Things Node. <strong>The Things Network</strong> library provides functions to communicate with The Things Stack (E.g. device activation, sending data, etc). <strong>The Things Node</strong> library helps you to configure the sensors and read sensor data from onboard sensors (E.g. configuring the onboard temperature sensor and reading the temperature).</p>
<p>In the Arduino IDE, select <strong>Sketch → Include Library → Manage Libraries…</strong> or <strong>Tools → Manage Libraries…</strong> from the menu bar.</p>
<p>In the <strong>Library Manager</strong> window, search for <strong>TheThingsNetwork</strong>.</p>
<p>Select <strong>TheThingsNetwork</strong> Arduino library from the search results.</p>
<p>Select the <strong>Install</strong> button.</p>
<figure><img src="TheThingsNetworkArduinoLib.png"
         alt="The Things Network Arduino library"/>
</figure>

<p>When the installation finishes, again in the <strong>Library Manager</strong> window, search for <strong>TheThingsNode</strong>.</p>
<p>Select <strong>TheThingsNode</strong> Arduino library from the search results.</p>
<p>Select the <strong>Install</strong> button.</p>
<figure><img src="TheThingsNodeArduinoLib.png"
         alt="The Things Node Arduino library"/>
</figure>

<p>When the installation finishes, close the <strong>Library Manager</strong> by selecting the <strong>Close</strong> button.</p>
<p>Finally, you should add the <strong>SparkFun Pro Micro</strong> board package to the Arduino IDE. Select <strong>File → Preferences</strong> from the menu bar and paste the following URL into the <strong>Additional Board Manager URLs</strong> text box.</p>
<pre tabindex="0"><code>https://raw.githubusercontent.com/sparkfun/Arduino_Boards/main/IDE_Board_Manager/package_sparkfun_index.json
</code></pre><figure><img src="additional-boards-manager.png"
         alt="Additional Board Manager"/>
</figure>

<p>Select the <strong>OK</strong> button.</p>
<p>Open the Board Manager by selecting <strong>Tools → Board → Board Manager&hellip;</strong> from the menu bar.</p>
<figure><img src="ConnectUsbCable.png"
         alt="Connect USB cable"/>
</figure>

<p>Then open the Board Manager by clicking <strong>Tools → Board → Boards Manager&hellip;</strong> from the menu bar.</p>
<p>Search for <strong>sparkfun</strong> in the Board Manager. You should see the <strong>SparkFun AVR Boards</strong> package appear. Select the <strong>Install</strong> button.</p>
<figure><img src="sparkfun-avr-boards.png"
         alt="SparkFun AVR Boards"/>
</figure>

<h2 id="connecting-the-things-node-to-a-computer">Connecting The Things Node to a Computer</h2>
<p>The Things Node can be connected to a computer using a <a href="https://www.sparkfun.com/products/13244">micro-USB cable</a>. First, you should open the enclosure to access the USB port on the back of The Things Node’s PCB.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  USB is usually the easiest way to power The Things node, especially when you are programming it. It is acceptable to connect both batteries and a USB connector at the same time. The Things node can automatically select the best power source.
</div>

<p>Using a <strong>Phillips</strong> screwdriver remove both screws as shown in the following image.</p>
<figure><img src="NodeOpenCase.jpg"
         alt="Open the node case"/>
</figure>

<p>Connect a micro-USB cable to the connector found between the battery compartment and the top side of the case. Then connect the other end of the micro-USB cable to your computer.</p>
<figure><img src="ConnectUsbCable.png"
         alt="Connect USB cable"/>
</figure>

<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  Some micro-USB cables might not fit the limited space between the battery compartment and the casing. Also make sure you use a cable that supports data, not just power. The one we ship with The Things Uno should work.
</div>

<p>Connect the other end of the USB cable to your computer.</p>
<p>In the Arduino IDE, select <strong>Tools → Boards → SparkFun AVR Boards → SparkFun Pro Micro</strong> from the menu bar.</p>
<p>Select <strong>Tools → Processor → ATmega32U4 (3.3V, 8MHz)</strong> from the menu bar.</p>
<p>Select <strong>Tools → Port</strong> and choose the correct serial port associated with your Things Node.</p>
<h2 id="getting-the-deveui-and-appeui">Getting the DevEUI and AppEUI</h2>
<p>The sample sketch that can be found in the <strong>TheThingsNetwork</strong> Arduino library prints the <strong>DevEUI</strong>, <strong>AppEUI</strong>, and some other useful information when you need to register your Things Node with The Things Stack.</p>
<p>In the Arduino IDE, select <strong>File → Examples → TheThingsNode → DeviceInfo</strong> from the menu bar. The <strong>DeviceInfo</strong> sketch will open in a new window. The sample sketch should look something like this.</p>
<pre tabindex="0"><code>#include &lt;TheThingsNetwork.h&gt;

#define loraSerial Serial1
#define debugSerial Serial

// Replace REPLACE_ME with TTN_FP_EU868 or TTN_FP_US915
#define freqPlan REPLACE_ME

TheThingsNetwork ttn(loraSerial, debugSerial, freqPlan);

void setup()
{
  loraSerial.begin(57600);
  debugSerial.begin(9600);
}

void loop()
{
  debugSerial.println(&#34;Device Information&#34;);
  debugSerial.println();
  ttn.showStatus();
  debugSerial.println();
  debugSerial.println(&#34;Use the EUI to register the device for OTAA&#34;);
  debugSerial.println(&#34;-------------------------------------------&#34;);
  debugSerial.println();

  delay(10000);
}
</code></pre><p>Replace <strong>REPLACE_ME</strong> with <strong>TTN_FP_EU868</strong> or <strong>TTN_FP_US915</strong> depending on the frequency plan of your Things Node and your country/region.</p>
<pre tabindex="0"><code>// Replace REPLACE_ME with TTN_FP_EU868 or TTN_FP_US915
#define freqPlan REPLACE_ME
</code></pre><div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  The Things Node supports only <strong>EU868</strong> and <strong>US915</strong> frequency plans.
</div>

<p>Select <strong>Sketch → Upload</strong> from the menu bar to upload the sketch. The Arduino IDE verifies your sketch again and uploads it to your Things Node.</p>
<p>Once uploaded, your sketch will immediately start to run but you cannot see any output unless you open the Arduino <strong>Serial Monitor</strong>. The Arduino <strong>Serial Monitor</strong> is a tool that can be used to print information passing through the serial port.</p>
<p>Select <strong>Tools → Serial Monitor</strong> from the menu bar to open the <strong>Serial Monitor</strong>.</p>
<p>Once open the Arduino <strong>Serial Monitor</strong> prints something similar to the following output.</p>
<pre tabindex="0"><code>Device Information

EUI: 0004A30B001BDFA4
Battery: 3294
AppEUI: 70B3D57EF0004C75
DevEUI: 0004A30B001BDFA4
Data Rate: 5
RX Delay 1: 1000
RX Delay 2: 2000

Use the EUI to register the device for OTAA
-------------------------------------------
</code></pre><p><strong>Copy</strong> the Serial Monitor output into a <strong>text editor</strong> (E.g. Notepad) because you will need the <strong>AppEUI</strong> and <strong>DevEUI</strong> when you register your Things Node with The Things Stack.</p>
<h2 id="creating-an-application">Creating an Application</h2>
<p>The Things Node (or any end device) first needs to be registered with an <strong>application</strong> to communicate with The Things Stack. To create a new application, follow the instructions on the <a href="https://www.thethingsindustries.com/docs/integrations/adding-applications/">Adding Applications</a> page.</p>
<h2 id="registering-the-things-node-with-the-things-stack">Registering The Things Node with The Things Stack</h2>
<p>It’s time to register your Things Node with The Things Stack.</p>
<p>On the <strong>Applications</strong> page, select your application to view its <strong>Overview</strong> page.</p>
<p>Select <strong>+ Add end device</strong> in the bottom-right of the page.</p>
<figure><img src="AddEndDevice.png"
         alt="Add The Things Node"/>
</figure>

<p>The Things Stack provides two options to register your end device:</p>
<ul>
<li>From the LoRaWAN Device Repository</li>
<li>Manually</li>
</ul>
<p>The <strong>From the LoRaWAN Device Repository</strong> option provides only the <strong>OTAA</strong> activation method and the <strong>Manually</strong> option provides both <strong>OTAA</strong> and <strong>ABP</strong> activation methods. In this tutorial, we only look at the first option, <strong>From the LoRaWAN Device Repository</strong> which is the easiest way to register your Things Node with The Things Stack.</p>
<p>On the <strong>Register end device</strong> page, select the <strong>From the LoRaWAN Device Repository</strong> tab, if not already selected by default.</p>
<p>Under <strong>Select the end device</strong>, select the following mandatory fields.</p>
<ul>
<li>Brand - <code>The Things Products</code></li>
<li>Model – <code>The Things Node</code></li>
<li>Hardware Ver. – <code>1.0</code></li>
<li>Firmware Ver. – <code>1.0</code></li>
<li>Profile (Region) – Choose <code>EU_863_870</code> or <code>US_902_928</code> to match with your board.</li>
</ul>
<figure><img src="RegisterThingsNodeP1.png"
         alt="Register Things Node"/>
</figure>

<p>Under the <strong>Enter registration data</strong>, select/fill the following mandatory fields.</p>
<ul>
<li>Frequency plan – Select <code>Europe 863-870 MHz (SF9 for RX2 - recommended)</code> for <strong>EU_863_870</strong> or <code>United States 902-928 MHz, FSB2 (used by TTN)</code> for <strong>US_902_928</strong>.</li>
<li>AppEUI – Copy the <strong>AppEUI</strong> from the output printed by the <strong><em>DeviceInfo</em></strong> sketch.</li>
<li>DevEUI – Copy the <strong>DevEUI</strong> from the output printed by the <strong><em>DeviceInfo</em></strong> sketch.</li>
<li>AppKey – Select <strong>Generate</strong> button to generate an <strong>AppKey</strong>.</li>
<li>End device ID – Give your device a unique human-readable <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/">identifier</a>.</li>
</ul>
<p>Select the <strong>Register end device</strong> button.</p>
<figure><img src="RegisterThingsNodeP2.png"
         alt="Register Things Node"/>
</figure>

<p>Once registered, you will be redirected to the <strong>overview</strong> page of the newly registered Things Node, where you can find the generated <strong>AppKey</strong> which we’ll need next.</p>
<h2 id="payload-formatter">Payload Formatter</h2>
<p>The Things Node supports different types of payload formatters. However, for this quickstart you can use the payload formatter which we have provided through our <a href="https://www.thethingsnetwork.org/device-repository/">Device Repository</a>.</p>
<p>Click on the <strong>Payload formatters</strong> tab, then click on the <strong>Uplink</strong> tab.</p>
<p>Select <strong>Use Device Repository Formatters</strong> from the <strong>Formatter type</strong> drop-down box.</p>
<p>Click on the <strong>Save changes</strong> button.</p>
<figure><img src="payload-formatter.png"
         alt="Payload formatter"/>
</figure>

<h2 id="activating-the-things-node---otaa">Activating The Things Node - OTAA</h2>
<p>To activate the Things Node using Over-the-air-activation (OTAA), you must enter some configuration settings from The Things Stack.</p>
<p>In the Arduino IDE, select <strong>File → Examples → TheThingsNode → Basic</strong> from the menu bar. The <strong><em>Basic.ino</em></strong> sketch will open in a new window.</p>
<p>Replace the lines following the comment <strong>Set your AppEUI and AppKey</strong>. These keys can be found in your Things Node’s <strong>overview</strong> page under the <strong>Activation information</strong>.</p>
<pre tabindex="0"><code>// Set your AppEUI and AppKey
const char *appEui = &#34;0000000000000000&#34;;
const char *appKey = &#34;00000000000000000000000000000000&#34;;
</code></pre><figure><img src="ActivationInformation.png"
         alt="Activation Information"/>
</figure>

<p>Replace <strong>REPLACE_ME</strong> with <code>TTN_FP_EU868</code> or <code>TTN_FP_US915</code> depending on the frequency plan of your Things Node and your country/region.</p>
<pre tabindex="0"><code>// Replace REPLACE_ME with TTN_FP_EU868 or TTN_FP_US915
#define freqPlan TTN_FP_EU868
</code></pre><p>Select <strong>Sketch → Upload</strong> from the menu bar to upload the sketch.</p>
<p>Once uploaded go to the <strong>Live data</strong> section/tab of your application or The Things Node. You should be able to see the decoded payload of each event (setup, interval, motion, button).</p>
<figure><img src="decoded-payload.png"
         alt="decoded payloads"/>
</figure>

<p>You have now completed the quickstart and are able to activate The Things Node, send messages to an application, and decode them from the server side to get meaningful data. Go build something!</p>
        </div>
          <div class="columns is-multiline">
</div>

          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/devices/models/generic-node-se/">← Generic Node Sensor Edition</a>
<a class="button is-pulled-right" href="/docs/devices/models/the-things-uno/">The Things Uno →</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#setting-up-arduino'>Setting Up Arduino</a></li>
    
      
      <li><a href='#connecting-the-things-node-to-a-computer'>Connecting The Things Node to a Computer</a></li>
    
      
      <li><a href='#getting-the-deveui-and-appeui'>Getting the DevEUI and AppEUI</a></li>
    
      
      <li><a href='#creating-an-application'>Creating an Application</a></li>
    
      
      <li><a href='#registering-the-things-node-with-the-things-stack'>Registering The Things Node with The Things Stack</a></li>
    
      
      <li><a href='#payload-formatter'>Payload Formatter</a></li>
    
      
      <li><a href='#activating-the-things-node---otaa'>Activating The Things Node - OTAA</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-third">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/the-things-stack/">The Things Stack</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-third">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-third">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.4a22f0dea0620048bc258cf6dedbdfbec40f3b5dba1dcdc6536e61e7bc20a5bf.js" integrity="sha256-SiLw3qBiAEi8JYz23tvfvsQPO126Hc3GU25h57wgpb8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
