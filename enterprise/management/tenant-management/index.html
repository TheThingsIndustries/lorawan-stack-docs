<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.140.0-DEV">
  <title>Tenant Management | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/enterprise/management/tenant-management/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.d3f3815ed6609abc2ba6d0d6e3be8af6f52947117280c3cf9fbd8f5ff6ffb058.css" integrity="sha256-0/OBXtZgmrwrptDW476K9vUpRxFygMPPn72PX/b/sFg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Tenant Management">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Tenant Management">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/enterprise/management/tenant-management/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="Tenant Management" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.10.1/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/concepts/">Concepts</a>
        <a class="navbar-item" href="/docs/cloud/">The Things Stack Cloud</a>
        <a class="navbar-item" href="/docs/enterprise/">The Things Stack Enterprise</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/api/">API</a>
        <a class="navbar-item" href="/docs/hardware/">Hardware</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/stack/plans/" target="_blank">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">The Things Stack Enterprise</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/enterprise/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/" class="">AWS</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/kubernetes/" class="">Kubernetes</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/docker/" class="">Docker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/join-server/" class="">The Things Join Server</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/" class="">Manage The Things Stack</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/configuration/" class="">Configuration</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/rate-limiting/" class="">Rate Limiting</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/resource-limiting/" class="">Resource Limiting</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/stripe/" class="">Setting up billing with Stripe</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/tenant-management/" class="is-active">Tenant Management</a>
    
    



    
  </li>

</ul>


    
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        
        
        <h1 class="title is-size-2">Tenant Management</h1>
        <div class="content">
          <p>This guide contains detailed information on how to perform common tenant management operations for The Things Stack Enterprise.</p>
<div class="notification is-primary is-light has-text-dark">
  <h3 class="title has-text-dark mb-1">Command-line interface only</h3>
  <p>The instructions below use the command-line interface (CLI).</p>
  
  
  <p>The following commands are supported by <code>tti-lw-cli</code> CLI version only.</p>
  
  <div class="buttons">
    <a class="button is-dark is-outlined" href="https://www.thethingsindustries.com/docs/concepts/features/cli/installing-cli/">Learn how to install the CLI</a>
  </div>
</div>

<h2 id="authentication">Authentication</h2>
<p>Instead of using API keys and OAuth access tokens as for other The Things Stack services, the tenant services require using <strong>tenant admin keys</strong> for authentication.</p>
<p>Tenant admin keys are configured in the Identity Server as described <a href="https://www.thethingsindustries.com/docs/enterprise/management/configuration/identity-server/#tenant-administration-options">here</a>.</p>
<p>This means all tenant management CLI commands will need to have the <code>--tenant-admin-key</code> flag appended, followed by a tenant admin key that you configured in the Identity Server. See the section below for examples.</p>
<h2 id="basic-operations">Basic Operations</h2>
<p>We define some user parameters that will be used below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">TENANT_ID</span><span class="o">=</span><span class="s2">&#34;tenant1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">TENANT_ADMIN_KEY</span><span class="o">=</span><span class="s2">&#34;14596c0bdb9b11f6a97273e7c09167531571efa5898274e48660ee8d08f62b67&#34;</span>
</span></span></code></pre></div><p>Make sure to modify these according to your setup.</p>
<h3 id="create-a-tenant">Create a Tenant</h3>
<p>To create a new tenant with the tenant ID <code>tenant1</code>:</p>
<pre tabindex="0"><code>tti-lw-cli tenant create $TETANT_ID --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="get-a-tenant">Get a Tenant</h3>
<p>To get a tenant <code>tenant1</code>, i.e. to see details like when it was created or updated, and which its capabilities are:</p>
<pre tabindex="0"><code>tti-lw-cli tenant get $TENANT_ID --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="list-tenants">List Tenants</h3>
<p>To get descriptions of all tenants:</p>
<pre tabindex="0"><code>tti-lw-cli tenant list --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="delete-a-tenant">Delete a Tenant</h3>
<p>To delete a tenant <code>tenant1</code>:</p>
<pre tabindex="0"><code>tti-lw-cli tenant delete $TENANT_ID --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="get-tenant-identifiers-for-device-euis">Get Tenant Identifiers for Device EUIs</h3>
<p>To get a tenant ID based on your device&rsquo;s DevEUI and JoinEUI:</p>
<pre tabindex="0"><code>DEV_EUI=&#34;0004A30B001C0530&#34;
JOIN_EUI=&#34;800000000000000C&#34;
tti-lw-cli tenant get-identifiers-for-end-device-euis --dev-eui $DEV_EUI --join-eui $JOIN_EUI --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="get-tenant-identifiers-for-a-gateway-eui">Get Tenant Identifiers for a Gateway EUI</h3>
<p>To get a tenant ID based on your gateways&rsquo;s EUI:</p>
<pre tabindex="0"><code>GTW_EUI=&#34;00800000A00009EF&#34;
tti-lw-cli tenant get-identifiers-for-gateway-eui --gateway-eui $GTW_EUI --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="search-for-tenants">Search for Tenants</h3>
<p>You can search tenants based on multiple criteria such as name, maximum number of entities, state, configuration, etc. These criteria are defined using flags. To see all available flags, use the following command:</p>
<pre tabindex="0"><code>tti-lw-cli tenant search --help
</code></pre><p>For example, to search for recently deleted tenants:</p>
<pre tabindex="0"><code>tti-lw-cli tenant search --deleted --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h3 id="update-a-tenant">Update a Tenant</h3>
<p>You can update a tenant in multiple ways, for example change its name, set a maximum number of entities, change configuration and billing settings, etc. Use the following command to list all available flags:</p>
<pre tabindex="0"><code>tti-lw-cli tenant update --help
</code></pre><p>For example, to update a maximum number of end devices that can be registered in a tenant to 3:</p>
<pre tabindex="0"><code>tti-lw-cli tenant update --tenant-id $TENANT_ID --max-end-devices 3 --tenant-admin-key $TENANT_ADMIN_KEY
</code></pre><h2 id="setting-a-devaddr-prefix-for-a-tenant">Setting a DevAddr Prefix for a Tenant</h2>
<p>In a multi-tenant deployment, different tenants share the same NetID, but they use different DevAddr blocks. DevAddr blocks need to be configured for every tenant in order for Packet Broker to be able to distinguish traffic that belongs to each of those tenants.</p>
<p>Setting a DevAddr prefix for a tenant can be done using the <code>update</code> operation mentioned in the section above. To set a DevAddr prefix for a tenant <code>tenant1</code>:</p>
<pre tabindex="0"><code>DEV_ADDR_PREFIX=&#34;27123400/24&#34;
tti-lw-cli tenant update --tenant-id $tenant_id --configuration.default-cluster.ns.dev-addr-prefixes $DEV_ADDR_PREFIX
</code></pre>
        </div>
          <div class="columns is-multiline">
</div>

          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/enterprise/management/stripe/customers/">← Customers</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#authentication'>Authentication</a></li>
    
      
      <li><a href='#basic-operations'>Basic Operations</a></li>
    
      
      <li><a href='#setting-a-devaddr-prefix-for-a-tenant'>Setting a DevAddr Prefix for a Tenant</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sections</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/concepts/">Concepts</a></p>
        <p><a class="" href="/docs/cloud/">The Things Stack Cloud</a></p>
        <p><a class="" href="/docs/enterprise/">The Things Stack Enterprise</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
        <p><a class="" href="/docs/hardware/">Hardware</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sitemap</h3>
        <p><a class="" href="https://www.thethingsindustries.com/docs/sitemap/">View our Sitemap</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-fourth">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.3bf0da17f5ab4cc0f916662c2d2f977f7fa7259b4483f7f9eb46e875a556cc43.js" integrity="sha256-O/DaF/WrTMD5FmYsLS&#43;Xf3&#43;nJZtEg/f560bodaVWzEM=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
