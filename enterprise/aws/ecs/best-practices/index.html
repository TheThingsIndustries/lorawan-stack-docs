<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.140.0-DEV">
  <title>Best Practices | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/best-practices/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.d3f3815ed6609abc2ba6d0d6e3be8af6f52947117280c3cf9fbd8f5ff6ffb058.css" integrity="sha256-0/OBXtZgmrwrptDW476K9vUpRxFygMPPn72PX/b/sFg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Best Practices">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Best Practices">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/best-practices/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="Best Practices" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.10.1/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/concepts/">Concepts</a>
        <a class="navbar-item" href="/docs/cloud/">The Things Stack Cloud</a>
        <a class="navbar-item" href="/docs/enterprise/">The Things Stack Enterprise</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/api/">API</a>
        <a class="navbar-item" href="/docs/hardware/">Hardware</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/stack/plans/" target="_blank">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">The Things Stack Enterprise</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/enterprise/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/" class="">AWS</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ami/" class="">AWS Marketplace AMI</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/" class="">AWS ECS</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/architecture/" class="">Architecture</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/prerequisites/" class="">Prerequisites</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/deployment/" class="">Deployment</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/database-operations/" class="">Database Operations</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/monitoring/" class="">Monitoring</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/updating/" class="">Updating</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/best-practices/" class="is-active">Best Practices</a>
    
    



    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/interop/" class="">Interoperability</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/mutual-tls/" class="">Mutual TLS</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/troubleshooting/" class="">Troubleshooting AWS ECS Deployment</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/aws/ecs/changelog/" class="">Template Changelog</a>
    
  </li>

</ul>


    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/kubernetes/" class="">Kubernetes</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/docker/" class="">Docker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/join-server/" class="">The Things Join Server</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/enterprise/management/" class="">Manage The Things Stack</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        
        
        <h1 class="title is-size-2">Best Practices</h1>
        <div class="content">
          <p>This page describes best practices of a The Things Stack deployment on AWS ECS.</p>
<h2 id="stack-naming">Stack Naming</h2>
<p>Templates are numbered in suggested order of deployment. This doesn&rsquo;t mean that numbering won&rsquo;t change in the future. Our suggested naming scheme is <code>$PREFIX-$NAME</code>, where <code>$PREFIX</code> is some prefix specific to your deployment.</p>
<h2 id="staging">Staging</h2>
<p>Performing maintenance operations requires in-depth knowledge of AWS and The Things Stack. It is likely that certain action might have unexpected results. For this reason, we strongly advise to maintain a staging environment, and test all updates on staging before deploying to production.</p>
<h2 id="high-availability">High Availability</h2>
<p>Most components of The Things Stack offer some form of high availability - multiple ECS tasks, master/replica database nodes, etc. It is vital to make use of these functionalities in case of a random failure.</p>
<h2 id="back-ups">Back-ups</h2>
<p>The Things Stack uses five types of storage:</p>
<ol>
<li>
<p>AWS RDS Aurora database</p>
</li>
<li>
<p>AWS ElastiCache database</p>
</li>
<li>
<p>TimescaleDB</p>
</li>
<li>
<p>AWS EFS drive for monitoring</p>
</li>
<li>
<p>S3 buckets</p>
</li>
</ol>
<p>AWS RDS Aurora and AWS ElastiCache databases keep important data. By default they have automatic backups. It is advised to periodically check that the backups are still performed correctly, and they restore successfully.</p>
<p>TimescaleDB keeps storage integration data. Currently there is no backup, because this data is not considered important.</p>
<p>AWS EFS drive for monitoring keeps historic monitoring data. This data isn&rsquo;t considered important.</p>
<p>You might want to consider turning on versioning on the S3 buckets. Currently this can&rsquo;t be done from our templates, but you can do it in bucket settings. Data in these buckets is not vital for functioning of The Things Stack, but loss might result in incovenience.</p>
<h2 id="ssh-access">SSH access</h2>
<p>EC2 machines included in templates can be accessed via SSH. Our suggested access models:</p>
<ol>
<li>The EC2 machines can be configured to work with AWS Session Manager. Using AWS Session Manager allows administrators to access the machines without using SSH keys, and manage rights via AWS IAM.</li>
<li>The templates offer a firewall setting restricting SSH access to a given subnet. This can be used to only allow access from internal network, or from an SSH gateway.</li>
</ol>
<h2 id="updating-software">Updating software</h2>
<p>It is advised to periodically perform <code>sudo yum update</code> on the machines to update software other than The Things Stack.</p>
<h2 id="alerting">Alerting</h2>
<p>The Things Stack supports integration with services like Opsgenie for sending alerts about basic diagnostics, like CPU/Memory usage or high number of warnings. It is crucial to make use of this alerting system.</p>
<h2 id="multi-tenancy">Multi-tenancy</h2>
<p>When purchasing an Enterprise license, consider setting up a multi-tenant environment from the beginning if you plan to add tenants later. Switching from a single-tenant to a multi-tenant environment requires a database migration.</p>
<h2 id="rds-auto-minor-version-upgrade">RDS Auto minor version upgrade</h2>
<p>Enabling the <code>Auto minor version upgrade</code> option on AWS RDS results in automatic upgrades of RDS instances to the latest minor version, subject to AWS marking them as auto-upgradeable. These upgrades may entail minor downtime. <strong>For precise control over downtime, it&rsquo;s advisable to opt for manual upgrades and disable this option.</strong></p>

        </div>
          <div class="columns is-multiline">
</div>

          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/enterprise/aws/ecs/updating/">← Updating</a>
<a class="button is-pulled-right" href="/docs/enterprise/aws/ecs/interop/">Interoperability →</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#stack-naming'>Stack Naming</a></li>
    
      
      <li><a href='#staging'>Staging</a></li>
    
      
      <li><a href='#high-availability'>High Availability</a></li>
    
      
      <li><a href='#back-ups'>Back-ups</a></li>
    
      
      <li><a href='#ssh-access'>SSH access</a></li>
    
      
      <li><a href='#updating-software'>Updating software</a></li>
    
      
      <li><a href='#alerting'>Alerting</a></li>
    
      
      <li><a href='#multi-tenancy'>Multi-tenancy</a></li>
    
      
      <li><a href='#rds-auto-minor-version-upgrade'>RDS Auto minor version upgrade</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sections</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/concepts/">Concepts</a></p>
        <p><a class="" href="/docs/cloud/">The Things Stack Cloud</a></p>
        <p><a class="" href="/docs/enterprise/">The Things Stack Enterprise</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
        <p><a class="" href="/docs/hardware/">Hardware</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sitemap</h3>
        <p><a class="" href="https://www.thethingsindustries.com/docs/sitemap/">View our Sitemap</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-fourth">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.3bf0da17f5ab4cc0f916662c2d2f977f7fa7259b4483f7f9eb46e875a556cc43.js" integrity="sha256-O/DaF/WrTMD5FmYsLS&#43;Xf3&#43;nJZtEg/f560bodaVWzEM=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
