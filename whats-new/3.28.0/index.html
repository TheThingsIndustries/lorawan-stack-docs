<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.112.3">
  <title>3.28.0 | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/whats-new/3.28.0/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.5ba0be8f5f0e953584382f5875ae6ec65f7a9a9cda0dea27bd9ddb1025d10fa5.css" integrity="sha256-W6C&#43;j18OlTWEOC9Yda5uxl96mpzaDeonvZ3bECXRD6U=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="The Things Stack for LoRaWAN">
  <meta name="keywords" content="">
  <meta itemprop="name" content="3.28.0">
  <meta itemprop="description" content="The Things Stack for LoRaWAN">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="3.28.0">
  <meta property="og:description" content="The Things Stack for LoRaWAN">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/whats-new/3.28.0/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="3.28.0" />
  <meta name="twitter:description" content="The Things Stack for LoRaWAN" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.7.2/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/the-things-stack/">The Things Stack</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>
        <a class="navbar-item" href="/docs/api/">API</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Release Notes</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/whats-new/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.29.1/" class="">3.29.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.29.0/" class="">3.29.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.28.2/" class="">3.28.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.28.1/" class="">3.28.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.28.0/" class="is-active">3.28.0</a>
    



    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.27.2/" class="">3.27.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.27.1/" class="">3.27.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.27.0/" class="">3.27.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.26.2/" class="">3.26.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.26.1/" class="">3.26.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.26.0/" class="">3.26.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.25.2/" class="">3.25.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.25.1/" class="">3.25.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.25.0/" class="">3.25.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.24.2/" class="">3.24.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.24.1/" class="">3.24.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.24.0/" class="">3.24.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.23.2/" class="">3.23.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.23.1/" class="">3.23.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.23.0/" class="">3.23.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.22.2/" class="">3.22.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.22.1/" class="">3.22.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.22.0/" class="">3.22.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.21.2/" class="">3.21.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.21.1/" class="">3.21.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.21.0/" class="">3.21.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.20.2/" class="">3.20.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.20.1/" class="">3.20.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.20.0/" class="">3.20.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.19.2/" class="">3.19.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.19.1/" class="">3.19.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.19.0/" class="">3.19.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.18.2/" class="">3.18.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.18.1/" class="">3.18.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.18.0/" class="">3.18.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.17.2/" class="">3.17.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.17.1/" class="">3.17.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.17.0/" class="">3.17.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.16.3/" class="">3.16.3</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.16.2/" class="">3.16.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.16.1/" class="">3.16.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.16.0/" class="">3.16.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.15.2/" class="">3.15.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.15.1/" class="">3.15.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.15.0/" class="">3.15.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.14.2/" class="">3.14.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.14.1/" class="">3.14.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.14.0/" class="">3.14.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.13.3/" class="">3.13.3</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.13.2/" class="">3.13.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.13.1/" class="">3.13.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.13.0/" class="">3.13.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.12.3/" class="">3.12.3</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.12.2/" class="">3.12.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.12.1/" class="">3.12.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.12.0/" class="">3.12.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.11.3/" class="">3.11.3</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.11.2/" class="">3.11.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.11.1/" class="">3.11.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.11.0/" class="">3.11.0</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.8/" class="">3.10.8</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.7/" class="">3.10.7</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.6/" class="">3.10.6</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.5/" class="">3.10.5</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.4/" class="">3.10.4</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.3/" class="">3.10.3</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.2/" class="">3.10.2</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.1/" class="">3.10.1</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/whats-new/3.10.0/" class="">3.10.0</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">3.28.0
          
        </h1>
        
        <div class="content">
          <h3 id="added">Added</h3>
<ul>
<li>Locations retrieved from gateway status messages are now be displayed in the gateway map in the Console, even when they are not received through a secure connection.</li>
<li>The Network Server ID (NSID, EUI-64) used in LoRaWAN Backend Interfaces is now included in the application uplink message network metadata as well as in the Backend Interfaces <code>HomeNSAns</code> message that Identity Server returns to clients. The NSID is configurable via <code>is.network.ns-id</code>.</li>
<li>The NetID and NSID are added to the tenant cluster configuration. This allows configuring per-tenant per-cluster NetID and NSIDs. If set, they override Identity Server&rsquo;s default NetID and NSID.</li>
<li>It is now possible to trigger a resending of the email validation email from within the Console. The new action is part of the error screen that users see when they log into the Console without having their contact info validated yet (and the network requires validation before usage).</li>
<li>Updated Japanese translations for the Console and backend.</li>
<li>Experimental support for exporting the last seen timestamp of a gateway as Prometheus metrics.
<ul>
<li>This is exported on a separate path <code>/alert-metrics</code> with separate credentials. See <code>http.alert-metrics</code>.</li>
</ul>
</li>
<li><code>--grpc.correlation-ids-ignore-methods</code> configuration option, which allows certain gRPC methods to be skipped from the correlation ID middleware which adds a correlation ID with the name of the gRPC method. Methods bear the format used by <code>--grpc.log-ignore-methods</code>, such as <code>/ttn.lorawan.v3.GsNs/HandleUplink</code>.</li>
<li>Option to ignore the <code>email_verified</code> field in the callback when logging in via an OIDC authorization provider that doesn&rsquo;t set it.
<ul>
<li>The <code>allowed_email_domains</code> field of the authentication provider configuration should be set. The email in the callback should match this regex.</li>
<li>This requires an Identity Server database migration (<code>ttn-lw-stack is-db migrate</code>).</li>
</ul>
</li>
<li>Support for setting multiple frequency plans for gateways from the Console.</li>
<li>The <code>ns-db purge</code> command to purge unused data from the Network Server database.</li>
</ul>
<h3 id="changed">Changed</h3>
<ul>
<li>Users can now request a new email for the account validation from time to time instead of once per validation, the interval between email requests is determined by <code>is.user-registration.contact-info-validation.retry-interval</code> and by default it is an hour.</li>
<li>Traffic related correlation IDs have been simplified. Previously one correlation ID per component was added as traffic passed through different stack components. Now a singular correlation ID relating to the entry point of the message will be added (such as <code>gs:uplink:xxx</code> for uplinks, or <code>as:downlink:xxx</code> for downlinks), and subsequent components will no longer add any extra correlation IDs (such as <code>ns:uplink:xxx</code> or <code>as:up:xxx</code>). The uplink entry points are <code>pba</code> and <code>gs</code>, while the downlink entry points are <code>pba</code>, <code>ns</code> and <code>as</code>.</li>
<li>Network Operations Center now includes the LoRa Alliance NetIDs up to revision 81.</li>
<li>Network Operations Center requires the gateway uplink message&rsquo;s data rate to be present in the database.
<ul>
<li>This requires a Network Operations Center migration (<code>tti-lw-stack noc-db migrate</code>).</li>
<li>To aggregate existing data, refresh the materialized view with gateway uplink data rate utilization. Connect with <code>psql</code> to the TimescaleDB database and run:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CALL</span><span class="w"> </span><span class="n">refresh_continuous_aggregate</span><span class="p">(</span><span class="s1">&#39;gateway_uplink_data_rate_utilization_5m&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">NOW</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30 days&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">NOW</span><span class="p">());</span><span class="w">
</span></span></span></code></pre></div></li>
<li>Packet Broker Agent uplink tokens are now serialized in a more efficient manner.</li>
<li>The Network Server now stores only the most recent uplinks tokens.</li>
<li>The Application Server webhook health system now records failures only every retry interval while in monitor mode, as opposed to recording every failure.
<ul>
<li>Monitor mode in this context refers to situations in which either <code>--as.webhooks.unhealthy-attempts-threshold</code> or <code>--as.webhooks.unhealthy-retry-interval</code> are less or equal to zero. In such situations, the Application Server will record failures but will not stop the execution of the webhooks.</li>
<li>Using a retry interval of zero and a non zero attempts threshold restores the previous behavior.</li>
</ul>
</li>
</ul>
<h3 id="fixed">Fixed</h3>
<ul>
<li>Providing fixed downlink paths to the <code>ttn-lw-cli devices downlink {push|replace}</code> commands using the <code>-class-b-c.gateways</code> parameter. The gateways IDs are comma separated, and the antenna index <code>i</code> can be provided by suffixing the ID with <code>:i</code> (i.e. <code>my-gateway:0</code> for antenna index 0). The group index <code>j</code> can be provided by suffixing the ID with <code>:j</code> (i.e. <code>my-gateway:0:1</code> for antenna index 0 and group index 1). The antenna index is mandatory if a group index is to be provided, but optional otherwise.</li>
<li>Gateway registration without gateway EUI not working.</li>
<li>Listing deleted entities is now fixed for both admin and standard users, which previously returned an <code>account_not_found</code> error.</li>
<li>Update to an user&rsquo;s <code>PrimaryEmailAddress</code> via a non admin now invalidates the <code>PrimaryEmailAddressValidatedAt</code> as it was intended.</li>
<li>Negative number support in Cayenne LPP.</li>
<li>Fix panic in snapcraft CLI deployment, commands will no longer generate a panic error message when telemetry is enabled.</li>
</ul>

        </div>
        <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/whats-new/3.28.1/">← 3.28.1</a>
<a class="button is-pulled-right" href="/docs/whats-new/3.27.2/">3.27.2 →</a>
</div>

        <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    



  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-third">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/the-things-stack/">The Things Stack</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
      </nav>
      <nav class="column is-one-third">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-third">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.4a22f0dea0620048bc258cf6dedbdfbec40f3b5dba1dcdc6536e61e7bc20a5bf.js" integrity="sha256-SiLw3qBiAEi8JYz23tvfvsQPO126Hc3GU25h57wgpb8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
