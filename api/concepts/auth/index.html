<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.112.3">
  <title>Authentication | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/api/concepts/auth/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.5ba0be8f5f0e953584382f5875ae6ec65f7a9a9cda0dea27bd9ddb1025d10fa5.css" integrity="sha256-W6C&#43;j18OlTWEOC9Yda5uxl96mpzaDeonvZ3bECXRD6U=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Authentication">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Authentication">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/api/concepts/auth/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="Authentication" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.10.0/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/the-things-stack/">The Things Stack</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>
        <a class="navbar-item" href="/docs/api/">API</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/stack/plans/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">API</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/api/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/" class="">Concepts</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/auth/" class="is-active">Authentication</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/auth/oauth-access-tokens/" class="">OAuth access tokens</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/auth/session-tokens/" class="">Session tokens</a>
    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/fieldmasks/" class="">Field masks</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/pagination/" class="">Pagination</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/errors/" class="">Errors</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/lora-gateway/" class="">LoRa® Gateway specific APIs</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/api/concepts/troubleshooting/" class="">Troubleshooting</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/api/reference/" class="">Reference</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Authentication
          
        </h1>
        
        <div class="content">
          <p>The Things Stack supports authentication using API keys, OAuth access tokens and Session cookies.</p>
<p>The Things Stack <strong>API keys</strong> are the most commonly used method to authenticate and authorize API calls. This guide shows you how to create API keys, assign rights to them and use them to authenticate API calls. For OAuth access tokens and Session cookies, check the specific guides at the end of this page.</p>
<h2 id="what-are-api-keys">What are API Keys</h2>
<p>The Things Stack API keys are strings that have three parts separated by a dot (<code>.</code>). The format of an API key is shown below.</p>
<pre tabindex="0"><code>&lt;token-type&gt;.&lt;token-id&gt;.&lt;token-secret&gt;
</code></pre><div class="fixed-table table-auth-key">
<table>
<thead>
<tr>
<th>Item</th>
<th>Length</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>token-type</code></td>
<td>5</td>
<td>Fixed to <code>NNSXS</code> (&ldquo;key&rdquo; as base32 encoded string )</td>
</tr>
<tr>
<td><code>token-id</code></td>
<td>39</td>
<td>Unique identifier of the key, randomly generated</td>
</tr>
<tr>
<td><code>token-secret</code></td>
<td>52</td>
<td>The secret value of they key, randomly generated</td>
</tr>
</tbody>
</table>
</div>
<p>An example API Key is as follows</p>
<pre tabindex="0"><code>NNSXS.U4H3ZFFCMSR42BUAZPW2UWGFBV4WCNI5EXDJXDY.SHIF3PP5PBMJNZESN5XLR5TZJTJUIGKVUTM2I22IVBUVCD6VIQIA
</code></pre><div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  Please be careful not to expose your token secrets. Always redact the <code>token-secret</code> part of your token when publicly posting examples, screenshots etc.
</div>

<p>API Keys <em>by default do not have</em> an expiry date. These have to be set explicitly while creating or updating them. API keys can be revoked by <em>simply deleting them</em>.</p>
<h2 id="authorization">Authorization</h2>
<p>Authentication is the process of verifying the <em>identity</em> of the caller. If the caller provides a valid, non-expired API key, the caller is authenticated.</p>
<p>Authorization on the other hand, is the process of determining if the authenticated caller has the <em>necessary rights</em> to perform the requested action. The Things Stack handles authorization using Rights. Each API key is assigned a set of rights and The Things Stack checks this against the API call being made. For example, if the API call is to update a user but the API key only has rights to read users, then this call will be rejected.</p>
<p>For a full list of available rights, check the <a href="https://www.thethingsindustries.com/docs/api/reference/grpc/user/">reference</a>.</p>
<h2 id="creating-user-api-keys">Creating User API Keys</h2>
<p>API keys have other purposes such as authenticating gateways when they connect to The Things Stack or authenticating external integrations to send downlinks to devices.</p>
<p>In this section we explain how to create a <em>user API key</em>, which can be used to authenticate API calls on behalf of the user. API keys can be created either using the Console or the CLI. Choose the method that you prefer below.</p>
<div class="tabs is-boxed">
  <ul>
    
    <li data-tab="console">
      <a>
        <span>Console</span>
      </a>
    </li>
    
    <li data-tab="cli">
      <a>
        <span>CLI</span>
      </a>
    </li>
    
  </ul>
</div>
<div class="tab-content content">
  <section data-content="console">
  <p>In the users dropdown on the right side, select the <strong>Personal API Keys</strong> option and select <strong>+Add API Key</strong>.</p>
<figure><img src="personal-api-keys.png"
         alt="Personal API key"/>
</figure>
<figure><img src="add-api-key-button.png"
         alt="Add API key"/>
</figure>
<p>Choose an optional expiry date and choose the required rights.</p>
<figure><img src="application-rights.png"
         alt="Selectable rights"/>
</figure>
<p>You can also choose <strong>Grant all current and future rights</strong> to this API key. Note that this gives the API Key all the access that your user has.</p>
<figure><img src="rights-all.png"
         alt="All rights"/>
</figure>
<p>Now make sure to copy this API key as you will not be able to retrieve it again.</p>
<figure><img src="copy-api-key.png"
         alt="Copy API key"/>
</figure>
</section>
<section data-content="cli">
  <p>To create a user API key from the Command Line Interface, run the following command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">API_KEY_NAME</span><span class="o">=</span><span class="s2">&#34;User API Key&#34;</span>
</span></span><span class="line"><span class="cl">ttn-lw-cli users api-keys create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --name <span class="nv">$API_KEY_NAME</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --user-id <span class="nv">$USER_ID</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --right-user-all <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --api-key-expiry 2023-11-23T00:00:00Z
</span></span></code></pre></div><p>The CLI will return the following JSON.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;ZXPW62GWUYNYJIERJDHBIECRJEKYYDMACPPBEUI&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="s2">&#34;NNSXS.ZXPW62GWUYNYJIERJDHBIECRJEKYYDMACPPBEUI.LQD7A5VGEXNZ7F7PNTVUPMPDEB5XBJMTIH6ESUEE622VU2FQVESA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;rights&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;RIGHT_USER_ALL&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;created_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-11-22T15:50:02.883333Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;updated_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-11-22T15:50:02.883334Z&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Now make sure to copy this API key as you will not be able to retrieve it again.</p>
</section>

</div>

<h2 id="using-api-keys">Using API Keys</h2>
<p>This sections shows how you can use API keys to authenticate HTTP (REST) API calls. For other APIs (gRPC, MQTT), check the corresponding sections.</p>
<p>For HTTP (REST) API calls, this API key has to be presented to the server as a <code>Bearer</code> token in the HTTP <code>Authorization</code> header. The following example uses <a href="https://curl.se/">curl</a> to make an HTTP API request using the example API key.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl -X <span class="s1">&#39;GET&#39;</span> -H <span class="s1">&#39;Accept: application/json&#39;</span> -H <span class="s1">&#39;Authorization: Bearer NNSXS.U4H3ZFFCMSR42BUAZPW2UWGFBV4WCNI5EXDJXDY.SHIF3PP5PBMJNZESN5XLR5TZJTJUIGKVUTM2I22IVBUVCD6VIQIA&#39;</span> <span class="s1">&#39;https://thethings.example.com/api/v3/applications/&lt;application_id&gt;/devices/&lt;device_id&gt;&#39;</span>
</span></span></code></pre></div><p>If you are using <a href="https://www.postman.com/">Postman</a> to make API calls, in the <strong>Authorization</strong> tab select <strong>Bearer Token</strong> as the <strong>Type</strong> and paste the API key in the text field on the right.</p>
<figure><img src="postman-api-key.png"
         alt="Postman API key"/>
</figure>

<p>Now that you have learnt about API keys, you can proceed to the <a href="https://www.thethingsindustries.com/docs/api/concepts/fieldmasks/">field masks</a> section.</p>
<p>Alternatively, look at how to work with OAuth access tokens and Session cookies in the guides below.</p>
        </div>
          <div class="columns is-multiline">
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/api/concepts/auth/oauth-access-tokens/">OAuth access tokens</a>
          </h1>
          
          <div class="content has-text-grey">
            
            The Things Stack uses the OAuth 2.0 protocol for authentication and authorization.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/api/concepts/auth/oauth-access-tokens/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/api/concepts/auth/session-tokens/">Session tokens</a>
          </h1>
          
          <div class="content has-text-grey">
            
            Session cookies provide a way to authorize API usage using the session cookie obtained during authentication with the OAuth provider (/oauth/login).

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/api/concepts/auth/session-tokens/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
</div>

          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/api/concepts/">← Concepts</a>
<a class="button is-pulled-right" href="/docs/api/concepts/auth/oauth-access-tokens/">OAuth access tokens →</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#what-are-api-keys'>What are API Keys</a></li>
    
      
      <li><a href='#authorization'>Authorization</a></li>
    
      
      <li><a href='#creating-user-api-keys'>Creating User API Keys</a></li>
    
      
      <li><a href='#using-api-keys'>Using API Keys</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-third">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/the-things-stack/">The Things Stack</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
      </nav>
      <nav class="column is-one-third">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-third">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.4a22f0dea0620048bc258cf6dedbdfbec40f3b5dba1dcdc6536e61e7bc20a5bf.js" integrity="sha256-SiLw3qBiAEi8JYz23tvfvsQPO126Hc3GU25h57wgpb8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
