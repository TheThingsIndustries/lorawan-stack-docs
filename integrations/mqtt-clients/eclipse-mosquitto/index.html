<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Eclipse Mosquitto | The Things Stack for LoRaWAN</title>
  <link rel="alternate icon" href="/thethingsindustries.com/docs/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/thethingsindustries.com/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/thethingsindustries.com/docs/favicon.svg">
  <link rel="stylesheet" href="/thethingsindustries.com/docs/css/theme.min.f73831f1cd2827cc6e72a8e0df5a006e289e15ed508da505203eb0ef3f9e4238.css" integrity="sha256-9zgx8c0oJ8xucqjg31oAbiieFe1QjaUFID6w7z&#43;eQjg="><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Eclipse Mosquitto">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Eclipse Mosquitto">
  <meta property="og:description" content="">
  <meta property="og:url" content="thethingsindustries.com/docs/integrations/mqtt-clients/eclipse-mosquitto/">
  <meta name="twitter:title" content="Eclipse Mosquitto" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/thethingsindustries.com/docs/">
        <img src="/thethingsindustries.com/docs/img/TTS-horizontal-logo.svg">
        <p class="navbar-item is-size-7">v3.10.0-dev</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="thethingsindustries.com/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/devices/">Devices</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/reference/">Reference</a>
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="button is-primary" href="thethingsindustries.com/docs/download/">Get The Things Stack</a>
        </div>
      </div>
    </div>
  </div>
</nav>
<section class="search-container">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <div class="field has-addons has-addons-centered">
            <div class="control">
              <input class="input search-bar" id="search-input" type="text" placeholder="Search" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: "",
indexName: "thethingsstack",
inputSelector: '#search-input',
debug: false 
});
</script>

<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">MQTT Clients</h2>

<ul class="menu-list">
<a href="thethingsindustries.com/docs/integrations/mqtt-clients/" class="">Overview</a>
<li>
  <a href="thethingsindustries.com/docs/integrations/mqtt-clients/eclipse-mosquitto/" class="is-active">Eclipse Mosquitto</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/integrations/mqtt-clients/eclipse-paho/" class="">Eclipse Paho</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/integrations/mqtt-clients/hivemq/" class="">HiveMQ</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/integrations/mqtt-clients/mqttbox/" class="">MQTTBox</a>
</li>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Eclipse Mosquitto</h1>

<div class="content">

<p><a href="https://mosquitto.org/">Eclipse Mosquitto</a> is a project which provides an open source MQTT broker, a C and C++ library for MQTT client implementations and the popular command line MQTT clients. Its lightweight MQTT protocol implementation makes it suitable for full power machines, as well as for the low power and embedded ones.</p>
<p>This guide shows how to receive upstream messages and send downlink messages with the Eclipse Mosquitto command line clients and The Things Stack <a href="thethingsindustries.com/docs/integrations/mqtt/">MQTT Server</a>.</p>
<blockquote>
<p>Note: Eclipse Mosquitto MQTT server supports 3.1, 3.1.1 and 5.0 MQTT protocol versions.</p>
</blockquote>
<h2 id="requirements">Requirements</h2>
<ol>
<li><a href="https://github.com/eclipse/mosquitto">Eclipse Mosquitto MQTT server</a> installed on your system.</li>
</ol>
<h2 id="subscribing-to-upstream-traffic">Subscribing to Upstream Traffic</h2>
<blockquote>
<p>Note: this section follows the example for subscribing to upstream traffic in the <a href="thethingsindustries.com/docs/integrations/mqtt/#subscribing-to-upstream-traffic">MQTT Server</a> guide.</p>
</blockquote>
<p>The command for connecting to a host and subscribing to a topic has using <code>mosquitto_sub</code> has the following syntax:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mosquitto_sub -h <span class="o">{</span>hostname<span class="o">}</span> -p <span class="o">{</span>port<span class="o">}</span> -u <span class="o">{</span>username<span class="o">}</span> -P <span class="o">{</span>password<span class="o">}</span> -t <span class="o">{</span>topic<span class="o">}</span>
</code></pre></div><p>For example, to subscribe to all topics in the application <code>app1</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Tip: when using `mosquitto_sub`, pass the `-d` flag to see the topics messages get published on.</span>
<span class="c1"># For example:</span>
$ mosquitto_sub -h thethings.example.com -t <span class="s2">&#34;#&#34;</span> -u app1 -P <span class="s2">&#34;NNSXS.VEEBURF3KR77ZR..&#34;</span> -d
</code></pre></div><p>In you want to use TLS, you need to change the port value to <code>8883</code> and add the <code>--cafile</code> option to the command. <code>--cafile</code> option is used to define a path to the file containing trusted CA certificates that are PEM encoded.</p>
<blockquote>
<p>Read more about the command line options in the <a href="https://mosquitto.org/man/mosquitto_sub-1.html">mosquitto_sub manual</a>.</p>
</blockquote>
<h2 id="publishing-downlink-messages">Publishing Downlink Messages</h2>
<blockquote>
<p>Note: this section follows the example for publishing downlink traffic in the <a href="thethingsindustries.com/docs/integrations/mqtt/">MQTT Server</a> guide. See <a href="thethingsindustries.com/docs/integrations/mqtt/#publishing-downlink-traffic">Publishing Downlink Messages</a> for a list of available topics.</p>
</blockquote>
<p>For connecting to a host and publishing a message, <strong>mosquitto_pub</strong> client defines a command with the following syntax:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mosquitto_pub -h <span class="o">{</span>hostname<span class="o">}</span> -p <span class="o">{</span>port<span class="o">}</span> -u <span class="o">{</span>username<span class="o">}</span> -P <span class="o">{</span>password<span class="o">}</span> -t <span class="o">{</span>topic<span class="o">}</span> -m <span class="o">{</span>message<span class="o">}</span>
</code></pre></div><p>For example, to send an unconfirmed downlink message to the device <code>dev1</code> in application <code>app1</code> with the hexadecimal payload <code>BE EF</code> on <code>FPort</code> 15 with normal priority, use the topic <code>v3/app1/devices/dev1/down/push</code> with the following contents:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mosquitto_pub -h <span class="s2">&#34;thethings.example.com&#34;</span> -p <span class="s2">&#34;1883&#34;</span> -u <span class="s2">&#34;app1&#34;</span> -P <span class="s2">&#34;NNSXS.VEEBURF3KR77ZR..&#34;</span> -t <span class="s2">&#34;v3/app1/devices/dev1/up&#34;</span> -m <span class="s1">&#39;{&#34;downlinks&#34;:[{&#34;f_port&#34;: 15,&#34;frm_payload&#34;:&#34;vu8=&#34;,&#34;priority&#34;: &#34;NORMAL&#34;}]}&#39;</span>
</code></pre></div><p>If TLS is being used, change the port value to <code>8883</code> and add the <code>--cafile</code> option to the command.</p>
<blockquote>
<p>Read more about the command line options in the <a href="https://mosquitto.org/man/mosquitto_pub-1.html">mosquitto_pub manual</a>.</p>
</blockquote>
</div>



<script>window.emojicom_widget = { campaign: "" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>


<div class="is-clearfix">
<a class="button is-pulled-left" href="thethingsindustries.com/docs/integrations/mqtt-clients/">← MQTT Clients</a>
<a class="button is-pulled-right" href="thethingsindustries.com/docs/integrations/mqtt-clients/eclipse-paho/">Eclipse Paho →</a>
</div>




      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer has-background-primary">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="thethingsindustries.com/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="thethingsindustries.com/docs/devices/">Devices</a></p>
        <p><a class="" href="thethingsindustries.com/docs/gateways/">Gateways</a></p>
        <p><a class="" href="thethingsindustries.com/docs/integrations/">Integrations</a></p>
        <p><a class="" href="thethingsindustries.com/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsNetwork/lorawan-stack">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="has-text-light is-size-7">
  Last changed by Ben Olayinka on 22 Oct 2020.
  <br>
  <a href="https://github.com/TheThingsNetwork/lorawan-stack/commit/6b4daa186a9360e72e50edfe36c09fa7cdf05c68">
      Merge pull request #31 from TheThingsIndustries/util/build-workflow
    </a>
</p>

<a href="https://github.com/TheThingsNetwork/lorawan-stack/blob/default/doc/content/integrations/mqtt-clients/eclipse-mosquitto/_index.md" class="button is-primary is-small is-inverted is-outlined">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="/thethingsindustries.com/docs/js/theme.min.4feb1389331adbef9047157f884dbdbd63af1c61ac83f327e60eef42f999cb26.js" integrity="sha256-T&#43;sTiTMa2&#43;&#43;QRxV/iE29vWOvHGGsg/Mn5g7vQvmZyyY="></script><script>
  window.intercomSettings = {
    app_id: "",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
