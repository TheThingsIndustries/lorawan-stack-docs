<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.96.0" />
  <title>Troubleshooting AWS IoT Integration | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/troubleshooting/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.74b07de880ad60ffdf0f356535e15d45e05de3df7f1c738e63521f7d8d731e53.css" integrity="sha256-dLB96ICtYP/fDzVlNeFdReBd499/HHOOY1IffY1zHlM=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Troubleshooting AWS IoT Integration">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Troubleshooting AWS IoT Integration">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/troubleshooting/">
  <meta name="twitter:title" content="Troubleshooting AWS IoT Integration" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.19.1</p>
      </a><div class="navbar-item navbar-search-brand">
        <div class="field has-addons has-addons-centered">
          <div class="control">
            <input id="search-input-brand" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
          </div>
        </div>
      </div>
      
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a><div class="navbar-item navbar-search-menu">
            <div class="field has-addons has-addons-centered">
              <div class="control">
                <input id="search-input-menu" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
              </div>
            </div>
          </div></div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/deployment/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-brand',
      debug: false 
    });
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-menu',
      debug: false 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Integrations</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/integrations/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/adding-applications/" class="">Adding Applications</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/adding-integrations/" class="">Adding Integrations</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/" class="">Cloud Integrations</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/akenza-core/" class="">Akenza Core</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/allthingstalk/" class="">AllThingsTalk Maker</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/anyviz/" class="">AnyViz</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/" class="">AWS IoT</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/architecture/" class="">Architecture</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/deployment-guide/" class="">Deployment Guide</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/things/" class="">Managing Things</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/messages/" class="">Messages</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/metrics/" class="">Metrics</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/update/" class="">Update</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/uninstall/" class="">Uninstall</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/troubleshooting/" class="is-active">Troubleshooting AWS IoT Integration</a>
    
    



    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-hub/" class="">Azure IoT Hub</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/blockbax/" class="">Blockbax</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/cayenne/" class="">Cayenne</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/cloudstudio/" class="">Cloud Studio</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/datacake/" class="">Datacake</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/dezem/" class="">deZem</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/homey/" class="">Homey</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/influxdb-cloud/" class="">InfluxDB Cloud 2.0</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/iotinabox/" class="">IoT in a Box</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/mclimate/" class="">MClimate</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/qubitro/" class="">Qubitro</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/tagoio/" class="">TagoIO</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/telemetry2u/" class="">Telemetry2U</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/tellsens/" class="">Tellsens</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/thethingsio/" class="">thethings.iO</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/thingsboard/" class="">ThingsBoard</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/thingspeak/" class="">ThingSpeak</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/ttnmapper/" class="">TTN Mapper</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/ubidots/" class="">Ubidots</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/uib/" class="">UIB</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/widgelix/" class="">Widgelix</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/withthegrid/" class="">Withthegrid</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/mqtt/" class="">MQTT Server</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/pubsub/" class="">Pub/Sub</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/lora-cloud/" class="">LoRa Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/node-red/" class="">Node-RED</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/ifttt/" class="">IFTTT</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/payload-formatters/" class="">Payload Formatters</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/storage/" class="">Storage Integration</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/webhooks/" class="">Webhooks</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Troubleshooting AWS IoT Integration
          
        </h1>
        
        <div class="content">
          <p>The AWS IoT Integration for The Things Stack puts logs to AWS CloudWatch where you can find detailed traces and errors.</p>
<h2 id="cloudwatch-logs">CloudWatch logs</h2>
<p>In the AWS Console, open <strong>Services</strong> and go to <strong>CloudWatch</strong>.</p>
<p>In the menu on the left, under <strong>Logs</strong>, go to <strong>Log Groups</strong>.</p>
<figure><img src="../troubleshooting-log-groups.png"
         alt="Log Groups"/>
</figure>

<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  <strong>Not seeing all log groups?</strong> The log groups are created automatically when a Lambda function runs. If the function did not run yet, the log group is not there.
</div>

<p>First place to look for issues with thing creation or claiming is the <code>/thethings/lorawan/&lt;stack-name&gt;/things</code> log group. Each thing has its own log stream in this log group. For example, if you <a href="/docs/integrations/cloud-integrations/aws-iot/things/">created or claimed a thing</a> but it doesn&rsquo;t show up in The Things Stack, you can find the cause in the thing&rsquo;s log stream.</p>
<p>For further details, you can look at the log entries of the Lambda functions:</p>
<ul>
<li><code>/aws/lambda/&lt;stack-name&gt;-ConfigureFunction...</code>: configuration</li>
<li><code>/aws/lambda/&lt;stack-name&gt;-CreateThingTypeFunction...</code>: create the thing type</li>
<li><code>/aws/lambda/&lt;stack-name&gt;-ClaimThingFunction...</code>: thing claiming</li>
<li><code>/aws/lambda/&lt;stack-name&gt;-CreateThingFunction...</code>: thing creation</li>
<li><code>/aws/lambda/&lt;stack-name&gt;-HandleDownlinkFunction...</code>: downlink handling</li>
<li><code>/aws/lambda/&lt;stack-name&gt;-HandleUplinkFunction...</code>: uplink handling</li>
</ul>
<h2 id="resolving-issues">Resolving issues</h2>
<h3 id="resolve-deveui--is-registered-for-mismatching-stack">Resolve &ldquo;DevEUI <code>...</code> is registered for mismatching stack&rdquo;</h3>
<p>This error occurs when the AWS IoT Integration wants to process an event for an IoT Core thing, but that thing is not managed by the AWS IoT Integration.</p>
<p>AWS IoT Core things used by the AWS IoT Integration are unique in the AWS account. They must have an attribute <code>stackName</code> that equals the <strong>Stack name</strong> of the integration.</p>
<p>There are three possible causes, with a each a solution:</p>
<ol>
<li>There was a previous AWS IoT Integration in the same AWS account that created the things in IoT Core, and that integration used a different <strong>Stack name</strong>
<ul>
<li><strong>Solution 1:</strong> Delete the IoT Core things. They will be recreated automatically</li>
<li><strong>Solution 2:</strong> Update the <code>stackName</code> attribute of the concerning IoT Core things to match the <strong>Stack name</strong> of the new integration. See <a href="./deploy-ment-guide">Deployment guide</a></li>
</ul>
</li>
<li>There is another AWS IoT Integration deployed in the same AWS account, possibly connected to the same The Things Stack application
<ul>
<li><strong>Solution:</strong> No two AWS IoT Integrations can manage the same IoT Core things. The IoT Core thing name is the DevEUI, and that must be globally unique. If you must, deploy the second AWS IoT Integration in different AWS account</li>
</ul>
</li>
<li>The IoT core thing has been created via another way, e.g. manual create or another application
<ul>
<li><strong>Solution 1:</strong> Update the <code>stackName</code> attribute of the concerning IoT Core things to match the <strong>Stack name</strong> of the new integration. See <a href="./deploy-ment-guide">Deployment guide</a></li>
<li><strong>Solution 2:</strong> Use a different AWS account</li>
<li><strong>Solution 3:</strong> If you do not longer need the (manually) created IoT Core thing, delete it</li>
</ul>
</li>
</ol>
        </div>
        <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/integrations/cloud-integrations/aws-iot/uninstall/">← Uninstall</a>
<a class="button is-pulled-right" href="/docs/integrations/cloud-integrations/azure-iot-hub/">Azure IoT Hub →</a>
</div>

        <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#cloudwatch-logs'>CloudWatch logs</a></li>
    
      
      <li><a href='#resolving-issues'>Resolving issues</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/ttn-network/v3/90">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Johan Stokking on 23 Feb 2022.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/8dcaa1916de4d00ce23fbf8e2f8f58a79092f299">
      Update AWS IoT Core to new console (#784)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/integrations/cloud-integrations/aws-iot/troubleshooting.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.a32708c8796e7e8713fa926212adddbbf5c15cdd97676d898ecfc17bc6d9ed4f.js" integrity="sha256-oycIyHlufocT&#43;pJiEq3du/XBXN2XZ22Jjs/Be8bZ7U8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
