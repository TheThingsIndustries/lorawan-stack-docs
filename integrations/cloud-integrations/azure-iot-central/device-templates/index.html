<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.96.0" />
  <title>Device Templates | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/device-templates/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.74b07de880ad60ffdf0f356535e15d45e05de3df7f1c738e63521f7d8d731e53.css" integrity="sha256-dLB96ICtYP/fDzVlNeFdReBd499/HHOOY1IffY1zHlM=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Device Templates">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Device Templates">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/device-templates/">
  <meta name="twitter:title" content="Device Templates" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.19.1</p>
      </a><div class="navbar-item navbar-search-brand">
        <div class="field has-addons has-addons-centered">
          <div class="control">
            <input id="search-input-brand" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
          </div>
        </div>
      </div>
      
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a><div class="navbar-item navbar-search-menu">
            <div class="field has-addons has-addons-centered">
              <div class="control">
                <input id="search-input-menu" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
              </div>
            </div>
          </div></div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-brand',
      debug: false 
    });
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-menu',
      debug: false 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Integrations</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/integrations/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/adding-applications/" class="">Adding Applications</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/adding-integrations/" class="">Adding Integrations</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/" class="">Cloud Integrations</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/akenza/" class="">akenza</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/allthingstalk/" class="">AllThingsTalk Maker</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/anyviz/" class="">AnyViz</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/aws-iot/" class="">AWS IoT</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/" class="">Azure IoT Central</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/architecture/" class="">Architecture</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/deployment/" class="">Deployment Guide</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/device-twin/" class="">Telemetry and Device Twin</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-central/device-templates/" class="is-active">Device Templates</a>
    
    



    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/azure-iot-hub/" class="">Azure IoT Hub</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/blockbax/" class="">Blockbax</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/cayenne/" class="">Cayenne</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/cloudstudio/" class="">Cloud Studio</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/daizy/" class="">Daizy</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/datacake/" class="">Datacake</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/dezem/" class="">deZem</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/homey/" class="">Homey</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/influxdb-cloud/" class="">InfluxDB Cloud 2.0</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/iotinabox/" class="">IoT in a Box</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/kaa/" class="">Kaa</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/mclimate/" class="">MClimate</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/my-iot-open-tech/" class="">my IoT open Tech</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/qubitro/" class="">Qubitro</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/tagoio/" class="">TagoIO</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/telemetry2u/" class="">Telemetry2U</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/tellsens/" class="">Tellsens</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/thethingsio/" class="">thethings.iO</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/thingsboard/" class="">ThingsBoard</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/thingspeak/" class="">ThingSpeak</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/ttnmapper/" class="">TTN Mapper</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/ubidots/" class="">Ubidots</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/uib/" class="">UIB</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/widgelix/" class="">Widgelix</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/integrations/cloud-integrations/withthegrid/" class="">Withthegrid</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/mqtt/" class="">MQTT Server</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/pubsub/" class="">Pub/Sub</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/lora-cloud/" class="">LoRa Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/node-red/" class="">Node-RED</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/ifttt/" class="">IFTTT</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/payload-formatters/" class="">Payload Formatters</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/storage/" class="">Storage Integration</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/integrations/webhooks/" class="">Webhooks</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Device Templates
          
        </h1>
        
        <div class="content">
          <p>Azure IoT Central allows users to model the telemetry and device properties using the <a href="https://docs.microsoft.com/en-us/azure/digital-twins/concepts-models">Digital Twin Definition Language (DTDL)</a> in order to manipulate the data and build powerful views and dashboards of your device fleet. These templates can be automatically be associated with the end devices in your Azure IoT Central Application.</p>
<p>As part of this tutorial we will build a small DTDL model for <a href="https://www.thethingsindustries.com/docs/devices/the-things-uno/">The Things Uno</a> which allows us to control the built in LED of the device.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li>A <a href="https://www.thethingsindustries.com/docs/devices/the-things-uno/">The Things Uno</a> registered in your end device, with the end device version identifiers set, and using the <code>quickstart</code> sketch.</li>
</ol>
<blockquote>
<p>You can check if the end device version identifiers are set by checking the Console end device overview, under the <strong>Hardware</strong> section.</p>
</blockquote>
<figure><img src="../the-things-uno-version-identifiers.png"
         alt="The Things Uno Version Identifiers"/>
</figure>

<h2 id="digital-twin-modeling-identifier">Digital Twin Modeling Identifier</h2>
<p>When the Azure IoT Central integration provisions an end device using the underlying Azure Device Provisioning Service, it will provide a DTDL model ID to the provisioning service in order to allow Azure IoT Central to automatically assign the DTDL model to the end device.</p>
<p>A DTDL model ID is a <a href="https://github.com/Azure/digital-twin-model-identifier"><strong><em>Digital Twin Modeling Identifier</em></strong></a>. The Things Stack generates this model ID using the following rules:</p>
<ol>
<li>The base model ID template is <code>dtmi:ttnlwstack:brand:{brandID}:model:{modelID}:hwversion:{hwVersion}:fwversion:{fwVersion}:band:{bandID};{generation}</code></li>
<li><code>{brandID}</code> is replaced by the normalized form of the end device version identifiers <code>brand_id</code> field.</li>
<li><code>{modelID}</code> is replaced by the normalized form of the end device version identifiers <code>model_id</code> field.</li>
<li><code>{hwVersion}</code> is replaced by the normalized form of the end device version identifiers <code>hardware_version</code> field, prepended by <code>hw</code> (as versions may start with numeric values, but DTMI segments cannot start with a numeric value).</li>
<li><code>{fwVersion}</code> is replaced by the normalized form of the end device version identifiers <code>firmware_version</code> field,
prepended by <code>fw</code> (using the same reasoning as above).</li>
<li><code>{bandID}</code> is replaced by the normalized form of the end device version identifiers <code>{band_id}</code> field.</li>
<li><code>{generation}</code> is currently always replaced by <code>1</code>.</li>
</ol>
<blockquote>
<p>Normalization in this context refers to the process of replacing any non-alphanumeric character with a <code>_</code> character. The normalized form of <code>The Things Industries</code> is <code>The_Things_Industries</code>.</p>
</blockquote>
<p>Following the end device version identifiers associated with the <code>quickstart</code> sketch mentioned above, we obtain the following values:</p>
<ol>
<li><code>{brand_id}</code> is replaced by <code>the_things_products</code>.</li>
<li><code>{model_id}</code> is replaced by <code>the_things_uno</code>.</li>
<li><code>{hwVersion}</code> is replaced by <code>hw1.0</code>.</li>
<li><code>{fwVersion}</code> is replaced by <code>fwquickstart</code>.</li>
<li><code>{bandID}</code> is replaced by <code>EU_863_870</code>.</li>
<li><code>{generation}</code> is replaced by <code>1</code>.</li>
</ol>
<p>Following this, the resulting DTMI is:</p>
<pre tabindex="0"><code>dtmi:ttnlwstack:brand:the_things_products:model:the_things_uno:hwversion:hw1_0:fwversion:fwquickstart:band:EU_863_870;1
</code></pre><h2 id="base-model">Base Model</h2>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  Please consult the official <a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md"><strong><em>Digital Twin Definition Language Version 2</em></strong></a> specification if you have any questions about DTDL semantics.
</div>

<p>The top level object of a DTDL model is an <a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md#interface"><em>Interface</em></a>. We will define the top level <code>Interface</code> for our <em>The Things Uno</em> device, before adding properties and telemetry, as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:brand:the_things_products:model:the_things_uno:hwversion:hw1_0:fwversion:fwquickstart:band:EU_863_870;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Interface&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;contents&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;The Things Uno&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@context&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dtmi:iotcentral:context;2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dtmi:dtdl:context;2&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="modeling-properties">Modeling Properties</h2>
<p>As described in the <a href="/docs/integrations/cloud-integrations/azure-iot-central/device-twin/">Device Twin</a> section, The Things Stack will automatically publish certain properties on behalf of the device. A generic property which is applicable to any device is <code>lastSeenAt</code>. Let us model this property as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:lastSeenAt;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Last Seen At&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;lastSeenAt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="s2">&#34;dateTime&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>We can see that the <code>@type</code> is set to <a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md#property">Property</a>, and that the <code>schema</code> is <code>dateTime</code>, as the field represents a timestamp. The <code>@id</code> is a DTMI, and by convention we have prepended the name of the field by <code>ttnlwstack</code> for the purpose of this example. Similarly, one may define the <code>joinedAt</code> property of the end device as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:joinedAt;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Joined At&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;joinedAt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="s2">&#34;dateTime&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>We can now put together our intermediate model, by providing the two properties to the base model <code>contents</code> field, resulting in the following model:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:brand:the_things_products:model:the_things_uno:hwversion:hw1_0:fwversion:fwquickstart:band:EU_863_870;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Interface&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;contents&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:joinedAt;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Joined At&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;joinedAt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="s2">&#34;dateTime&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:lastSeenAt;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Last Seen At&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;lastSeenAt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="s2">&#34;dateTime&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;The Things Uno&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@context&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dtmi:iotcentral:context;2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dtmi:dtdl:context;2&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="model-registration">Model Registration</h2>
<p>Go to your Azure IoT Central Application, navigate to <strong>Device templates</strong> on the left hand menu and click on <strong>+ New</strong>.</p>
<figure><img src="../create-device-template.png"
         alt="Create Device Template"/>
</figure>

<p>You can now select the <strong><em>IoT Device</em></strong> custom device template, then click on <strong>Next: Customize</strong>.</p>
<figure><img src="../custom-device-template.png"
         alt="Custom Device Template"/>
</figure>

<p>You can now enter the template name and then click on <strong>Next: Review</strong> at the bottom of the page. You will be presented with the device review screen. Check the details one last time and click on <strong>Create</strong>.</p>
<figure><img src="../device-template-overview.png"
         alt="Device Template Overview"/>
</figure>

<p>We can now input our DTDL model into the device template that we have just created. Select <strong><em>Custom model</em></strong> in the <em>Create a model</em> screen.</p>
<figure><img src="../custom-device-model.png"
         alt="Custom Device Model"/>
</figure>

<p>Click on the <strong>Edit DTDL</strong> button.</p>
<figure><img src="../edit-dtdl-button.png"
         alt="Edit DTDL Button"/>
</figure>

<p>You can now input the DTDL model that we have defined in the previous step, then click on <strong>Save</strong>.</p>
<figure><img src="../add-dtdl-model.png"
         alt="Add DTDL Model"/>
</figure>

<p>Click on the <strong>X</strong> in the corner of the model editing dialogue. You will now see the two properties in the model overview.</p>
<figure><img src="../initial-dtdl-overview.png"
         alt="Initial DTDL Overview"/>
</figure>

<p>Click <strong>Publish</strong> on the top level menu, then click <strong>Publish</strong> again in the publish device template dialogue.</p>
<p>The model is now published and can be automatically assigned on device provisioning. We can now plug in our <em>The Things Uno</em> and allow it to send its first uplink. This will cause the integration to provision the end device using our newly registered template.</p>
<p>We can navigate to <strong>Device groups</strong> on the left hand side menu. A group for all of the <em>The Things Uno</em> devices will appear.</p>
<figure><img src="../device-group.png"
         alt="Device Group"/>
</figure>

<p>We can now open the group and see the newly provisioned end device in the device list.</p>
<figure><img src="../device-group-list.png"
         alt="Device Group List"/>
</figure>

<p>Click on the end device. The raw data screen will now contain the modeled properties.</p>
<figure><img src="../modeled-initial-properties.png"
         alt="Modeled Initial Properties"/>
</figure>

<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  Note that the <code>joinedAt</code> property is not set in any of the recent messages as the join accept message has triggered the device provisioning process. Messages that occur while the end device is provisioning are not sent to IoT Central, as we cannot act on behalf of the end device yet. One can simply reset <em>The Things Uno</em> in order to force the end device to join again, thus populating the property.
</div>

<p>As the data is now modeled, we may build a short view in order to visualize the properties themselves. Click on <strong>Device templates â†’ The Things Uno</strong>.</p>
<figure><img src="../device-templates-ttuno.png"
         alt="Device Templates The Things Uno"/>
</figure>

<p>You may now click on <strong>View</strong>, under the <strong><em>Model</em></strong> menu.</p>
<figure><img src="../device-template-ttuno-views.png"
         alt="The Things Uno Views"/>
</figure>

<p>You may now select the <strong>Visualizing the device</strong> view type.</p>
<figure><img src="../device-template-ttuno-visualize.png"
         alt="Visualizing The Device"/>
</figure>

<p>Under the <strong>View name</strong> enter the name of your view, such as <em>Status</em>.</p>
<figure><img src="../device-template-ttuno-view-name.png"
         alt="View name"/>
</figure>

<p>You can now drag-and-drop a <strong>Property</strong> tile from the left hand side menu. The property will appear in the right hand side canvas.</p>
<figure><img src="../device-template-ttuno-empty-property.png"
         alt="Empty Property"/>
</figure>

<p>Click on the crayon button (<strong>Edit</strong>) in the newly addded tile. The configuration dialogue will open. Click on <strong>+Capability</strong> and then select the two properties we have modeled so far, then click on <strong>Update</strong> in order to save the updated tile.</p>
<figure><img src="../device-template-ttuno-tile-edit.png"
         alt="Edit Tile"/>
</figure>

<p>Click on <strong>Save</strong> in order to save the view. You can now click on <strong>Configure preview device</strong>, then select <strong>Select from a running device</strong>. Select your end device and click <strong>Apply</strong>.</p>
<figure><img src="../device-template-ttuno-preview-device.png"
         alt="Preview Device"/>
</figure>

<p>You can now see the view with values populated from your preview device.</p>
<figure><img src="../device-template-ttuno-post-preview.png"
         alt="Post Preview"/>
</figure>

<p>You may now click on <strong>Back</strong>. This will bring you back to the main device template overview page. Click on <strong>Publish</strong>, then click on <strong>Publish</strong> again in order to publish the updated model.</p>
<p>You may now open the end device view once again, and the <em>Status</em> view you have added will now be visible.</p>
<figure><img src="../device-status-view.png"
         alt="Device Status View"/>
</figure>

<h2 id="modeling-non-primitive-schemas">Modeling Non-primitive Schemas</h2>
<p>As part of our previous example, we have modeled two <em>primitive</em> properties. Specifically, the data types (<code>schema</code>) were primitive types - timestamps. Yet the <code>decodedPayload</code> property is an object. As such, we need to model the data type of the <code>decodedPayload</code> object using a separate schema.</p>
<p>The <code>decodedPayload</code> property, which is tied to the output of the uplink payload decoder in The Things Stack has a singular field called <code>ledState</code>, which may take two possible values: <code>on</code> and <code>off</code>.</p>
<p>We start with the following property definition:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Decoded Payload&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;decodedPayload&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Object&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;fields&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;writable&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;writable&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>You can observe that the <code>schema</code> of the property is now an object in itself, with the type marked as <a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md#object">Object</a>. Another important thing is that we have marked both the property, and the object inside of it, as <code>writeable</code>. This field allows us to consider the <code>decodedPayload</code> as a <em>reported</em> and <em>desired</em> property.</p>
<p><em>Desired</em> properties represent the state in which we would like the end device to be in, while <em>reported</em> properties capture the state in which the device is right now. By having the <code>decodedPayload</code> and its contents as a <em>desired</em> property, we can schedule changes to the end device state.</p>
<p>The <code>quickstart</code> firmware makes <em>The Things Uno</em> report its current (LED) state as part of the uplink decoded payload, while the downlink payload formatter allows us to change the (LED) state. Another useful property to be observed here is that the payloads are symmetric - we use the same object format to both report the current state (<em>reported</em> properties), and to change the state itself (<em>desired</em> properties).</p>
<p>Moving on, let us look at the (partial) definition of the <code>ledState</code> field:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;LED&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ledState&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState:schema;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Enum&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;enumValues&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;valueSchema&#34;</span><span class="p">:</span> <span class="s2">&#34;string&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>As we can see, the <code>ledState</code> can be modeled as an <code>Enum</code>. We now have to provide the two possible options, <code>on</code> and <code>off</code> as <code>enumValues</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState:schema:off;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Off&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;enumValue&#34;</span><span class="p">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;off&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState:schema:on;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;On&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;enumValue&#34;</span><span class="p">:</span> <span class="s2">&#34;on&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;on&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></div><p>We can now put everything together and thus obtain the following updated model:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:brand:the_things_products:model:the_things_uno:hwversion:hw1_0:fwversion:fwquickstart:band:EU_863_870;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Interface&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;contents&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Decoded Payload&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;decodedPayload&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Object&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;fields&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;LED&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ledState&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState:schema;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Enum&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;enumValues&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState:schema:off;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Off&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">},</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;enumValue&#34;</span><span class="p">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;off&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:decodedPayload:schema:ledState:schema:on;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;On&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">},</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;enumValue&#34;</span><span class="p">:</span> <span class="s2">&#34;on&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;on&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;valueSchema&#34;</span><span class="p">:</span> <span class="s2">&#34;string&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;writable&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;writable&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:joinedAt;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Joined At&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;joinedAt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="s2">&#34;dateTime&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@id&#34;</span><span class="p">:</span> <span class="s2">&#34;dtmi:ttnlwstack:lastSeenAt;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@type&#34;</span><span class="p">:</span> <span class="s2">&#34;Property&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;Last Seen At&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;lastSeenAt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;schema&#34;</span><span class="p">:</span> <span class="s2">&#34;dateTime&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;displayName&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;en&#34;</span><span class="p">:</span> <span class="s2">&#34;The Things Uno&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;@context&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dtmi:iotcentral:context;2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dtmi:dtdl:context;2&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>We can now update the DTDL model with our new model. Navigate to <strong>Device templates â†’ The Things Uno</strong> then click on the <strong>Edit DTDL</strong>. Input the updated model and click on <strong>Save</strong>. You will now see the <code>decodedPayload</code> field.</p>
<figure><img src="../device-template-ttuno-updated.png"
         alt="Updated Properties"/>
</figure>

<p>We would like to visualize this property as part of our earlier view. Click on the <code>Status</code> view on the left hand side menu, then click on the pencil button on the tile. Click on the <strong>+ Capability</strong> button and select the <code>LED</code> property.</p>
<figure><img src="../device-template-ttuno-add-new-property.png"
         alt="Add Property"/>
</figure>

<p>You may now click on <strong>Update</strong> in order to update the tile. The property will now be visible.</p>
<figure><img src="../device-template-ttuno-updated-property-visible.png"
         alt="Updated Property Visible"/>
</figure>

<p>Click on <strong>Save</strong>, then click on <strong>Back</strong>. Let us now add a form which would allow us to edit the LED state. Click on <strong>Views</strong> on the left hand side menu, then click on <strong>Editing device and cloud data</strong>.</p>
<figure><img src="../device-template-ttuno-raw-form.png"
         alt="Raw Form"/>
</figure>

<p>You may now give a name, such as <em>Edit</em>, to your form under the <strong>Form name</strong>. Drag-and-drop the <em>Decoded Payload</em> property on the canvas found on the right hand side. Click on <strong>Save</strong> in order to save your form.</p>
<figure><img src="../device-template-ttuno-updated-form.png"
         alt="Updated Form"/>
</figure>

<p>Click on <strong>Back</strong> in the top side menu. You may now publish the updated model by click on <strong>Publish</strong> on the top level menu, then clicking on the <strong>Publish</strong> button in the newly open dialogue. You can now see the updated view, and form, in your device view.</p>
<figure><img src="../device-template-ttuno-updated-status.png"
         alt="Updated Status View"/>
</figure>

<figure><img src="../device-template-ttuno-view-form.png"
         alt="Edit Form"/>
</figure>

<p>We can now change the <em>desired</em> state of the end device by updating the LED status from <code>off</code> to <code>on</code>. We can select the <code>On</code> option from the LED dropdown, then click on <strong>Save</strong>. This will generate a downlink in The Things Stack.</p>
<figure><img src="../device-template-ttuno-tts-downlink.png"
         alt="Generated Downlink"/>
</figure>

<p>On the next uplink, which will still report that the LED state is <code>off</code>, the downlink will be transmitted to the end device. On the subsequent uplink, the end device will report the LED state as <code>on</code>, and the form will report the property as <em>accepted</em>.</p>
<figure><img src="../device-template-ttuno-state-updated.png"
         alt="State Accepted"/>
</figure>
        </div>
        <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/integrations/cloud-integrations/azure-iot-central/device-twin/">â† Telemetry and Device Twin</a>
<a class="button is-pulled-right" href="/docs/integrations/cloud-integrations/azure-iot-hub/">Azure IoT Hub â†’</a>
</div>

        <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#prerequisites'>Prerequisites</a></li>
    
      
      <li><a href='#digital-twin-modeling-identifier'>Digital Twin Modeling Identifier</a></li>
    
      
      <li><a href='#base-model'>Base Model</a></li>
    
      
      <li><a href='#modeling-properties'>Modeling Properties</a></li>
    
      
      <li><a href='#model-registration'>Model Registration</a></li>
    
      
      <li><a href='#modeling-non-primitive-schemas'>Modeling Non-primitive Schemas</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/ttn-network/v3/90">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Adrian-Stefan Mares on 11 May 2022.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/9d03917734b052669afe65d44c16b234709bbd33">
      Improve Azure IoT documentation (#866)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/integrations/cloud-integrations/azure-iot-central/device-templates.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.a32708c8796e7e8713fa926212adddbbf5c15cdd97676d898ecfc17bc6d9ed4f.js" integrity="sha256-oycIyHlufocT&#43;pJiEq3du/XBXN2XZ22Jjs/Be8bZ7U8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
