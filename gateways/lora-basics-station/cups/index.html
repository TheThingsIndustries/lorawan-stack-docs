<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Configuration and Update Server (CUPS) | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://thethingsstack.io/gateways/lora-basics-station/cups/" />
  <link rel="alternate icon" href="/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="https://thethingsstack.io/css/theme.min.66449bb2268d8e98cc8bb71b21b0d8ce772c3f2331b05fc270c33e2edb776017.css" integrity="sha256-ZkSbsiaNjpjMi7cbIbDYzncsPyMxsF/CcMM&#43;Ltt3YBc="><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Configuration and Update Server (CUPS)">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Configuration and Update Server (CUPS)">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://thethingsstack.io/gateways/lora-basics-station/cups/">
  <meta name="twitter:title" content="Configuration and Update Server (CUPS)" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img class="logo" src="/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.10</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/devices/">Devices</a>
        <a class="navbar-item" href="/gateways/">Gateways</a>
        <a class="navbar-item" href="/integrations/">Integrations</a>
        <a class="navbar-item" href="/reference/">Reference</a>
      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="/download/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav>
<section class="search-container">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <div class="field has-addons has-addons-centered">
            <div class="control">
              <input class="input search-bar" id="search-input" type="text" placeholder="Search" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: "4372282a02970d8402d43457bf95d486",
indexName: "thethingsstack",
inputSelector: '#search-input',
debug: false 
});
</script>

<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">LoRa Basics™ Station</h2>

<ul class="menu-list">
<a href="https://thethingsstack.io/gateways/lora-basics-station/" class="">Overview</a>
<li>
  <a href="https://thethingsstack.io/gateways/lora-basics-station/cups/" class="is-active">Configuration and Update Server (CUPS)</a>
</li>
<li>
  <a href="https://thethingsstack.io/gateways/lora-basics-station/lns/" class="">LoRaWAN Network Server (LNS)</a>
</li>
<li>
  <a href="https://thethingsstack.io/gateways/lora-basics-station/troubleshooting/" class="">Troubleshooting LoRa Basics™ Station</a>
</li>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Configuration and Update Server (CUPS)</h1>

<div class="content">

<p>LoRa Basics™ Station can regularly connect to a Configuration and Update Server (CUPS) server to check for configuration and software updates. This page contains information about connecting your gateway to The Things Stack to support remote management via the CUPS Protocol.</p>
<blockquote>
<p>CUPS is <strong>not required</strong> for sending and receiving LoRaWAN data, but it can greatly simplify the management of gateways.</p>
</blockquote>
<h2 id="requirements">Requirements</h2>
<ol>
<li>User account on The Things Stack with rights to create gateways.</li>
<li>A gateway which supports LoRa Basics™ Station.</li>
</ol>
<h2 id="create-a-gateway">Create a Gateway</h2>
<p>To connect a gateway using the CUPS protocol, you must first add the gateway in The Things Stack. This can be done either in the console, or via the command line. See instructions for <a href="https://thethingsstack.io/gateways/adding-gateways/">Adding Gateways</a>.</p>
<h2 id="create-an-api-key">Create an API Key</h2>
<p>CUPS requires an API key for your gateway with the following rights:</p>
<ul>
<li>View gateway information</li>
<li>Edit basic gateway settings</li>
</ul>
<p>To create an API key for your gateway, follow instructions for Creating a Gateway API key in <a href="https://thethingsstack.io/gateways/adding-gateways/">Adding Gateways</a>.</p>
<h2 id="configure-gateway">Configure Gateway</h2>
<p>Gateway configuration menus differ depending on the manufacturer, but all LoRa Basics™ Station gateways support the following configuration options. Consult your gateway documentation for more information about configuring your specific gateway.</p>
<h3 id="cups-server-address">CUPS Server Address</h3>
<p>The server address is the network endpoint of The Things Stack CUPS. It is a combination of the <strong>protocol</strong> (https), the <strong>server address</strong>, and the <strong>port</strong>:</p>
<p>Enter the following in your gateway as CUPS Server Address: <code>https://&lt;server-address&gt;:443</code></p>
<blockquote>
<p>The <code>&lt;server-address&gt;</code> is the address of The Things Stack. If you followed the <a href="https://thethingsstack.io/getting-started/">Getting Started guide</a> this is the same as what you use instead of <code>thethings.example.com</code>, e.g <code>https://thethings.example.com:443</code></p>
</blockquote>
<h3 id="cups-server-certificate--cups-trust">CUPS Server Certificate / CUPS Trust</h3>
<p>This is the <a href="https://en.wikipedia.org/wiki/Certificate_authority">CA certificate</a> which secures your domain. A <code>.pem</code> file containing common certificates is available in the <a href="https://thethingsstack.io/reference/root-certificates/">Root Certificates Reference</a>.</p>
<p>Upload the <code>.pem</code> file in your gateway as the CUPS Server Certificate / CUPS Trust.</p>
<h3 id="cups-key-file">CUPS Key File</h3>
<p>This is a file which The Things Stack uses to verify the identity of your gateway.</p>
<p>Use the following command to create a file called <code>cups.key</code> with the <code>&lt;gateway-api-key&gt;</code> you created above.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s2">&#34;Authorization: Bearer &lt;gateway-api-key&gt;&#34;</span> <span class="p">|</span> perl -p -e <span class="s1">&#39;s/\r\n|\n|\r/\r\n/g&#39;</span>  &gt; cups.key
</code></pre></div><blockquote>
<p>The above command creates a file called <code>cups.key</code>, terminated with a Carriage Return Line Feed (<code>0x0D0A</code>) character. Upload this file in your gateway as the CUPS key.</p>
</blockquote>
</div>

<script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
<div class="is-clearfix">
<a class="button is-pulled-left" href="/gateways/lora-basics-station/">← LoRa Basics™ Station</a>
<a class="button is-pulled-right" href="/gateways/lora-basics-station/lns/">LoRaWAN Network Server (LNS) →</a>
</div>


      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer background-footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/getting-started/">Getting Started</a></p>
        <p><a class="" href="/devices/">Devices</a></p>
        <p><a class="" href="/gateways/">Gateways</a></p>
        <p><a class="" href="/integrations/">Integrations</a></p>
        <p><a class="" href="/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Ben Olayinka on 06 Oct 2020.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/5dec1c46e5cd7ec13db7bb259da4293a9d8c3857">
      doc: Fix cups certificate ref
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/gateways/lora-basics-station/cups.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://thethingsstack.io/js/theme.min.4feb1389331adbef9047157f884dbdbd63af1c61ac83f327e60eef42f999cb26.js" integrity="sha256-T&#43;sTiTMa2&#43;&#43;QRxV/iE29vWOvHGGsg/Mn5g7vQvmZyyY="></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
