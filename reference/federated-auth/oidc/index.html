<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>OpenID Connect | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://thethingsstack.io/reference/federated-auth/oidc/" />
  <link rel="alternate icon" href="/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="https://thethingsstack.io/css/theme.min.3d009bc9efa2f1479c48b05354839b290f5e1e3b86418170e312bdb7e5232d2a.css" integrity="sha256-PQCbye&#43;i8UecSLBTVIObKQ9eHjuGQYFw4xK9t&#43;UjLSo="><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="OpenID Connect">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="OpenID Connect">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://thethingsstack.io/reference/federated-auth/oidc/">
  <meta name="twitter:title" content="OpenID Connect" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img class="logo" src="/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.10</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/devices/">Devices</a>
        <a class="navbar-item" href="/gateways/">Gateways</a>
        <a class="navbar-item" href="/integrations/">Integrations</a>
        <a class="navbar-item" href="/reference/">Reference</a>
      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="/download/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav>
<section class="search-container">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <div class="field has-addons has-addons-centered">
            <div class="control">
              <input class="input search-bar" id="search-input" type="text" placeholder="Search" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: "4372282a02970d8402d43457bf95d486",
indexName: "thethingsstack",
inputSelector: '#search-input',
debug: false 
});
</script>

<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">Federated Authentication</h2>

<ul class="menu-list">
<a href="https://thethingsstack.io/reference/federated-auth/" class="">Overview</a>
<li>
  <a href="https://thethingsstack.io/reference/federated-auth/oidc/" class="is-active">OpenID Connect</a>
</li>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">OpenID Connect


</h1>

<div class="content">

  
  
  


  


<div class="notification is-primary">
  <h3 class="has-text-light">Enterprise Only</h3>
  <p>The following instructions apply to Enterprise distributions. See the <a href="/download">downloads page</a> for a feature breakdown of distributions of The Things Stack.</p>
</div>



<h2 id="what-is-openid-connect-">What is OpenID Connect ?</h2>
<p><a href="https://openid.net/connect/">OpenID Connect</a> 1.0 is a simple identity layer on top of the OAuth 2.0 protocol. It allows the Identity Server to verify the identity of the End-User based on the authentication performed by an Authorization Server, as well as to obtain basic profile information about the End-User in an interoperable and REST-like manner.</p>
<h2 id="what-are-the-requirements-for-openid-connect-">What are the requirements for OpenID Connect ?</h2>
<p>A new OAuth 2.0 client must be created in the provider and the client ID and client secret must be noted down. While creating the OAuth2 client, you will be asked to provide a redirect URL, which should have the following format:</p>
<pre><code>https://thethings.example.com/oauth/login/my-oidc-provider/callback
</code></pre><p>Where <code>my-oidc-provider</code> is the ID that you have chosen for this OpenID Connect provider.</p>
<h2 id="how-can-i-register-an-openid-connect-provider-">How can I register an OpenID Connect provider ?</h2>
<p>After you have created the OAuth2 client you may register the provider using the <code>is-db</code> stack command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-stack is-db create-auth-provider
    --id my-oidc-provider
    --name <span class="s2">&#34;My OIDC Provider&#34;</span>
    --allow-registrations <span class="nb">true</span>
    --oidc
    --oidc.client-id client123
    --oidc.client-secret secret123
    --oidc.provider-url https://oidc.example.com
</code></pre></div><h2 id="how-are-usernames-generated-for-external-users-">How are usernames generated for external users ?</h2>
<p>External users are being automatically registered when they login using the OpenID Connect provider. Their username is automatically generated based on the information provided by the provider. The following username variants are used:</p>
<ul>
<li>The preferred username (<code>preferred_username</code> in the OIDC claim token).</li>
<li>The email address local-part. This means that a user whose email is <code>j.doe@example.com</code> will receive the username <code>j-doe</code>.</li>
<li>The concatenation of the given and family name. This means that a user called <code>John Doe</code> will receive the username <code>john-doe</code>.</li>
<li>The email address local-part concatenated with the provider ID. Following the above example with the address <code>j.doe@example.com</code>, the resulting username is <code>j-doe-my-oidc-provider</code>.</li>
<li>The concatenation of the given name, family name and the provider ID. Following the example with the user <code>John Doe</code>, the resulting username is <code>john-doe-my-oidc-provider</code>.</li>
</ul>
<p>Excepting the preferred username, the stack will attempt to concatenate up to 5 random characters at the end of the username in order to obtain a unique username.</p>
<p>You may have also observed that the <code>.</code> used in the email addresses was converted into a <code>-</code>. This is intended, and is part of the normalization process of the stack, which ensures that generated usernames are valid. The procedure is as follows:</p>
<ul>
<li>Turn every character into its lowercase variant. This means <code>John.Doe</code> becomes <code>john.doe</code>.</li>
<li>Replace all of the non-alphanumeric characters with <code>-</code>. This means that <code>john.doe</code> becomes <code>john-doe</code>.</li>
<li>Remove all of the duplicate <code>-</code>. This means that <code>john---doe</code> becomes <code>john-doe</code>.</li>
<li>Remove any leading or trailing <code>-</code>. This means that <code>-john-</code> becomes <code>john</code>.</li>
</ul>

</div>

<script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
<div class="is-clearfix">
<a class="button is-pulled-left" href="/reference/federated-auth/">‚Üê Federated Authentication</a>
</div>


      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer background-footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/getting-started/">Getting Started</a></p>
        <p><a class="" href="/devices/">Devices</a></p>
        <p><a class="" href="/gateways/">Gateways</a></p>
        <p><a class="" href="/integrations/">Integrations</a></p>
        <p><a class="" href="/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra on 21 Oct 2020.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/3b3b07d795e1ca2f908bdc3196e968a5485c000c">
      doc: Improving docs readability
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/reference/federated-auth/oidc.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://thethingsstack.io/js/theme.min.4feb1389331adbef9047157f884dbdbd63af1c61ac83f327e60eef42f999cb26.js" integrity="sha256-T&#43;sTiTMa2&#43;&#43;QRxV/iE29vWOvHGGsg/Mn5g7vQvmZyyY="></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
