<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.96.0" />
  <title>General Options | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/reference/configuration/the-things-stack/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.c994a55269632c4bc7be3364abf857e85ff170cc251dd025099769c910cbbcb4.css" integrity="sha256-yZSlUmljLEvHvjNkq/hX6F/xcMwlHdAlCZdpyRDLvLQ=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="General Options">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="General Options">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/reference/configuration/the-things-stack/">
  <meta name="twitter:title" content="General Options" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.22.1</p>
      </a><div class="navbar-item navbar-search-brand">
        <div class="field has-addons has-addons-centered">
          <div class="control">
            <input id="search-input-brand" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
          </div>
        </div>
      </div>
      
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a><div class="navbar-item navbar-search-menu">
            <div class="field has-addons has-addons-centered">
              <div class="control">
                <input id="search-input-menu" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
              </div>
            </div>
          </div></div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-brand',
      debug: false 
    });
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-menu',
      debug: false 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Reference</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/reference/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/adr/" class="">Adaptive Data Rate</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/api/" class="">API</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/application-packages/" class="">Application Packages</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/stripe/" class="">Billing with Stripe</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/" class="">Command-Line Interface</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/components/" class="">Components</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/" class="">Configuration</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/the-things-stack/" class="is-active">General Options</a>
    
    



    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/tenant-billing-server/" class="">Tenant Billing Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/application-server/" class="">Application Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/cli/" class="">Command-Line Interface Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/console/" class="">Console Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/device-claiming-server/" class="">Device Claiming Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/gateway-configuration-server/" class="">Gateway Configuration Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/gateway-server/" class="">Gateway Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/identity-server/" class="">Identity Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/join-server/" class="">Join Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/network-operations-center/" class="">Network Operations Center Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/network-server/" class="">Network Server Options</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/packet-broker-agent/" class="">Packet Broker Agent Options</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/data-formats/" class="">Data Formats</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/data-retention/" class="">Data Retention and Privacy</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/email-templates/" class="">Email Templates</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/federated-auth/" class="">Federated Authentication</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/frequency-plans/" class="">Frequency Plans</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/fuota/" class="">FUOTA</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/gateway-rtt/" class="">Gateway RTT</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/glossary/" class="">Glossary</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/" class="">ID and EUI Constraints</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/last-activity/" class="">Last Activity</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/lbs-implementation-guide/implementation-details/" class="">LoRa Basics Station Implementation Guide</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/interop-repository/" class="">LoRaWAN Backend Interfaces Interoperability</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/spec-regional-parameters/" class="">LoRaWAN Specification and Regional Parameters</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/networking/" class="">Networking</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/pb-routing/" class="">Packet Broker Routing</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/packet-forwarder/" class="">Packet Forwarders</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/purge/" class="">Purging Entities</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/rate-limiting/" class="">Rate Limiting</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/resource-limiting/" class="">Resource Limiting</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/root-certificates/" class="">Root Certificates</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/telemetry/" class="">Telemetry</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/tenant-management/" class="">Tenant Management</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/branding/" class="">Web UI Branding</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">General Options
          
        </h1>
        
        <div class="content">
          <h2 id="global-options">Global Options</h2>
<p>Under normal circumstances, only <code>info</code>, <code>warn</code> and <code>error</code> logs are printed to the console. For development, you may also want to see <code>debug</code> logs.</p>
<ul>
<li><code>log.level</code>: The minimum level log messages must have to be shown (default &ldquo;info&rdquo;)</li>
</ul>
<p>The format of logs is also configurable. The Things Stack supports <code>console</code> format (that prints logs as a human-friendly text) and <code>json</code> format (that prints logs as JSON).</p>
<ul>
<li><code>log.format</code>: Log format to write</li>
</ul>
<h2 id="license">License</h2>
<p>






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


 The Things Stack requires a license key for production use. For development purposes, it will work for a limited time on <code>localhost</code> without a license key.</p>
<ul>
<li><code>license.key</code>: Contents of the license key. Must be a base64-encoded string.</li>
<li><code>license.file</code>: Location of the license file. Must be a binary file containing the raw license bytes.</li>
</ul>
<p>Given the license key in base64 format, you can create the license file like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="s2">&#34;AzYFASd/Gcggs...&#34;</span> <span class="p">|</span> base64 --decode &gt; ttn-lw-stack-license.bin
</span></span></code></pre></div><h2 id="key-vault">Key Vault</h2>
<p>






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


 The key vault is used to store secrets, such as TLS certificates and the keys for encrypting LoRaWAN root keys in the database. These secrets can also be cached. The Things Stack supports keys stored in AWS Secrets Manager, or static configuration for development purposes.</p>
<ul>
<li><code>key-vault.provider</code>: Provider (static or aws)</li>
<li><code>key-vault.static</code>: Static key encryption keys; values use hex encoding</li>
<li><code>key-vault.cache.size</code>: Cache size (caching is disabled if size is 0)</li>
<li><code>key-vault.cache.ttl</code>: TTL for cached elements (no expiration mechanism is used if TTL is 0)</li>
<li><code>key-vault.aws.region</code>: AWS region</li>
<li><code>key-vault.aws.secret-id-prefix</code>: Secret ID prefix</li>
</ul>
<h2 id="tls-options">TLS Options</h2>
<p>The Things Stack serves several endpoints using TLS. TLS certificates can come from different sources.</p>
<ul>
<li><code>tls.source</code>: Source of the TLS certificate (<code>file</code>, <code>acme</code>, <code>key-vault</code>)</li>
</ul>
<p>If <code>file</code> is specified as <code>tls.source</code>, the location of the certificate and key need to be configured.</p>
<ul>
<li><code>tls.certificate</code>: Location of TLS certificate</li>
<li><code>tls.key</code>: Location of TLS private key</li>
</ul>
<p>If <code>acme</code> is specified as <code>tls.source</code>, certificates will be requested from Let&rsquo;s Encrypt (the default <code>tls.acme.endpoint</code>) and stored in the given <code>tls.acme.dir</code>.</p>
<ul>
<li><code>tls.acme.endpoint</code>: ACME endpoint</li>
<li><code>tls.acme.dir</code>: Location of ACME storage directory</li>
<li><code>tls.acme.email</code>: Email address to register with the ACME account</li>
<li><code>tls.acme.hosts</code>: Hosts to enable automatic certificates for</li>
<li><code>tls.acme.default-host</code>: Default host to assume for clients without SNI</li>
</ul>
<p>If <code>key-vault</code> is specified as <code>tls.source</code>, the certificate with the given ID is loaded from the key vault.</p>
<ul>
<li><code>tls.key-vault.id</code>: ID of the certificate</li>
</ul>
<p>For client-side TLS, you may configure a Root CA and optionally disable verification of certificate chains.</p>
<ul>
<li><code>tls.root-ca</code>: Location of TLS root CA certificate (optional)</li>
<li><code>tls.insecure-skip-verify</code>: Skip verification of certificate chains (insecure)</li>
</ul>
<h2 id="grpc-options">gRPC Options</h2>
<p>The <code>grpc</code> options configure how The Things Stack listens for gRPC connections. The format is <code>host:port</code>. When listening on TLS ports, it uses the global <a href="#tls-options">TLS configuration</a>.</p>
<ul>
<li><code>grpc.listen</code>: Address for the TCP gRPC server to listen on</li>
<li><code>grpc.listen-tls</code>: Address for the TLS gRPC server to listen on</li>
</ul>
<p>When running a cluster in a trusted network, you can allow sending credentials over insecure connections with the <code>allow-insecure-for-credentials</code> option:</p>
<ul>
<li><code>grpc.allow-insecure-for-credentials</code>: Allow transmission of credentials over insecure transport</li>
</ul>
<p>If The Things Stack is deployed behind a reverse proxy that does not use a private network IP address (in <code>127.0.0.0/8</code>, <code>10.0.0.0/8</code>, <code>100.64.0.0/10</code>, <code>172.16.0.0/12</code> or <code>192.168.0.0/16</code>), its IP address range needs to be configured in order for The Things Stack to trust it.</p>
<ul>
<li><code>grpc.trusted-proxies</code>: CIDRs of trusted reverse proxies.</li>
</ul>
<p>You can suppress log messages for successful gRPC method calls (e.g. to reduce the noise caused by the health checks in a production environment).</p>
<ul>
<li><code>grpc.log-ignore-methods</code>: List of gRPC methods for which to suppress logs of successful requests.</li>
</ul>
<p>If you are seeing a lot of logs with <code>grpc_service=/ttn.v3.lorawan.ServiceName</code> and <code>grpc_method=MethodName</code>, use <code>/ttn.v3.lorawan.ServiceName/MethodName</code> for this option.</p>
<h2 id="http-options">HTTP Options</h2>
<p>The <code>http</code> options configure how The Things Stack listens for HTTP connections. The format is <code>host:port</code>. When listening on TLS ports, it uses the global <a href="#tls-options">TLS configuration</a>.</p>
<ul>
<li><code>http.listen</code>: Address for the HTTP server to listen on</li>
<li><code>http.listen-tls</code>: Address for the HTTPS server to listen on</li>
</ul>
<p>The Things Stack uses secure cookies that are encrypted with a <code>block-key</code> and signed with a <code>hash-key</code>. In production deployments you&rsquo;ll want these to stay the same between restarts. The keys are encoded as hex.</p>
<ul>
<li><code>http.cookie.block-key</code>: Key for cookie contents encryption (16, 24 or 32 bytes)</li>
<li><code>http.cookie.hash-key</code>: Key for cookie contents verification (32 or 64 bytes)</li>
</ul>
<p>The Things Stack serves a number of internal endpoints for health, metrics and debugging. These will usually be disabled or password protected in production deployments.</p>
<ul>
<li><code>http.health.enable</code>: Enable health check endpoint on HTTP server</li>
<li><code>http.health.password</code>: Password to protect health endpoint (username is health)</li>
<li><code>http.metrics.enable</code>: Enable metrics endpoint on HTTP server</li>
<li><code>http.metrics.password</code>: Password to protect metrics endpoint (username is metrics)</li>
<li><code>http.pprof.enable</code>: Enable pprof endpoint on HTTP server</li>
<li><code>http.pprof.password</code>: Password to protect pprof endpoint (username is pprof)</li>
</ul>
<p>It is possible to redirect users to the canonical URL of a deployment. There are options to redirect to a given host, or redirect from HTTP to HTTPS.</p>
<ul>
<li><code>http.redirect-to-host</code>: Redirect all requests to one host</li>
<li><code>http.redirect-to-tls</code>: Redirect HTTP requests to HTTPS</li>
</ul>
<p>The HTTP server serves static files for the web UI. If these files are not in the standard location, you may need to change the search path.</p>
<ul>
<li><code>http.static.mount</code>: Path on the server where static assets will be served</li>
<li><code>http.static.search-path</code>: List of paths for finding the directory to serve static assets from</li>
</ul>
<p>If The Things Stack is deployed behind a reverse proxy that does not use a private network IP address (in <code>127.0.0.0/8</code>, <code>10.0.0.0/8</code>, <code>100.64.0.0/10</code>, <code>172.16.0.0/12</code> or <code>192.168.0.0/16</code>), its IP address range needs to be configured in order for The Things Stack to trust it.</p>
<ul>
<li><code>http.trusted-proxies</code>: CIDRs of trusted reverse proxies</li>
</ul>
<p>You can suppress log messages for successful HTTP requests (e.g. to reduce the noise caused by the health checks in a production environment).</p>
<ul>
<li><code>http.log-ignore-paths</code>: List of URLs for which to suppress logs of successful requests.</li>
</ul>
<h2 id="interoperability-options">Interoperability Options</h2>
<p>The Things Stack supports interoperability according to LoRaWAN Backend Interfaces specification. The following options are used to configure the server for this.</p>
<ul>
<li>
<p><code>interop.listen</code>: Address for the interop server to listen on for non-TLS connections</p>
</li>
<li>
<p><code>interop.listen-tls</code>: Address for the interop server to listen on for TLS connections</p>
</li>
<li>
<p><code>interop.sender-client-ca.source</code>: Source of the interop server sender client CAs configuration (static, directory, url, blob)</p>
</li>
</ul>
<p>The <code>url</code> source loads interop server sender client CAs configuration from the given URL.</p>
<ul>
<li><code>interop.sender-client-ca.url</code></li>
</ul>
<p>The <code>directory</code> source loads from the given directory.</p>
<ul>
<li><code>interop.sender-client-ca.directory</code></li>
</ul>
<p>The <code>blob</code> source loads from the given path in a bucket. This requires the global <a href="#blob-options">blob configuration</a>.</p>
<ul>
<li><code>interop.sender-client-ca.blob.bucket</code>: Bucket to use</li>
<li><code>interop.sender-client-ca.blob.path</code>: Path to use</li>
</ul>
<p>Packet Broker support is also available through LoRaWAN Backend Interfaces.</p>
<ul>
<li><code>interop.public-tls-address</code>: A public address of the Interop server. The audience in the incoming OAuth 2.0 token from Packet Broker is verified against this address to ensure that other networks cannot impersonate as Packet Broker.</li>
<li><code>interop.packet-broker.enabled</code>: Enable Packet Broker to authenticate</li>
<li><code>interop.packet-broker.token-issuer</code>: The issuer of the incoming OAuth 2.0 token from Packet Broker is verified against this value.</li>
</ul>
<h2 id="redis-options">Redis Options</h2>
<p>Redis is the main data store for the <a href="/docs/reference/configuration/network-server/">Network Server</a>, <a href="/docs/reference/configuration/application-server/">Application Server</a> and <a href="/docs/reference/configuration/join-server/">Join Server</a>. Redis is also used by the <a href="/docs/reference/configuration/identity-server/">Identity Server</a> for caching and can be used by the <a href="#events-options">events system</a> for exchanging events between components.</p>
<p>Redis configuration options:</p>
<ul>
<li><code>redis.password</code>: Password of the Redis server</li>
<li><code>redis.database</code>: Redis database to use</li>
<li><code>redis.namespace</code>: Namespace for Redis keys</li>
<li><code>redis.pool-size</code>: The maximum size of the connection pool</li>
</ul>
<p>If connecting to a single Redis instance:</p>
<ul>
<li><code>redis.address</code>: Address of the Redis server</li>
</ul>
<p>Or you can enable failover using <a href="https://redis.io/topics/sentinel">Redis Sentinel</a>:</p>
<ul>
<li><code>redis.failover.enable</code>: Set to <code>true</code></li>
<li><code>redis.failover.addresses</code>: List of addresses of the Redis Sentinel instances (required)</li>
<li><code>redis.failover.master-name</code>: Redis Sentinel master name (required)</li>
</ul>
<p>Further, you can reduce the load on the Redis master by specifying read-only configuration:</p>
<ul>
<li><code>redis.readonly.address</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Address of the Redis server</li>
<li><code>redis.readonly.password</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Password of the Redis server</li>
<li><code>redis.readonly.database</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Redis database to use</li>
<li><code>redis.readonly.pool-size</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: The maximum size of the connection pool</li>
</ul>
<p>If your Redis server uses TLS, use the following options:</p>
<ul>
<li><code>redis.tls.require</code>: Require TLS when connecting to Redis</li>
<li><code>redis.tls.root-ca</code>: Location of TLS root CA certificate</li>
<li><code>redis.tls.insecure-skip-verify</code>: Skip verification of certificate chains (insecure)</li>
</ul>
<p>Mutual TLS is not supported yet.</p>
<h2 id="blob-options">Blob Options</h2>
<p>The <code>blob</code> options configure how The Things Stack reads or writes files such as pictures, the frequency plans repository or files required for Backend Interfaces interoperability. The <code>provider</code> field selects the provider that is used, and which other options are read.</p>
<ul>
<li><code>blob.provider</code>: Blob store provider (local, aws, gcp, azure) (default <code>local</code>)</li>
</ul>
<p>If the blob provider is <code>local</code>, you need to specify the directory to use.</p>
<ul>
<li><code>blob.local.directory</code>: Local directory that holds the buckets (default <code>./public/blob</code>)</li>
</ul>
<p>If the blob provider is <code>aws</code>, you need to specify the S3 region, the access key ID and secret access key.</p>
<ul>
<li><code>blob.aws.region</code>: S3 region</li>
<li><code>blob.aws.access-key-id</code>: Access key ID</li>
<li><code>blob.aws.secret-access-key</code>: Secret access key</li>
<li><code>blob.aws.endpoint</code>: S3 endpoint</li>
<li><code>blob.aws.session-token</code>: Session token</li>
</ul>
<p>If the blob provider is <code>gcp</code>, you can specify the credentials with either the credentials data, or with the path to the credentials file.</p>
<ul>
<li><code>blob.gcp.credentials</code>: JSON data of the GCP credentials, if not using JSON file</li>
<li><code>blob.gcp.credentials-file</code>: Path to the GCP credentials JSON file</li>
</ul>
<p>There is also an experimental support for <code>azure</code> provider. Only authentication via Managed Identity is supported.</p>
<ul>
<li><code>blob.azure.account-name</code>: Azure storage account name</li>
</ul>
<h2 id="events-options">Events Options</h2>
<p>The <code>events</code> options configure how events are shared between components. When using a single instance of The Things Stack, the <code>internal</code> backend is the best option. If you need to communicate in a cluster, you can use the <code>redis</code> or <code>cloud</code> backend.</p>
<ul>
<li><code>events.backend</code>: Backend to use for events (internal, redis, cloud) (default &ldquo;internal&rdquo;)</li>
</ul>
<p>When using the <code>redis</code> backend, the global <a href="#redis-options">Redis configuration</a> is used. Alternatively, you may customize the Redis configuration that is used for events.</p>
<ul>
<li><code>events.redis.address</code>: Address of the Redis server</li>
<li><code>events.redis.password</code>: Password of the Redis server</li>
<li><code>events.redis.database</code>: Redis database to use</li>
<li><code>events.redis.namespace</code>: Namespace for Redis keys</li>
<li><code>events.redis.pool-size</code>: The maximum size of the connection pool</li>
<li><code>events.redis.workers</code>: Number of workers to process request</li>
</ul>
<p>Similar to the global Redis configuration, you can reduce the load on the Redis master by specifying read-only configuration:</p>
<ul>
<li><code>events.redis.readonly.address</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Address of the Redis server</li>
<li><code>events.redis.readonly.password</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Password of the Redis server</li>
<li><code>events.redis.readonly.database</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Redis database to use</li>
<li><code>events.redis.readonly.pool-size</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: The maximum size of the connection pool</li>
</ul>
<p>Redis events backend also provides event storage where retention can be configured.</p>
<ul>
<li><code>events.redis.store.enable</code>: Enable events store</li>
<li><code>events.redis.store.correlation-id-count</code>: Defines how many events are indexed for a correlation ID</li>
<li><code>events.redis.store.entity-count</code>: Defines how many events are indexed for an entity ID</li>
<li><code>events.redis.store.entity-ttl</code>: Defines how long events are indexed for an entity ID</li>
<li><code>events.redis.store.ttl</code>: Defines how long event payloads are retained</li>
</ul>
<p>If your Redis server uses TLS, use the following options:</p>
<ul>
<li><code>events.redis.tls.require</code>: Require TLS when connecting to Redis</li>
<li><code>events.redis.tls.root-ca</code>: Location of TLS root CA certificate</li>
<li><code>events.redis.tls.insecure-skip-verify</code>: Skip verification of certificate chains (insecure)</li>
</ul>
<p>Mutual TLS is not supported yet.</p>
<p>With the <code>cloud</code> backend, the configured publish and subscribe URLs are passed to <a href="https://gocloud.dev/howto/pubsub/">the Go CDK</a>.</p>
<ul>
<li><code>events.cloud.publish-url</code>: URL for the topic to send events</li>
<li><code>events.cloud.subscribe-url</code>: URL for the subscription to receiving events</li>
</ul>
<h2 id="frequency-plans-options">Frequency Plans Options</h2>
<p>The <code>frequency-plans</code> configuration is used by the <a href="/docs/reference/configuration/gateway-server/">Gateway Server</a> and the <a href="/docs/reference/configuration/network-server/">Network Server</a>. It can load configuration from a number of sources.</p>
<ul>
<li><code>frequency-plans.config-source</code>: Source of the frequency plans (static, directory, url, blob)</li>
</ul>
<p>The <code>url</code> source loads frequency plans from the given URL. See the <a href="https://github.com/TheThingsNetwork/lorawan-frequency-plans">lorawan-frequency-plans</a> repository for more information.</p>
<ul>
<li><code>frequency-plans.url</code></li>
</ul>
<p>The <code>directory</code> source loads from the given directory.</p>
<ul>
<li><code>frequency-plans.directory</code></li>
</ul>
<p>The <code>blob</code> source loads from the given path in a bucket. This requires the global <a href="#blob-options">blob configuration</a>.</p>
<ul>
<li><code>frequency-plans.blob.bucket</code>: Bucket to use</li>
<li><code>frequency-plans.blob.path</code>: Path to use</li>
</ul>
<h2 id="cluster-options">Cluster Options</h2>
<p>The <code>cluster</code> options configure how The Things Stack communicates with other components in the cluster. These options do not need to be set when running a single instance of The Things Stack. The most important options are the ones to configure the addresses of the other components in the cluster.</p>
<ul>
<li><code>cluster.address</code>: Address to use for cluster communication</li>
<li><code>cluster.name</code>: Name of the current cluster peer</li>
<li><code>cluster.identity-server</code>: Address for the Identity Server</li>
<li><code>cluster.gateway-server</code>: Address for the Gateway Server</li>
<li><code>cluster.network-server</code>: Address for the Network Server</li>
<li><code>cluster.application-server</code>: Address for the Application Server</li>
<li><code>cluster.join-server</code>: Address for the Join Server</li>
<li><code>cluster.crypto-server</code>: Address for the Crypto Server</li>
<li><code>cluster.gateway-contiguration-server</code>: Address of the Gateway Configuration Server</li>
<li><code>cluster.join</code>: Addresses of cluster peers to join</li>
</ul>
<p>The next thing to configure is how peers discover each other, and how peers claim IDs.</p>
<p>The Things Stack currently only supports <code>DNS</code> discovery. In this discovery mechanism cluster peers periodically perform DNS lookups for the configured addresses. If an address is of the form <code>host:port</code> the peers will be discovered by looking up the <code>A</code> records for that address, and connecting to the configured port. If an address is only a hostname, the peers will be discovered by looking up the <code>SRV</code> records for that address, then looking up the <code>A</code> records for each returned address and connecting to the port that was set on the <code>SRV</code> record.</p>
<ul>
<li><code>cluster.discovery-mode</code>: Peer discovery mode</li>
</ul>
<p>The Things Stack currently only supports the <code>redis</code> backend for ID claiming. This uses the same Redis instance as the one used for the cache. When a gateway connects to a Gateway Server, the Gateway Server will register itself in Redis for the given gateway ID. When a Network Server needs to send a downlink to a gateway, it will look up the registered Gateway Server for the given gateway ID. To avoid hitting Redis every time a Network Server needs to send a downlink, it has a local cache of these ID claims.</p>
<ul>
<li><code>cluster.claim.backend</code>: ID claiming backend</li>
<li><code>cluster.claim.cache.size</code>: Maximum size of the local ID claims cache</li>
<li><code>cluster.claim.cache.ttl</code>: TTL of locally cached ID claims</li>
</ul>
<p>The cluster keys are 128 bit, hex-encoded keys that cluster components use to authenticate to each other.</p>
<ul>
<li><code>cluster.keys</code>: Keys used to communicate between components of the cluster. The first one will be used by the cluster to identify itself</li>
</ul>
<p>It is possible to configure the cluster to use TLS or not. We recommend to enable TLS for production deployments. The server name used in the TLS handshake between cluster peers can be overridden so that The Things Stack can connect to cluster peers using private (IP) addresses, while using a (public) TLS certificate that doesn&rsquo;t include those private addresses.</p>
<ul>
<li><code>cluster.tls</code>: Do cluster gRPC over TLS</li>
<li><code>cluster.tls-server-name</code>: Server name to use in TLS handshake to cluster peers</li>
</ul>
<p>The Things Stack can be configured to connect to Packet Broker via Packet Broker Agent component.</p>
<ul>
<li><code>cluster.packet-broker-agent</code>: Defines the address of the Packet Broker Agent</li>
</ul>
<p>It is possible to configure The Things Stack with Device Repository profiles from different vendors. This allows reusing standard end device profiles for module makers and LoRaWAN end device stack vendors.</p>
<ul>
<li><code>cluster.device-repository</code>: Defines the address of the Device Repository</li>
</ul>
<h2 id="cache-options">Cache Options</h2>
<p>The Things Stack can optionally be configured to use a cache.</p>
<ul>
<li><code>cache.service</code>: Configure the backing store that will be used for the cache. Currently, only <code>redis</code> is supported</li>
</ul>
<p>When using the <code>redis</code> backend, the global <a href="#redis-options">Redis configuration</a> is used. Alternatively, you may customize the Redis configuration that is used for the cache.</p>
<ul>
<li><code>cache.redis.address</code>: Address of the Redis server</li>
<li><code>cache.redis.password</code>: Password of the Redis server</li>
<li><code>cache.redis.database</code>: Redis database to use</li>
<li><code>cache.redis.namespace</code>: Namespace for Redis keys</li>
<li><code>cache.redis.pool-size</code>: The maximum size of the connection pool</li>
</ul>
<p>See <a href="#redis-options">Redis configuration</a> for more options.</p>
<h2 id="multi-tenancy">Multi-Tenancy</h2>
<p>






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


 In multi-tenant deployments, some additional configuration is required.</p>
<ul>
<li><code>tenancy.base-domains</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Base domains for tenant ID inference. Setting this to <code>thethings.example.com</code> would extract the tenant ID from <code>&lt;tenant-id&gt;.thethings.example.com</code>.</li>
<li><code>tenancy.default-id</code> 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


: Default tenant ID. Users visiting <code>thethings.example.com</code> (from <code>tenancy.base-domains</code>) will be redirected to <code>default.thethings.example.com</code>.</li>
</ul>
<p>Tenants can have custom configuration, such as custom branding or custom user registration options. This information is typically cached locally, especially in multi-region deployments to reduce the load on the Identity Server and to be more resilient against outages of the Identity Server.</p>
<ul>
<li><code>tenancy.ttl</code>: TTL of cached tenant configurations 






  
    
  

  
    
  



  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Cloud and Enterprise Only">

  <img class="badge" src="/docs/img/tts_frames/frame_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


</li>
</ul>
<h2 id="rate-limiting">Rate Limiting</h2>
<p>The Things Stack supports rate limiting external endpoints. See <a href="https://www.thethingsindustries.com/docs/reference/rate-limiting/">Rate Limiting</a> for more details.</p>
<ul>
<li><code>rate-limiting.blob.bucket</code>: Bucket to use</li>
<li><code>rate-limiting.blob.path</code>: Path to use</li>
<li><code>rate-limiting.config-source</code>: Source of the <code>rate-limiting.yml</code> file (directory, url, blob)</li>
<li><code>rate-limiting.directory</code>: Filesystem directory which contains rate limiting configuration</li>
<li><code>rate-limiting.memory.max-size</code>: Maximum store size for the rate limiter</li>
<li><code>rate-limiting.url</code>: URL which contains rate limiting configuration</li>
</ul>
<h2 id="resource-limiting">Resource Limiting</h2>
<p>






  
    
  

  
    
  

  
    
  



  

  

  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack has-tooltip has-tooltip-arrow has-tooltip-light" data-tooltip="Dedicated Cloud, Enterprise and AWS Launcher Only">

  <img class="badge" src="/docs/img/tts_frames/frame_dedicated_cloud.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

  <img class="badge" src="/docs/img/tts_frames/frame_aws.svg"></img>

</a>


  The Things Stack supports configuring maximum limits for active resources (e.g. number of active application data-plane MQTT connections). Resource limiting configuration can only be set from the configuration file. See <a href="https://www.thethingsindustries.com/docs/reference/resource-limiting/">Resource Limiting</a> for more details.</p>
<h2 id="version-check">Version Check</h2>
<p>The Things Stack performs a version check upon running by default, and prints a corresponding message if a newer version is available.</p>
<ul>
<li><code>skip-version-check</code>: Set to <code>true</code> to skip version check</li>
</ul>
<h2 id="experimental-features">Experimental Features</h2>
<p>The Things Stack supports experimental features.</p>
<ul>
<li><code>experimental.features</code>: Experimental features to activate</li>
</ul>

        </div>
        <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/reference/configuration/">← Configuration</a>
<a class="button is-pulled-right" href="/docs/reference/configuration/tenant-billing-server/">Tenant Billing Server Options →</a>
</div>

        <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#global-options'>Global Options</a></li>
    
      
      <li><a href='#license'>License</a></li>
    
      
      <li><a href='#key-vault'>Key Vault</a></li>
    
      
      <li><a href='#tls-options'>TLS Options</a></li>
    
      
      <li><a href='#grpc-options'>gRPC Options</a></li>
    
      
      <li><a href='#http-options'>HTTP Options</a></li>
    
      
      <li><a href='#interoperability-options'>Interoperability Options</a></li>
    
      
      <li><a href='#redis-options'>Redis Options</a></li>
    
      
      <li><a href='#blob-options'>Blob Options</a></li>
    
      
      <li><a href='#events-options'>Events Options</a></li>
    
      
      <li><a href='#frequency-plans-options'>Frequency Plans Options</a></li>
    
      
      <li><a href='#cluster-options'>Cluster Options</a></li>
    
      
      <li><a href='#cache-options'>Cache Options</a></li>
    
      
      <li><a href='#multi-tenancy'>Multi-Tenancy</a></li>
    
      
      <li><a href='#rate-limiting'>Rate Limiting</a></li>
    
      
      <li><a href='#resource-limiting'>Resource Limiting</a></li>
    
      
      <li><a href='#version-check'>Version Check</a></li>
    
      
      <li><a href='#experimental-features'>Experimental Features</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/ttn-network/v3/90">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra Selimović on 24 Feb 2022.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/53eb0102d2f0a111dbdc43953c3cc7d1d88ce8ed">
      doc: Add API calls troubleshooting (#790)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/reference/configuration/the-things-stack.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.a32708c8796e7e8713fa926212adddbbf5c15cdd97676d898ecfc17bc6d9ed4f.js" integrity="sha256-oycIyHlufocT&#43;pJiEq3du/XBXN2XZ22Jjs/Be8bZ7U8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
