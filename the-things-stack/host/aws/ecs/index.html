<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.134.2">
  <title>AWS ECS | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.d3f3815ed6609abc2ba6d0d6e3be8af6f52947117280c3cf9fbd8f5ff6ffb058.css" integrity="sha256-0/OBXtZgmrwrptDW476K9vUpRxFygMPPn72PX/b/sFg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="AWS ECS">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="AWS ECS">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="AWS ECS" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.10.1/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/the-things-stack/">The Things Stack</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>
        <a class="navbar-item" href="/docs/api/">API</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/stack/plans/" target="_blank">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">The Things Stack</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/the-things-stack/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/concepts/" class="">Basic Concepts</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/cloud/" class="">The Things Stack Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/" class="">Host The Things Stack</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/" class="">AWS</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ami/" class="">AWS Marketplace AMI</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/" class="is-active">AWS ECS</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/architecture/" class="">Architecture</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/prerequisites/" class="">Prerequisites</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/deployment/" class="">Deployment</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/database-operations/" class="">Database Operations</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/monitoring/" class="">Monitoring</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/updating/" class="">Updating</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/best-practices/" class="">Best Practices</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/interop/" class="">Interoperability</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/mutual-tls/" class="">Mutual TLS</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/troubleshooting/" class="">Troubleshooting AWS ECS Deployment</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/changelog/" class="">Template Changelog</a>
    
  </li>

</ul>


    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/kubernetes/" class="">Kubernetes</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/docker/" class="">Docker</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/join-server/" class="">The Things Join Server</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/" class="">Interact with The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/management/" class="">Manage The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/migrating/" class="">Migrate to The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/packet-broker/" class="">Packet Broker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/works-with/" class="">Works with The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/alerting/" class="">Alerting in The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/troubleshooting/" class="">Troubleshooting</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        
        
          <div class="content-tags">
            
              
              

  





  
    
  



  

<a href="/docs/getting-started/what-is-tts#the-things-stack-deployments" target="_blank" class="badge-stack">

  <img class="badge" src="/docs/img/tts_frames/frame_enterprise.svg"></img>

</a>


            
            
            
            
          </div>
        
        <h1 class="title is-size-2">AWS ECS</h1>
        <div class="content">
          <p>The Things Stack can be deployed to AWS as a set of highly available services on AWS ECS using AWS CloudFormation.</p>
<p>This guide gives an overview of the architecture and shows how to deploy your own highly available The Things Stack cluster.</p>
<h2 id="who-is-it-for">Who is it for?</h2>
<p>The AWS ECS deployment option is for professional, large-scale and multi-tenant deployments.</p>
<p>This deployment option is significantly more complicated than other deployment options. In order to deploy and operate The Things Stack in this configuration, you will need to be comfortable working with and operating the following concepts:</p>
<ul>
<li>AWS VPC</li>
<li>AWS RDS</li>
<li>AWS ElastiCache</li>
<li>AWS EC2</li>
<li>AWS ECS</li>
<li>AWS CloudFormation</li>
<li>Shell and command line usage</li>
<li>AWS command line interface</li>
</ul>
        </div>
          <div class="columns is-multiline">
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/architecture/">Architecture</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes the architecture of a The Things Stack deployment on AWS ECS.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/architecture/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/prerequisites/">Prerequisites</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes what you need for deploying The Things Stack on AWS ECS.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/prerequisites/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/deployment/">Deployment</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes the steps for deploying The Things Stack on AWS ECS.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/deployment/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/database-operations/">Database Operations</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes the steps for performing database operations on an AWS ECS deployment.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/database-operations/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/monitoring/">Monitoring</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes how you can monitor a The Things Stack deployment on AWS ECS.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/monitoring/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/updating/">Updating</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes the steps for updating The Things Stack on AWS ECS.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/updating/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/best-practices/">Best Practices</a>
          </h1>
          <div class="content has-text-grey">
            
            This page describes best practices of a The Things Stack deployment on AWS ECS.
Stack Naming Templates are numbered in suggested order of deployment. This doesn&rsquo;t mean that numbering won&rsquo;t change in the future. Our suggested naming scheme is $PREFIX-$NAME, where $PREFIX is some prefix specific to your deployment.
Staging Performing maintenance operations requires in-depth knowledge of AWS and The Things Stack. It is likely that certain action might have unexpected results. For this reason, we strongly advise to maintain a staging environment, and test all updates on staging before deploying to production.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/best-practices/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/interop/">Interoperability</a>
          </h1>
          <div class="content has-text-grey">
            
            The Things Stack exposes a subset of the Join Server API defined by LoRaWAN® Backend Interfaces 1.0 and 1.1. This is used for interoperability between LoRaWAN networks.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/interop/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
            <div class="content-tags">
              
              
                <span class="tag is-light">New in 3.30.0</span>

              
              
              
            </div>
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/mutual-tls/">Mutual TLS</a>
          </h1>
          <div class="content has-text-grey">
            
            The Things Stack supports mutual TLS authentication via a supported proxy (Envoy and Traefik).

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/mutual-tls/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/troubleshooting/">Troubleshooting AWS ECS Deployment</a>
          </h1>
          <div class="content has-text-grey">
            
            This section contains information to troubleshoot The Things Stack deployment.
ECS pulled wrong image version The image tags starting with 3.x contain the latest patch version. For this reason, you should use images starting with 3.x.y, where you specify the desired patch version yourself. Otherwise, when for some reason an ECS task restarts, it can pull the 3.x image again, which could be in the meantime updated to a new patch version.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/troubleshooting/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
  <div class="column is-half is-flex">
    <div class="card has-radius is-fullwidth">
      <div class="card-content">
        <div class="title-content">
          
          <h1 class="title is-size-5 is-uppercase"><a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/changelog/">Template Changelog</a>
          </h1>
          <div class="content has-text-grey">
            
            Upgrading All meaningful changes to templates are documented in this file.
Unreleased Add GRPC methods rate limiting metric to prometheus rules. Proxy Add NsMACSettingsProfileRegistry grpc service and routes. AMI/BYOL template Add a new TLSCertificateSecretARN parameter to allow loading TLS certificates from AWS secrets to BYOL and PAYG single template deployments. Add new IAM policy role that allows reading secrets from AWS Secret Manager Update default postgres version to 16.4 3.32.1 3.32.0 Add support for managed gateways via The Things Gateway Controller. The Gateway Configuration Server and Device Claiming Server use TLS client authentication. When using AWS Private CA (CertificateAuthorityARN in 4-2a-configuration), the client certificate can be issued automatically. To specify a custom TLS client certificate, enable EnableTTGCCustomCertificate in 4-1-secrets and specify the certificate and key according to the format in the description. Add support for gateways using The Things Industries Gateway Protocol. This requires TLS mutual authentication and TLS termination by the proxy. Make sure that SupportProxyTLS is enabled. This adds a new public listener (port 8889) that is mapped to the proxy that forwards traffic to the Gateway Server (port 1889). Fixed the rate-limiting profile for the ApplicationUpStorage service in the Application Server. Add default values for the default and maximum page sizes in the ApplicationUpStorage service in the Application Server. 3.31.1 Proxy Add TenantAccess grpc service and routes. 3.31.0 Updated ECS AMIs to the latest versions. 3.30.2 TimescaleDB replicas are now split to a separate template. Previously replicas had an ephemeral disk that needed to be copied when the replica was re-deployed. This made some upgrades really long to complete. Now the replicas are standalone and have their own disk that can be reattached to a new instance. This change should make upgrades faster and more reliable. Upgrade procedure Disable TimescaleDB replicas in the 5-4-ecs-services template. Upgrade the 2-5-db-timescale template. This will remove TimescaleDB replicas if there were any. Deploy the 2-6-db-timescale-replica template for each replica that was removed in the previous step. Re-enable TimescaleDB replicas in the 5-4-ecs-services template. 2-5-db-timescale Rename to 2-5-db-timescale-master. Remove replica configuration from the template. 2-6-db-timescale-replica Add new optional template for TimescaleDB replica. 4-2a-configuration Add configuration parameters for the UDP rate limiting firewall (UDPRateLimitingFirewallEnabled/UDPRateLimitingFirewallMessages/UDPRateLimitingFirewallThreshold). Environments which use the general purpose rate limiting of the Gateway Server (via 4-2b-configuration-rate-limiting) do not need to enable this firewall. 3.30.1 Proxy Add email validation paths. 3.30.0 2-4c-mtls-s3 Remove unused bucket policies and update resource tags. 3-1-security-group-rules Add ingress rules for LBSCUPSmTLS. Only enabled if LBSCUPSmTLSEnabled is true. 3-2-load-balancer-rules Add new listener for LBSCUPSmTLS. Remove dependency of port 443 and 8886 on SupportProxyTLSCondition. Update target group on Interop TLS connections when SupportProxyTLSCondition is true. 4-1-secrets Remove GSGatewayTokensHashKey. 4-2a-configuration Remove GSGatewayTokensHashKey configuration. 5-1-ecs-cluster Migrated from ECS Launch Configuration to ECS Launch Templates. The c6g, c7g, m6g, m7g, t4g, r6g and r7g families of machines are now available for hosting. 5-4-ecs-services Update GCS task role and remove mTLS bucket support for GS task role. The default NOC Grafana image has been updated to ghcr.io/thethingsindustries/lorawan-stack-noc-grafana:3.30.0. 5-5-ecs-monitoring Renamed to 5-6-ecs-monitoring. 5-6-ecs-proxy Renamed to 5-7-ecs-proxy. Add conditions for LBSCUPSmTLS. 5-7a-certs-le Renamed to 5-8a-certs-le. Updated naming of inputs related to mTLS. 5-7b-ecs-certbot-scheduled-task Renamed to 5-8b-ecs-certbot-scheduled-task. 3.29.2 3.29.1 3.29.0 2-1-db-aurora-master, 2-2-db-aurora-replica Update the default database engine version to 13.8. Engine versions 14, 15 and 16 are now supported. 2-5-db-timescale Updated the default node_exporter version to 1.7.0. Updated the default postgres_exporter version to 1.5.0. Extension version 2.13.1 is now supported. Engine version 16 is now supported, but note that this requires an extension version of at least 2.13.1. The default extension version is now 2.10.1. The default engine version is now 15. 2-6-queue-sqs Renamed from 5-9a-sqs. 5-4-ecs-cluster Updated the default node_exporter version to 1.7.0. 3.28.2 Proxy Add Network Operations Center Grafana WebSocket paths support. 4-2b-configuration-rate-limiting Add OAuth server and Account app rate limiting. Add Azure IoT Hub and Central rate limiting overrides. 5-9a-sqs Add new optional template for AWS SQS. 3.28.1 Proxy Add Console events paths. 4-2b-configuration-rate-limiting Add Console events request rate limiting. 3.28.0 2-3-db-redis The r7g family of machines is now available for hosting. 4-2a-configuration Add EventsBatchingEnabled, EventsBatchingTargetSize, EventsBatchingDelay parameters. Add correlation IDs ignored methods to the gRPC server configuration. Add Identity Server NS-ID configuration. 3.27.2 5-4-ecs-services The default NOC Grafana image has been updated to ghcr.io/thethingsindustries/lorawan-stack-noc-grafana:3.27.2. This upgrades Grafana to version 10.1.0 and disables the news feed. 3.27.1 2-5-db-timescale The instance initialization scripts now automatically terminates the instance if the initialization fails. 4-2a-configuration Added the CollaboratorRightsSetOthersAsContacts parameter. 3.27.0 5-4-ecs-services The default number of desired instances for the Gateway Configuration Server, Network Operations Center and Network Operations Center Grafana services has been increased to 2. We recommend that production deployments consider deploying extra replicas in order to ensure high availability. 3.26.2 5-2-ecs-ops Add GOGCValue parameter which controls the Go garbage collector target. Sets the GOGC environment variable for stack components. Defaults to 100, which is also the default value in the absence of the environment variable. 5-3a-ecs-is-service Add GOGCValue parameter which controls the Go garbage collector target. Sets the GOGC environment variable for stack components. Defaults to 100, which is also the default value in the absence of the environment variable. 5-3c-tbs-service Add GOGCValue parameter which controls the Go garbage collector target. Sets the GOGC environment variable for stack components. Defaults to 100, which is also the default value in the absence of the environment variable. 5-4-ecs-services Grafana alerting is now disabled by default, as it is not usable in the current setup. Add GOGCValue parameter which controls the Go garbage collector target. Sets the GOGC environment variable for stack components. Defaults to 100, which is also the default value in the absence of the environment variable. 3.26.1 ECS Templates This release adds support for large (8 and 16 vCPU) task sizes. These large tasks are supported by AWS Fargate. Please note that due to limitations to the EC2 launch type, the 16 vCPU tasks may not be used with the EC2 launch type. 5-3a-ecs-is-service Add support for 8 and 16 vCPUs tasks. 5-3b-ecs-external-is-proxy Add support for 8 and 16 vCPUs tasks. 5-3c-tbs-service Add support for 8 and 16 vCPUs tasks. 5-4-ecs-services Add support for 8 and 16 vCPUs tasks. 5-5-ecs-monitoring Add support for 8 and 16 vCPUs tasks. 5-6-ecs-proxy Add support for 8 and 16 vCPUs tasks. 3.26.0 ECS templates The UDP Gateway Server service has been removed. Historically this service has been used in order to work around various limitations that AWS Network Load Balancer had with UDP traffic. The service is problematic as it runs as a daemon service on each available ECS host machine, and does not support rolling updates. As the support for UDP traffic has improved in the AWS Network Load Balancer, we have decided to remove this service and have UDP traffic be served by the replica Gateway Server service. Upgrade procedure As this version upgrade removes certain resources, the standard upgrade procedure which follows the template numbering order cannot be followed directly. The configuration of the 5-4-ecs-services template needs to be updated such that the EnableUDPGSRateLimiting and IncludeUDPGatewayServer parameters are set to false. The template does not have to be updated yet, only the configuration. This will remove the UDP Gateway Server service instances. The standard upgrade procedure can commence after the template has been upgraded. While upgrading the 5-4-ecs-services template, consider increasing the number of tasks, or allocated resources, for the Gateway Server service. 1-2-bastion UDP Gateway Server references have been removed. 3-2-load-balancer-rules The UDP target group target type has been changed from instance to ip. 4-2b-configuration-rate-limiting The UDP Gateway Server rate limiting configuration has been marked as deprecated. The configuration will be removed in a future version. Add NOC rate limiting configuration. 5-4-ecs-services The UDP Gateway Server service has been removed. The UDP traffic will now be served by the existing Gateway Server service. The default NOC Grafana image has been updated to ghcr.io/thethingsindustries/lorawan-stack-noc-grafana:3.26.0. Add NOC rate limiting. 5-5-ecs-monitoring UDP Gateway Server references have been removed. 3.25.2 Proxy Upgraded to Envoy 1.26.0. 2-5-db-timescale Updated the default node_exporter version to 1.5.0. Replica updates now always maintain at least one instance during the upgrade. Postgres custom settings are now re-created on every master instance provisioning. 5-4-ecs-cluster Updated the default node_exporter version to 1.5.0. 5-5-ecs-monitoring Prometheus has been upgraded to version 2.43.0. 3.25.1 2-4b-routing-s3 Added PluginsConfigBucket. Proxy The Network Operations Center routes now have a 30 second timeout. 3-2-load-balancer-rules The Basic Station and Tabs Hubs target groups now have a deregistration delay of zero. 5-3a-ecs-is-service Service deployment configuration MinimumHealthyPercent is now applied only to EC2 services. 5-3b-ecs-external-is-proxy Service deployment configuration MinimumHealthyPercent is now applied only to EC2 services. 5-3c-tbs-service Service deployment configuration MinimumHealthyPercent is now applied only to EC2 services. 5-4-ecs-services Grafana gzip encoding is now enabled. Service deployment configuration MinimumHealthyPercent is now applied only to EC2 services. The default NOC Grafana image has been updated to ghcr.io/thethingsindustries/lorawan-stack-noc-grafana:3.25.1. 5-6-ecs-proxy Service deployment configuration MinimumHealthyPercent is now applied only to EC2 services. 3.25.0 Proxy The NOC API is now exposed by the proxy. 2-5-db-timescale Added TimescaleDB 2.10.1 support. 2-3-db-redis The r4g family of machines is now available for hosting. 4-2a-configuration Added the NOC API paths. Added RestrictAdminManagedFieldUpdates parameter. 3.24.2 1-2-bastion AWS Graviton instances can now be used as bastion hosts. 2-5-db-timescale Added TimescaleDB 2.10.0 support. 3.24.1 2-5-db-timescale Added support for Postgres engine version 15 and TimescaleDB 2.9.3. Fixed the master configuration for new Postgres engine version 12 deployments. 4-2a-configuration Added RedisConnectionPoolMaxLifetime parameter. Added KeyVaultCacheSize, KeyVaultCacheTTL, KeyVaultCacheErrorTTL parameters. 3.24.0 ECS templates Support for TLS mutual authentication terminated by The Things Stack has been removed. TLS authentication is now only terminated by the Network Load Balancer or Envoy Proxy. Support for LoRaWAN Backend Interfaces interoperability with the Join Server has been removed. Crypto Server deployment has been removed. Upgrade procedure As this version upgrade removes certain resources, the standard upgrade procedure which follows the template numbering order cannot be followed directly. The 5-7a-certs-le template needs to be upgraded first. The 5-3a-ecs-is-service template needs to be upgraded next, and have InteropEnabled set to disabled. The value may be enabled again after every other template has been upgraded. The standard upgrade procedure can commence after these two templates have been upgraded. 3-2-load-balancer-rules Changed InteropEnabled to a boolean since TLS mutual authentication is no longer terminated by The Things Stack. If you were using server-authentication or mutual-authentication, select true; If you were using disabled, select false. 4-1-secrets Removed InteropTLSSecret and output InteropTLSSecretID. 4-2a-configuration Removed InteropEnabled parameter. Removed CryptoServerDNSName parameter. Added CertificateAuthorityARN parameter. 5-2-ecs-ops Added UseCertificateAuthorityARN parameter. 5-3a-ecs-is-service Changed InteropEnabledIS to a boolean since TLS mutual authentication is no longer terminated by The Things Stack. If you were using server-authentication or mutual-authentication, select true; If you were using disabled, select false. Added UseCertificateAuthorityARN parameter. 5-3c-ecs-tbs-service Added UseCertificateAuthorityARN parameter. 5-4-ecs-services Removed InteropEnabledJS parameter. Added UseCertificateAuthorityARN parameter. 5-7a-certs-le Removed configuration for storing certificates for interoperability. 200-1-crypto This template has been removed and can be undeployed. 3.23.2 3.23.1 1-2-bastion The volumes used by the bastion hosts now use gp3 volumes. 2-5-db-timescale The volumes used by the TimescaleDB hosts now use gp3 volumes. 3-2-load-balancer-rules UDP target groups now automatically kill active flows to deregistered targets. This enables the replacement of the ECS EC2 machines without having the UDP traffic blackhole in the NLB. 4-2a-configuration Add configuration option for HomeNSID for the DCS config object. 5-1-ecs-cluster The volumes used by the EC2 machines used by ECS now use gp3 volumes. Note that this will not apply retroactively to existing instances. 5-5-ecs-monitoring Prometheus has been upgraded to version 2.40.5. Thanos default image has been upgraded to version 0.29.0. AMI/BYOL template Fix RDS PostgreSQL 13 and 14 support for new deployments. The volumes used by the EC2 machine and by the RDS database are now gp3 volumes. Fix Network Operation Center initialization for new deployments. Proxy Upgraded to Envoy 1.24.1. 3.23.0 For mTLS termination, check the upgrading guide at https://thethingsindustries.com/docs/getting-started/aws/ecs/mutual-tls/.

            
          </div>
        </div>
        <div class="buttons">
          <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/aws/ecs/changelog/" class="button is-primary is-outlined">Read</a>
        </div>
      </div>
    </div>
  </div>
</div>

          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/the-things-stack/host/aws/ami/troubleshooting/">← Troubleshooting AWS AMI Deployment</a>
<a class="button is-pulled-right" href="/docs/the-things-stack/host/aws/ecs/architecture/">Architecture →</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#who-is-it-for'>Who is it for?</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-third">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/the-things-stack/">The Things Stack</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
      </nav>
      <nav class="column is-one-third">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-third">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.3bf0da17f5ab4cc0f916662c2d2f977f7fa7259b4483f7f9eb46e875a556cc43.js" integrity="sha256-O/DaF/WrTMD5FmYsLS&#43;Xf3&#43;nJZtEg/f560bodaVWzEM=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
