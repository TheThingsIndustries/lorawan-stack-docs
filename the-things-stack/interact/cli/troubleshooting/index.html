<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.96.0" />
  <title>Troubleshooting CLI | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/troubleshooting/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.8058c473c43c01571dbb7b1b4de287fb8e077613d282e9b7b9db17271211dd60.css" integrity="sha256-gFjEc8Q8AVcdu3sbTeKH&#43;44HdhPSgum3udsXJxIR3WA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Troubleshooting CLI">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Troubleshooting CLI">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/troubleshooting/">
  <meta name="twitter:title" content="Troubleshooting CLI" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>


</head>


<body>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.25.1</p>
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/the-things-stack/">The Things Stack</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">The Things Stack</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/the-things-stack/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/concepts/" class="">Basic Concepts</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/cloud/" class="">The Things Stack Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/host/" class="">Host The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/" class="">Interact with The Things Stack</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/console/" class="">Console</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/" class="">Command-line Interface</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/installing-cli/" class="">Installing the CLI</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/configuring-cli/" class="">Configuring the CLI</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/login/" class="">Login with the CLI</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/troubleshooting/" class="is-active">Troubleshooting CLI</a>
    
    



    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/api/" class="">Using the API</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/management/" class="">Manage The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/migrating/" class="">Migrate to The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/packet-broker/" class="">Packet Broker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/the-things-stack/troubleshooting/" class="">Troubleshooting</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Troubleshooting CLI
          
        </h1>
        
        <div class="content">
          <p>This section contains help for common errors encountered when using the CLI.</p>
<h2 id="unauthenticated">Unauthenticated</h2>
<p>If the <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/login/">CLI login</a> wasn&rsquo;t successful, the user will face the following error when trying to execute CLI commands:</p>
<pre tabindex="0"><code>error:cmd/ttn-lw-cli/commands:unauthenticated (not authenticated with either API key or OAuth access token)
</code></pre><p>If you face this error, make sure you have properly <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/configuring-cli/#step-1---create-a-configuration-file">created a CLI configuration file</a> and <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/configuring-cli/#step-2---configure-the-cli">configured the CLI</a> for your The Things Stack instance.</p>
<p>Keep in mind that there are two CLI versions, <code>ttn-lw-cli</code> and <code>tti-lw-cli</code>, intended for users of different The Things Stack distributions, as mentioned in <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/installing-cli/">Installing the CLI guide</a>. You might face this error, for example, if you install <code>tti-lw-cli</code> and try to perform some action using <code>ttn-lw-cli</code>, or vice versa.</p>
<h2 id="faulty-oauth-server-address">Faulty OAuth Server Address</h2>
<p>In the <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/configuring-cli/">CLI configuration file</a>, the server address is set to <code>thethings.example.com</code> by default. If you do not change this server address to the address of your own deployment, using <code>ttn-lw-cli login</code> command will redirect to <code>https://thethings.example.com/oauth/authorize?client_id=cli&amp;redirect_uri=local-callback&amp;response_type=code</code> in your web browser, where the CLI needs to be authorized for exchanging an access token.</p>
<p>Since your server address is most likely different than <code>thethings.example.com</code>, you will see an error about that URL not being found in your browser, the access token will not be obtained and you will not be able to execute any further CLI commands. In your terminal, you will see something like:</p>
<pre tabindex="0"><code>INFO Opening your browser on https://thethings.example.com/oauth/authorize?client_id=cli&amp;redirect_uri=local-callback&amp;response_type=code
INFO After logging in and authorizing the CLI, we&#39;ll get an access token for future commands.
INFO Waiting for your authorization...
</code></pre><p>The solution to this issue would be to replace <code>thethings.example.com</code> occurrences with the server address of your The Things Stack deployment.</p>
<p>You will experience the same issue if you are using an <code>https</code> port other than <code>443</code> and you have not specified that port in the <code>oauth-server-address</code> parameter in the CLI configuration file or with <code>--oauth-server-address</code> flag when running the CLI. For example, if you are running The Things Stack on <code>localhost</code>, you need to specify the OAuth server address as <code>'https://localhost:8885/oauth'</code>.</p>
<h2 id="certificate-signed-by-unknown-authority">Certificate Signed by Unknown Authority</h2>
<p>If the CA file path is not specified in the <a href="https://www.thethingsindustries.com/docs/the-things-stack/interact/cli/configuring-cli/">CLI configuration file</a> (or with <code>--ca</code> flag when running the CLI), or if you are using self-signed certificates, using <code>ttn-lw-cli login</code> might result in the following error:</p>
<pre tabindex="0"><code>ERROR Could not exchange OAuth access token    error=Post &#34;https://thethings.example.com:8885/oauth/token&#34;: x509: certificate signed by unknown authority
</code></pre><p>If the CA file is present on your system, the CLI configuration file should contain <code>ca: /path/to/ca.pem</code> or you should run the CLI with <code>--ca=&quot;/path/to/ca.pem&quot;</code> flag, and you should also import the CA file using your web browser&rsquo;s certificate manager to make sure it&rsquo;s trusted by your system.</p>
<p>You can also run the CLI with the <code>--fetch-ca</code> flag which will make sure to connect to the server, fetch the CA file and configure the path to it in your CLI configuration file.</p>
<h2 id="no-collaborator-set">No Collaborator Set</h2>
<p>Many CLI commands require that a user or organization is set to grant permissions over an entity. For example, to create an application:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ttn-lw-cli applications create &lt;application-id&gt; --user-id &lt;user-id&gt;
</span></span></code></pre></div><h2 id="permission-denied">Permission Denied</h2>
<p>If a user (specified with the <code>--user-id</code> flag) does not have sufficient rights to perform the desired action, you will face an error such as:</p>
<pre tabindex="0"><code>error:pkg/auth/rights:insufficient_application_rights (insufficient rights for application `app1`)
</code></pre><p>See <a href="https://www.thethingsindustries.com/docs/the-things-stack/management/user-management/">Users and Organizations</a> section for more info on rights management.</p>
<h2 id="invalid-identifiers">Invalid Identifiers</h2>
<p>When creating an entity using the CLI, if the ID value that you use does not follow The Things Stack naming convention, you will face an error. For example, using <code>ttn-lw-cli gateways create My_Gateway</code> command would result in the following error:</p>
<pre tabindex="0"><code>error:pkg/errors:validation (invalid `gateway_id`: value does not match regex pattern &#34;^[a-z0-9](?:[-]?[a-z0-9]){2,}$&#34;)
field=gateway_id
name=GatewayIdentifiersValidationError
reason=value does not match regex pattern &#34;^[a-z0-9](?:[-]?[a-z0-9]){2,}$&#34;
</code></pre><p>See <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/">ID and EUI Constraints</a> section for more info.</p>
        </div>
        
          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/the-things-stack/interact/cli/login/">← Login with the CLI</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#unauthenticated'>Unauthenticated</a></li>
    
      
      <li><a href='#faulty-oauth-server-address'>Faulty OAuth Server Address</a></li>
    
      
      <li><a href='#certificate-signed-by-unknown-authority'>Certificate Signed by Unknown Authority</a></li>
    
      
      <li><a href='#no-collaborator-set'>No Collaborator Set</a></li>
    
      
      <li><a href='#permission-denied'>Permission Denied</a></li>
    
      
      <li><a href='#invalid-identifiers'>Invalid Identifiers</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/the-things-stack/">The Things Stack</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/ttn-network/v3/90">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra Selimović on 21 May 2023.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/ef9fa928ddae03c8de1cce347ed74612da9f62d4">
      doc: CLI troubleshooting update (#1111)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/the-things-stack/interact/cli/troubleshooting/_index.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.a32708c8796e7e8713fa926212adddbbf5c15cdd97676d898ecfc17bc6d9ed4f.js" integrity="sha256-oycIyHlufocT&#43;pJiEq3du/XBXN2XZ22Jjs/Be8bZ7U8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
