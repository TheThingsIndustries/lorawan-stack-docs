---
title: "Arduino MKR 1310"
description: ""
weight:
---

{{< figure src="mkrwan1310.png" alt="Arduino MKR WAN 1310" class="float plain" >}}

This section will help you get started with using The Arduino MKR WAN 1310 on {{% tts %}}.

<!--more-->

The **Arduino MKR WAN 1310** is a board that combines the power of an ATMEL SAMD21 microcontroller and the communications capabilities of the Murata LoRa速 module. It is designed to integrate the core's low power-consumption and high performance with the ease-of-use of Arduino's environment, making this board a practical and cost effective solution for makers seeking to add LoRa速 connectivity to their projects, with minimal previous experience in networking.

The Arduino MKR WAN 1310 is programmed using the Arduino Software (IDE).

## Setting up Arduino IDE

The Arduino IDE allows you to write code using the Arduino programming language (C/C++), compile (verify), and upload it to The Arduino MKR WAN 1310. It supports Windows, Mac OS, Linux, and Chrome OS.

Download the latest release of the [Arduino Software (IDE)](https://www.arduino.cc/en/Main/Software), [install](https://www.arduino.cc/en/Guide) it on your operating system and run it.

Before we get to programming you need to install a few additional things. First is the drivers for the board. This can be done by clicking the **second icon in the left-hand menu** or navigating to **Tools > Board > Board Manager...**. Here you need to look for the **Arduino SAMD boards (32-bits ARM速 Cortex速-M0+)** and install it.

{{< figure src="boards-manager.png" alt="Arduino Boards Manager" >}}

Then you need to install the library for the board. Click on the **third icon in the left-hand menu** or navigate to **Tools > Manage libraries..**. In here search for **MKRWAN** and install it.

{{< figure src="library-manager.png" alt="Arduino Library Manager" >}}

{{< note "You might have noticed there is also a library named MKRWAN_v2 from Arduino. We used the MKRWAN library for this tutorial, but both libraries work. As the two libraries rely on two separate firmware, it is important that your device has the correct firmware installed. Updating it is done by running the *File > Examples > MKRWAN / MKRWAN_v2 > MKRWANFWUpdate_standalone* example from the corresponding library. " />}}

Once you have downloaded the library, you will need to upload an example code from the **MKRWAN** library, called **FirstConfiguration**. You can find this in **File > Examples > MKRWAN > FirstConfiguration**.

Then plug the Arduino into your computer. In the IDE, click on **Select Board** at the top, and select your **Arduino MKR WAN 1310**.

{{< figure src="select-board.png" alt="Selecting Board" >}}

Once that is done you can upload the file to the board (Using the **->** button). Once the code is uploaded successfully, open the Serial Monitor. You can open it by clicking the **icon in the top-right corner**.

{{< figure src="serial-monitor.png" alt="Serial Monitor" >}}

Here you will find the unique Device EUI as displayed in the picture below:

{{< figure src="device-eui.png" alt="EUI of the device in the serial monitor" >}}

{{< note "If nothing appears in the serial monitor, press the reset button on the MKR WAN 1310." />}}

Now copy the Device EUI and save it, as it will be used for connecting to {{% tts %}}.

## Registering on the Stack

Move to the Stack, create an application and click register device.
{{< figure src="hw-version.png" alt="" class="float" width="150%" >}}

Here enter the following details:
- End device brand: **Arduino SA**
- Model: **MKR WAN 1310**
- Hardware Ver.: **1.0**
- Firmware Ver.: **Check in the Serial Monitor ->**

{{< figure src="stack-device.png" alt="" >}}

For the Provisioning Information, enter the following details:
- JoinEUI: **All 0's**
- DevEUI: **Copied from the Serial Monitor**
- AppKey: **Generated by clicking on `Generate`**

{{< figure src="stack-prov.png" alt="" >}}

In your device overview   you can now see three rows under Activation information: **Device EUI, Application EUI and App Key**. You are going to need these values for the next steps.

{{< figure src="device-overview.png" alt="" >}}

## Connecting board to Stack

Now let's go back to the **FirstConfiguration** sketch again. To be safe, reset your board and open the Serial Monitor again. Once the program starts, it will start asking questions in the Serial Monitor. The first one is if you are using OTAA or ABP. We are going to use OTAA, so you can enter a "**1**" in the message field and hit enter.

Then it will ask you for your **APP EUI** and **APP KEY**. First copy the **AppEUI** from it's respective **Activation information** fields inside {{% tts %}}, then enter it in the message field, hit enter, and repeat for the other one. Once you have entered them, the device will try to connect to TTN.

{{< figure src="monitor-prov.png" alt="" >}}

Now go to {{% tts %}}, you should see the device connecting. But you are going to need a payload formatter.

As the payload comes in a HEX format, you will need to decode it using a **Payload Formatter**. To do this, in your application on {{% tts %}}, click on **Payload formatters**.

{{< figure src="stack-pf.png" alt="Serial Monitor" width="70%" >}}

Make sure that **Custom Javascript formatter** is selected here from the dropdown

{{< figure src="custom-js.png" alt="Serial Monitor" width="70%"   >}}

Now in the **Formatter code** field, replace it with this formatter:

```js
function Decoder(bytes, port) {
 var result = "";
 for (var i = 0; i < bytes.length; i++) {
   result += String.fromCharCode(parseInt(bytes[i]));
 }
 return { payload: result, };
}
```

That was it! Now go get creating or try an [ example project]({{< ref "/devices/models/mkr1310/temp" >}}).

## Troubleshoot

**My Arduino does not show up in Select Board**
- Make sure that the cable you are using can transfer data. Try a different cable.
