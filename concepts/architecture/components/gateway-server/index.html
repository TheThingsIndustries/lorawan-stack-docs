<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.134.2">
  <title>Gateway Server | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/concepts/architecture/components/gateway-server/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.d3f3815ed6609abc2ba6d0d6e3be8af6f52947117280c3cf9fbd8f5ff6ffb058.css" integrity="sha256-0/OBXtZgmrwrptDW476K9vUpRxFygMPPn72PX/b/sFg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Gateway Server">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Gateway Server">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/concepts/architecture/components/gateway-server/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="Gateway Server" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.10.1/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/concepts/">Concepts</a>
        <a class="navbar-item" href="/docs/cloud/">The Things Stack Cloud</a>
        <a class="navbar-item" href="/docs/enterprise/">The Things Stack Enterprise</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/api/">API</a>
        <a class="navbar-item" href="/docs/hardware/">Hardware</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/stack/plans/" target="_blank">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Concepts</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/concepts/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/" class="">Architecture</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/" class="">Components</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/alert-routing-server/" class="">Alert Routing Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/application-server/" class="">Application Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/console/" class="">Console</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/device-claiming-server/" class="">Device Claiming Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/device-template-converter/" class="">Device Template Converter</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/gateway-configuration-server/" class="">Gateway Configuration Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/gateway-server/" class="is-active">Gateway Server</a>
    
    



    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/identity-server/" class="">Identity Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/join-server/" class="">Join Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/network-operations-center/" class="">Network Operations Center</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/network-server/" class="">Network Server</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/packet-broker-agent/" class="">Packet Broker Agent</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/components/tenant-billing-server/" class="">Tenant Billing Server</a>
    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/id-eui-constraints/" class="">ID and EUI Constraints</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/concepts/architecture/last-activity/" class="">Last Activity</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/features/" class="">Features</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/networking/" class="">Networking</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/migration/" class="">Migrate to The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/packet-broker/" class="">Packet Broker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/server-addresses/" class="">Server Addresses</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/advanced/" class="">Advanced Topics</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/troubleshooting/" class="">Troubleshooting</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/concepts/ttn/" class="">The Things Stack Sandbox</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
          
          
        <h1 class="title is-size-2">Gateway Server</h1>
        <div class="content">
          <p>The Gateway Server maintains connections with gateways supporting the Basic Station, UDP, MQTT and gRPC protocols. It forwards uplink traffic to Network Servers directly or indirectly, and schedules downlink traffic on gateways.</p>
<h2 id="connectivity">Connectivity</h2>
<p>Gateways can connect to Gateway Servers over multiple protocols. See <a href="https://www.thethingsindustries.com/docs/concepts/networking/">Networking</a>.</p>
<h3 id="basic-station-protocol">Basic Station Protocol</h3>
<p>Gateways can connect to a Gateway Server using the <a href="https://lora-developers.semtech.com/resources/tools/lora-basics/lora-basics-for-gateways/">Basic Station</a> LNS protocol. This is the recommended protocol for connecting gateways.</p>
<h3 id="udp-protocol">UDP Protocol</h3>
<p>Gateways can connect to a Gateway Server over <a href="https://github.com/Lora-net/packet_forwarder/blob/master/PROTOCOL.TXT">the UDP protocol</a>. The EUI that is sent with every message is used to identify the gateway.</p>
<p>If a gateway is found in the Identity Server with this EUI, messages are correlated to this gateway. Otherwise, depending on network configuration, uplinks may routed or dropped. However, the network will not send downlinks to this gateway, given that its regional parameters cannot be identified.</p>
<p>Older versions of packet forwarders implementing the UDP protocol do not implement any queuing system for downlinks, resulting in packet loss since SX130x concentrators do not buffer multiple downlinks. The Things Stack therefore implements, for the UDP protocol, a delay to send downlinks to gateway just before they&rsquo;re meant to be emitted by the concentrator. You can disable this feature individually per gateway, for example if the RTT between your gateway and the Gateway Server is too high.</p>
<h3 id="mqtt-protocol">MQTT Protocol</h3>
<p>Gateways can connect to a Gateway Server by exchanging <a href="https://developers.google.com/protocol-buffers">Protocol Buffers</a> over MQTT. MQTT is available over TLS, providing confidentiality of messages exchanged between the gateway and the network. The encoding with protocol buffers reduces bandwidth usage compared to the UDP protocol, which uses JSON encoding. See <a href="https://www.thethingsindustries.com/docs/api/concepts/lora-gateway/">Gateway Server MQTT Protocol</a> for technical details.</p>
<p>Packet forwarders implementing the MQTT protocols are specific for The Things Stack.</p>
<h2 id="gateway-information">Gateway Information</h2>
<p>While a gateway is connected, the Gateway Server collects statistics about the messages exchanged with the gateway, and about the status messages sent by the gateway. Those statistics can be retrieved from the Gateway Server using its gRPC and HTTP APIs. See <a href="https://www.thethingsindustries.com/docs/api/reference/grpc/gateway_server/#Gs"><code>Gs</code> service</a>.</p>
<h2 id="communication-with-network-server">Communication with Network Server</h2>
<p>The main function of the Gateway Server is to maintain connections with gateways, and to serve as a relay between those gateways and the Network Servers.</p>
<h3 id="uplink-messages">Uplink Messages</h3>
<p>When receiving a data uplink message, the Gateway Server decides which Network Server to send it to based on the <code>DevAddr</code> of the device and the configured forwarding table with endpoints. Join-requests are routed to all configured endpoints. An endpoint can be the cluster&rsquo;s Network Server over gRPC, or an intermediate traffic routing mechanism.</p>
<h3 id="downlink-messages">Downlink Messages</h3>
<p>Network Servers can request transmission for downlink messages. The Gateway Server attempts to schedule the message based on the selected gateways, time to send the message and LoRaWAN® settings (downlink class, RX1 delay and RX1/RX2 data rates and frequencies).</p>
<p>The Gateway Server keeps track of all downlinks emitted and to be emitted by gateways connected to it, including the exact time-on-air based on message size and data rate. This allows The Things Stack to do smart scheduling. Besides timing and LoRaWAN settings, the Gateway Server takes applicable limitations into account, including:</p>
<ul>
<li><strong>Scheduling conflicts</strong>: If the emission of a downlink overlaps the emission of another downlink, the downlink is refused.</li>
<li><strong>Time-off-air</strong>: Some bands and frequency plans have time-off-air constraints, meaning a gateway must not emit for a certain period of time after emitting a downlink.</li>
<li><strong>Duty-cycle</strong>: Some countries, such as European countries, have <strong>duty-cycle restrictions</strong>, prohibiting a device for emitting for more than a certain percentage of time on a certain band.</li>
<li><strong>Dwell time</strong>: Some countries, such as the United States, are subject to <strong>dwell time regulations</strong>, meaning the duration of a transmission cannot exceed a certain limit.</li>
</ul>
        </div>
        <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/concepts/architecture/components/gateway-configuration-server/">← Gateway Configuration Server</a>
<a class="button is-pulled-right" href="/docs/concepts/architecture/components/identity-server/">Identity Server →</a>
</div>

        <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#connectivity'>Connectivity</a></li>
    
      
      <li><a href='#gateway-information'>Gateway Information</a></li>
    
      
      <li><a href='#communication-with-network-server'>Communication with Network Server</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sections</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/concepts/">Concepts</a></p>
        <p><a class="" href="/docs/cloud/">The Things Stack Cloud</a></p>
        <p><a class="" href="/docs/enterprise/">The Things Stack Enterprise</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
        <p><a class="" href="/docs/hardware/">Hardware</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sitemap</h3>
        <p><a class="" href="https://www.thethingsindustries.com/docs/sitemap/">View our Sitemap</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-fourth">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.3bf0da17f5ab4cc0f916662c2d2f977f7fa7259b4483f7f9eb46e875a556cc43.js" integrity="sha256-O/DaF/WrTMD5FmYsLS&#43;Xf3&#43;nJZtEg/f560bodaVWzEM=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
