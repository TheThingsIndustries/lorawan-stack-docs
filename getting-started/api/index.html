<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.96.0" />
  <title>Using the API | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/getting-started/api/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.c994a55269632c4bc7be3364abf857e85ff170cc251dd025099769c910cbbcb4.css" integrity="sha256-yZSlUmljLEvHvjNkq/hX6F/xcMwlHdAlCZdpyRDLvLQ=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Using the API">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Using the API">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/getting-started/api/">
  <meta name="twitter:title" content="Using the API" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.21.0</p>
      </a><div class="navbar-item navbar-search-brand">
        <div class="field has-addons has-addons-centered">
          <div class="control">
            <input id="search-input-brand" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
          </div>
        </div>
      </div>
      
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a><div class="navbar-item navbar-search-menu">
            <div class="field has-addons has-addons-centered">
              <div class="control">
                <input id="search-input-menu" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
              </div>
            </div>
          </div></div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-brand',
      debug: false 
    });
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-menu',
      debug: false 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Getting Started</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/getting-started/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/quick-start/" class="">Quick Start</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/what-is-tts/" class="">What Is The Things Stack?</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/console/" class="">Console</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/cli/" class="">Command-line Interface</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/installation/" class="">Installing The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/upgrading/" class="">Upgrading The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/" class="">Migrating to The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/cloud-hosted/" class="">The Things Stack Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/" class="">The Things Stack AWS Launcher</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/ttn/" class="">The Things Network</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/server-addresses/" class="">Server Addresses</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/packet-broker/" class="">Packet Broker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/sso/" class="">Single Sign-On</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/user-management/" class="">Users and Organizations</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/api/" class="is-active">Using the API</a>
    



    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/events/" class="">Working with Events</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/troubleshooting/" class="">Troubleshooting Getting Started</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Using the API
          
        </h1>
        
        <div class="content">
          <p>While we recommend using the <a href="https://www.thethingsindustries.com/docs/getting-started/console/">Console</a> or <a href="https://www.thethingsindustries.com/docs/getting-started/cli/">CLI</a> to manage your applications and devices in The Things Stack, we also expose HTTP and gRPC APIs which you can interact directly with. This section contains information about using the HTTP API, and examples.</p>
<p>A complete list of API endpoints is available in the <a href="https://www.thethingsindustries.com/docs/reference/api/">API Reference</a>. There, you can also find detailed information about <a href="https://www.thethingsindustries.com/docs/reference/api/authentication/">Authentication</a> and <a href="https://www.thethingsindustries.com/docs/reference/api/field-mask/">Field Masks</a>.</p>
<div class="notification is-warning is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Warning:</h5>
  If you are not getting the fields you expect in API responses, see the <a href="/docs/reference/api/field-mask/">Field Masks</a> reference.
</div>

<p>If you are having trouble with the HTTP API, you can always inspect requests in the Console using your browser&rsquo;s inspector. All of the data displayed in the Console is pulled using HTTP API requests, and this should give you some insight in to how they are formed.</p>
<h2 id="best-practices">Best Practices</h2>
<h3 id="send-a-user-agent-header">Send a <code>User-Agent</code> Header</h3>
<p>Set the <code>User-Agent</code> HTTP header containing your integration name and version. That way, a network operator can help finding out potential issues using the logs.</p>
<h3 id="respect-x-ratelimit--response-headers">Respect <code>X-Ratelimit-*</code> Response Headers</h3>
<p>The Things Stack sends responses containing information about how many requests your integration has made and how many are remaining, in accordance with the IETF draft spec <a href="https://tools.ietf.org/id/draft-polli-ratelimit-headers-03.html">here</a>.</p>
<h3 id="mind-the-x-warning-headers">Mind the <code>X-Warning</code> Headers</h3>
<p>The Things Stack sends responses containing this header to warn about issues that may become errors in the future.</p>
<h2 id="http-query-examples">HTTP Query Examples</h2>
<h3 id="get-device-info">Get Device Info</h3>
<p>Fields may be specified in HTTP requests by appending them as query string parameters. For example, to request the <code>name</code>, <code>description</code>, and <code>locations</code> of devices in an <code>EndDeviceRegistry.Get</code> request, add these fields to the <code>field_mask</code> field. To get this data for device <code>dev1</code> in application <code>app1</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer NNSXS.XXXXXXXXX&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/applications/app1/devices/dev1?field_mask=name,description,locations&#39;</span>
</span></span></code></pre></div><p>The same request in tenant <code>tenant1</code> on a multi-tenant deployment:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer NNSXS.XXXXXXXXX&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://tenant1.thethings.example.com/api/v3/applications/app1/devices/dev1?field_mask=name,description,locations&#39;</span>
</span></span></code></pre></div><p>Fields may also be specified as a JSON object in a POST request.</p>
<h3 id="get-event-stream">Get Event Stream</h3>
<p>To get a stream of events for device <code>dev1</code> in application <code>app1</code> :</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: text/event-stream&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;identifiers&#34;:[{
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_ids&#34;:{
</span></span></span><span class="line"><span class="cl"><span class="s1">            &#34;device_id&#34;:&#34;dev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">            &#34;application_ids&#34;:{&#34;application_id&#34;:&#34;app1&#34;}
</span></span></span><span class="line"><span class="cl"><span class="s1">        }
</span></span></span><span class="line"><span class="cl"><span class="s1">    }]
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/events&#39;</span>
</span></span></code></pre></div><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">here</a> a description of the <code>text/event-stream</code> MIME type.</p>
<h3 id="schedule-downlink">Schedule Downlink</h3>
<p>To schedule a downlink, you may use the <code>DownlinkQueuePush</code> or <code>DownlinkQueueReplace</code> endpoints of the <a href="https://www.thethingsindustries.com/docs/reference/api/application_server/#the-appas-service">Application Server API</a>. For example, to schedule a downlink queue push to device <code>dev1</code> in application <code>app1</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;downlinks&#34;: [{
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;frm_payload&#34;: &#34;vu8=&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;f_port&#34;: 42,
</span></span></span><span class="line"><span class="cl"><span class="s1">    }]
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/as/applications/app1/devices/dev1/down/push&#39;</span>
</span></span></code></pre></div><p>To schedule a human readable downlink to the same device using a downlink <a href="https://www.thethingsindustries.com/docs/integrations/payload-formatters/">Payload Formatter</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data <span class="s1">&#39;{&#34;downlinks&#34;:[{
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;decoded_payload&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;bytes&#34;: [1, 2, 3]
</span></span></span><span class="line"><span class="cl"><span class="s1">      }
</span></span></span><span class="line"><span class="cl"><span class="s1">    }]
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/as/applications/app1/devices/dev1/down/push&#39;</span>
</span></span></code></pre></div><p>Please note that downlinks scheduled using the <code>decoded_payload</code> Payload Formatter field are encrypted in the Application Server, and the content will not be comprehensible in the Network Server&rsquo;s <code>frm_payload</code> field when viewing events.</p>
<p>It is also possible to <a href="https://www.thethingsindustries.com/docs/integrations/webhooks/scheduling-downlinks/">schedule downlinks using HTTP Webhooks</a>, which give you flexibility to choose JSON or gRPC HTTP payloads.</p>
<h3 id="multi-step-actions">Multi-step Actions</h3>
<p>If you want to create a device, perform multi-step actions, or write shell scripts, it&rsquo;s best to use the <a href="https://www.thethingsindustries.com/docs/getting-started/cli/">CLI</a>.</p>
<p>If you want to do something like registering a device directly via the API, you need to make calls to the Identity Server, Join Server, Network Server and Application Server. See the <a href="https://www.thethingsindustries.com/docs/reference/api/end_device/">API Reference</a> for detailed information about which messages go to which endpoints.</p>
<div class="tabs is-boxed">
  <ul>
    
    <li data-tab="otaa">
      <a>
        <span>OTAA</span>
      </a>
    </li>
    
    <li data-tab="abp">
      <a>
        <span>ABP</span>
      </a>
    </li>
    
  </ul>
</div>
<div class="tab-content content">
  <section data-content="otaa">
  <p>To register a device <code>newdev1</code> in application <code>app1</code>, first, register the <code>DevEUI</code>, <code>JoinEUI</code> and cluster addresses in the Identity Server. This is also where you register a friendly name, description, attributes, location, and more - see all fields in the <a href="https://www.thethingsindustries.com/docs/reference/api/">API Reference</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;join_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;join_server_address&#34;: &#34;thethings.example.com&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;network_server_address&#34;: &#34;thethings.example.com&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;application_server_address&#34;: &#34;thethings.example.com&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;join_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;network_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;application_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.join_eui&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/applications/app1/devices&#39;</span>
</span></span></code></pre></div><p>Next, you need to register the <code>DevEUI</code>, <code>JoinEUI</code>, cluster addresses and keys in the Join Server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request PUT <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;join_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;network_server_address&#34;: &#34;thethings.example.com&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;application_server_address&#34;: &#34;thethings.example.com&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;root_keys&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;app_key&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;key&#34;: &#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">        }
</span></span></span><span class="line"><span class="cl"><span class="s1">      }
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;network_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;application_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.device_id&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.join_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;root_keys.app_key.key&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/js/applications/app1/devices/newdev1&#39;</span>
</span></span></code></pre></div><p>Register LoRaWAN settings in the Network Server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request PUT <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;supports_join&#34;: true,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;lorawan_version&#34;: &#34;1.0.2&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;join_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;lorawan_phy_version&#34;: &#34;1.0.2-b&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;frequency_plan_id&#34;: &#34;EU_863_870_TTN&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;supports_join&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;lorawan_version&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.device_id&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.join_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;lorawan_phy_version&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;frequency_plan_id&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/ns/applications/app1/devices/newdev1&#39;</span>
</span></span></code></pre></div><p>Register the <code>DevEUI</code> and <code>JoinEUI</code> in the Application Server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request PUT <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;join_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      }
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.device_id&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.join_eui&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/as/applications/app1/devices/newdev1&#39;</span>
</span></span></code></pre></div>
</section>
<section data-content="abp">
  <p>To register a device <code>newdev1</code> in application <code>app1</code>, first, register the <code>DevEUI</code> and cluster addresses in the Identity Server. This is also where you register a friendly name, description, attributes, location, and more - see all fields in the <a href="https://www.thethingsindustries.com/docs/reference/api/">API Reference</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;network_server_address&#34;: &#34;thethings.example.com&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;application_server_address&#34;: &#34;thethings.example.com&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;network_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;application_server_address&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/applications/app1/devices&#39;</span>
</span></span></code></pre></div><p>Register LoRaWAN settings in the Network Server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request PUT <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;supports_join&#34;: false,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;lorawan_version&#34;: &#34;1.0.2&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;session&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;keys&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;f_nwk_s_int_key&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">            &#34;key&#34;: &#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">          }
</span></span></span><span class="line"><span class="cl"><span class="s1">        },
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_addr&#34;: &#34;XXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;mac_settings&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;resets_f_cnt&#34;: true,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;factory_preset_frequencies&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;868100000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;868300000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;868500000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;867100000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;867300000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;867500000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;867700000&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;867900000&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">        ]
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;resets_f_cnt&#34;: false,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;lorawan_phy_version&#34;: &#34;1.0.2-b&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;frequency_plan_id&#34;: &#34;EU_863_870_TTN&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;supports_join&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;lorawan_version&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.device_id&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;session.keys.f_nwk_s_int_key.key&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;session.dev_addr&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;mac_settings.resets_f_cnt&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;mac_settings.factory_preset_frequencies&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;lorawan_phy_version&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;frequency_plan_id&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/ns/applications/app1/devices/newdev1&#39;</span>
</span></span></code></pre></div><p>Register the <code>DevEUI</code> in the Application Server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;User-Agent: my-integration/my-integration-version&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request PUT <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;end_device&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;device_id&#34;: &#34;newdev1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;session&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;keys&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">          &#34;app_s_key&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">            &#34;key&#34;: &#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">          }
</span></span></span><span class="line"><span class="cl"><span class="s1">        },
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;dev_addr&#34;: &#34;XXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;skip_payload_crypto&#34;: false
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;field_mask&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;paths&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.device_id&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;ids.dev_eui&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;session.keys.app_s_key.key&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;session.dev_addr&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;skip_payload_crypto&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      ]
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/as/applications/app1/devices/newdev1&#39;</span>
</span></span></code></pre></div>
</section>

</div>

<h3 id="register-a-gateway">Register a Gateway</h3>
<p>To register a gateway <code>gtw1</code> using the <code>GatewayRegistry.Create</code> request:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Authorization: Bearer NNSXS.XXXXXXXXX&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-raw <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;gateway&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;ids&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;gateway_id&#34;: &#34;gtw1&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#34;eui&#34;: &#34;XXXXXXXXXXXXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">      },
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;my gateway&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;gateway_server_address&#34;: &#34;thethings.example.com&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;frequency_plan_id&#34;: &#34;EU_863_870_TTN&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/users/user1/gateways&#39;</span>
</span></span></code></pre></div><p>See <a href="https://www.thethingsindustries.com/docs/reference/api/gateway/">here</a> for more info about gateway APIs.</p>
<h3 id="purge-entities">Purge Entities</h3>
<p>An admin user can <a href="https://www.thethingsindustries.com/docs/reference/purge/">purge entities</a> such as <a href="https://www.thethingsindustries.com/docs/reference/api/application/">applications</a>, <a href="https://www.thethingsindustries.com/docs/reference/api/client/">clients</a>, <a href="https://www.thethingsindustries.com/docs/reference/api/gateway/">gateways</a>, <a href="https://www.thethingsindustries.com/docs/reference/api/organization/">organizations</a> or <a href="https://www.thethingsindustries.com/docs/reference/api/user/">users</a>.</p>
<p>For example, to purge the application <code>app1</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --location <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Bearer NNSXS.XXXXXXXXX&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --request DELETE <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="s1">&#39;https://thethings.example.com/api/v3/applications/app1/purge&#39;</span>
</span></span></code></pre></div><h2 id="api-usage-troubleshooting">API Usage Troubleshooting</h2>
<p>This section provides help for common issues and frequently asked questions you may have when using the API.</p>
<h3 id="i-get-a-forbidden-paths-in-field-mask-error">I get a <code>forbidden path(s) in field mask</code> error.</h3>
<p>This error usually occurs when wrong path(s) are specified in the <code>field_mask</code> object in the API request body. See <a href="https://www.thethingsindustries.com/docs/reference/api/field-mask/">Fields and Field Masks</a> section and make sure that paths listed under your <code>field_mask</code> are correct.</p>
<h3 id="when-adding-a-device-i-get-an-invalid-end_device-embedded-message-failed-validation-error">When adding a device, I get an <code>invalid end_device: embedded message failed validation</code> error.</h3>
<p>The most common cause for this error is not following the regex pattern in the <code>device_id</code> field. See <a href="https://www.thethingsindustries.com/docs/reference/api/end_device/#message:EndDeviceIdentifiers">End Device APIs</a> section and make sure your <code>device_id</code> is in line with the defined regex pattern. See also <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/">ID and EUI constaints</a> documentation.</p>
<h3 id="listing-gateways-via-api-call-works-for-the-eu1-the-things-stack-cloud-cluster-but-wont-work-for-the-nam1-cluster">Listing gateways via API call works for the <code>eu1</code> The Things Stack Cloud cluster, but won&rsquo;t work for the <code>nam1</code> cluster.</h3>
<p>Unlike other server components, the Identity Server component of The Things Stack is hosted only in the <code>eu1</code> cluster for <a href="https://www.thethingsindustries.com/docs/getting-started/cloud-hosted/addresses/#api-endpoints">The Things Stack Cloud</a> and <a href="https://www.thethingsindustries.com/docs/getting-started/ttn/addresses/#api-endpoints">The Things Stack Community Edition</a>. This is the reason why Identity Server API request to any cluster other than <code>eu1</code> will fail.</p>
<h3 id="i-see-a-426-upgrade-required-error-when-making-an-api-call">I see a <code>426 Upgrade Required</code> error when making an API call.</h3>
<p>This error indicates that the client HTTP protocol version is old, so the server refuses to perform the request and requires a client update to HTTP 1.1 version or higher.</p>
<h3 id="i-get-an-insufficient_application_rights-error">I get an <code>insufficient_application_rights</code> error.</h3>
<p>The API key you are using doesn&rsquo;t have sufficient rights. Go to the Console, enter your API key settings on the left hand menu and edit them to provide rights needed to perform the desired action.</p>
        </div>
        
          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/getting-started/user-management/user/"> User Management</a>
<a class="button is-pulled-right" href="/docs/getting-started/events/">Working with Events </a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#best-practices'>Best Practices</a></li>
    
      
      <li><a href='#http-query-examples'>HTTP Query Examples</a></li>
    
      
      <li><a href='#api-usage-troubleshooting'>API Usage Troubleshooting</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/ttn-network/v3/90">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra Selimovi on 23 Jun 2022.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/23bf725c8daaf21368dc741b46e0504bbde93fb1">
      doc: Add end device creation via API ref (#900)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/getting-started/api/_index.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.a32708c8796e7e8713fa926212adddbbf5c15cdd97676d898ecfc17bc6d9ed4f.js" integrity="sha256-oycIyHlufocT&#43;pJiEq3du/XBXN2XZ22Jjs/Be8bZ7U8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
