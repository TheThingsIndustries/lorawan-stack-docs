<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.140.0-DEV">
  <title>Step 3: Remotely control the end device behavior | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/control-remotely/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.d3f3815ed6609abc2ba6d0d6e3be8af6f52947117280c3cf9fbd8f5ff6ffb058.css" integrity="sha256-0/OBXtZgmrwrptDW476K9vUpRxFygMPPn72PX/b/sFg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Step 3: Remotely control the end device behavior">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Step 3: Remotely control the end device behavior">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/control-remotely/">
  <meta property="og:image" content="/docs/docs-thumbnail.png"/>
  <meta name="twitter:title" content="Step 3: Remotely control the end device behavior" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NGRDCNM');</script>



  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.10.1/main.css" />
</head>


<body class="theme-tts">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NGRDCNM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
      </a><div class="navbar-item navbar-search-menu" id="search-input-menu">
          </div>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/concepts/">Concepts</a>
        <a class="navbar-item" href="/docs/cloud/">The Things Stack Cloud</a>
        <a class="navbar-item" href="/docs/enterprise/">The Things Stack Enterprise</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/api/">API</a>
        <a class="navbar-item" href="/docs/hardware/">Hardware</a>

      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://www.thethingsindustries.com/stack/plans/" target="_blank">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  <script type="text/javascript">
    docsearch({
      appId: "608OILUBK2",
      apiKey: "39082cdce449b93b2aa806b44f6af4d2",
      indexName: "thethingsstack",
      container: '#search-input-menu',
      debug: false, 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Getting Started</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/getting-started/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/1-understand-lorawan/" class="">Step 1: Understanding LoRaWAN Fundamentals</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/2-prerequisites/" class="">Step 2: Setup your first LoRaWAN® Network</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/" class="">Step 3: Try the Starter Kit for LoRaWAN®</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/activate/" class="">Step 1: Activate your Starter kit for LoRaWAN</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/collect-visualize-data/" class="">Step 2: Collect and visualize data</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/control-remotely/" class="is-active">Step 3: Remotely control the end device behavior</a>
    
    



    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/3-try-starter-kit/troubleshooting/" class="">Troubleshooting</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/4-next-steps/" class="">Step 4: Next steps</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/faq/" class="">FAQ</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/glossary/" class="">Glossary</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        
        
        <h1 class="title is-size-2">Step 3: Remotely control the end device behavior</h1>
        <div class="content">
          <p>LoRaWAN® is a full-duplex protocol, which means that we can both receive data from and send data to the end device. So far, we&rsquo;ve only worked with uplink data from the end device. In this guide, let&rsquo;s look at interacting with the end device using downlinks.</p>
<p>The mClimate Multipurpose button is a Class A device. This is a special mode of operation where the end device listens for downlinks only after sending an uplink. This allows the end device to control when the radio is turned on, which helps preserve battery.</p>
<p>This means, when you schedule a downlink via The Things Stack, it&rsquo;s not immediately sent, but queued until the device sends an uplink.</p>
<p>In The Things Stack Console, select your application and navigate to the end device overview page.</p>
<p>Select the <strong>Messaging</strong> tab. The default option here is <strong>Schedule Downlink</strong> and that&rsquo;s what we are going to use.</p>
<p>In The Things Stack Console, select your application and go to the end device overview.</p>
<p>Click the <strong>Messaging</strong> tab. The default option is <strong>Schedule Downlink</strong>. We’ll use that to send a message to the device.</p>
<figure><img src="/docs/getting-started/3-try-starter-kit/control-remotely/downlink-view.png"
    alt="Downlink view">
</figure>

<p>This view has a few options. For the sake of this example, we can leave the following defaults in place.</p>
<ul>
<li><strong>Insert mode</strong>: <code>Replace downlink queue</code></li>
<li><strong>FPort</strong>: <code>1</code></li>
<li><strong>Payload type</strong>: <code>Bytes</code></li>
</ul>
<p>We will only be adding different values to the <strong>Payload</strong> field for different types of downlinks.</p>
<h4 id="activate-leds">Activate LEDs</h4>
<p>In this example, we will make the <strong>Green</strong> LED blink fast for 20 seconds remotely.</p>
<ol>
<li>Enter the value <code>05 02 02</code> in the <strong>Payload</strong> field and press <strong>Schedule Downlink</strong> and this downlink will be queued.</li>
</ol>
<figure><img src="/docs/getting-started/3-try-starter-kit/control-remotely/blink-green.png"
    alt="Blink Green LED">
</figure>

<ol start="2">
<li>
<p>Now, press the button on the end device. This will trigger an uplink to the The Things Stack and The Things Stack in turn will send this downlink to the device via the gateway.</p>
</li>
<li>
<p>The Green LED button should now blink for 20s and then turn off. You can experiment with different button configurations from the table above.</p>
</li>
</ol>
<h4 id="request-hardware-and-software-version">Request Hardware and Software Version</h4>
<p>Now, let&rsquo;s move on to more practical use cases for sending downlinks to end devices. We are now going to request the hardware and software version of the end device.</p>
<ol>
<li>Enter the value <code>04</code> in the <strong>Payload</strong> field and press <strong>Schedule Downlink</strong>.</li>
<li>Press the button. The device will send an uplink and receive the downlink command.</li>
<li>The device will now send another uplink with the device version in the payload. You can see these values in the decoded payload.</li>
</ol>
<figure><img src="/docs/getting-started/3-try-starter-kit/control-remotely/hardware-version.png"
    alt="Hardware Version">
</figure>

<h4 id="fetch-stored-button-press-counters">Fetch Stored Button Press Counters</h4>
<p>The mClimate Multipurpose button for LoRaWAN stores button press event counters; i.e., how many times the button was single pressed, double pressed and triple pressed.</p>
<div class="fixed-table">
<table>
  <thead>
      <tr>
          <th>Payload value</th>
          <th>Counter type</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0xB1</td>
          <td>Single press counter</td>
      </tr>
      <tr>
          <td>0xB2</td>
          <td>Double press counter</td>
      </tr>
      <tr>
          <td>0xB3</td>
          <td>Triple press counter</td>
      </tr>
  </tbody>
</table>
</br>
</div>
<ol>
<li>Let&rsquo;s first fetch the single press counter. Enter the value <code>b1</code> in the <strong>Payload</strong> field and press <strong>Schedule Downlink</strong>.</li>
<li>Press the button. The device will send an uplink and receive the downlink command.</li>
<li>The device will now send another uplink with the counter value in the payload. You can see the counter value in the decoded payload.</li>
</ol>
<figure><img src="/docs/getting-started/3-try-starter-kit/control-remotely/single-press-counter.png"
    alt="Single press counter">
</figure>

<p>You can explore this further by double pressing and triple pressing the button and fetching the corresponding counter.</p>
<p>Now that you&rsquo;re familiar with LoRaWAN and have seen it in action, check out what the <a href="https://www.thethingsindustries.com/docs/getting-started/4-next-steps/">next steps</a> are.</p>
        </div>
          <div class="columns is-multiline">
</div>

          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/getting-started/3-try-starter-kit/collect-visualize-data/">← Step 2: Collect and visualize data</a>
<a class="button is-pulled-right" href="/docs/getting-started/3-try-starter-kit/troubleshooting/">Troubleshooting →</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    



  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sections</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/concepts/">Concepts</a></p>
        <p><a class="" href="/docs/cloud/">The Things Stack Cloud</a></p>
        <p><a class="" href="/docs/enterprise/">The Things Stack Enterprise</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/api/">API</a></p>
        <p><a class="" href="/docs/hardware/">Hardware</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Sitemap</h3>
        <p><a class="" href="https://www.thethingsindustries.com/docs/sitemap/">View our Sitemap</a></p>
      </nav>
      <nav class="column is-one-fourth">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
      </nav>
      
      <nav class="column is-one-fourth">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.3bf0da17f5ab4cc0f916662c2d2f977f7fa7259b4483f7f9eb46e875a556cc43.js" integrity="sha256-O/DaF/WrTMD5FmYsLS&#43;Xf3&#43;nJZtEg/f560bodaVWzEM=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
