<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Export End Devices from V2 | The Things Stack for LoRaWAN</title>
  <link rel="alternate icon" href="/thethingsindustries.com/docs/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/thethingsindustries.com/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/thethingsindustries.com/docs/favicon.svg">
  <link rel="stylesheet" href="/thethingsindustries.com/docs/css/theme.min.f73831f1cd2827cc6e72a8e0df5a006e289e15ed508da505203eb0ef3f9e4238.css" integrity="sha256-9zgx8c0oJ8xucqjg31oAbiieFe1QjaUFID6w7z&#43;eQjg="><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="The Things Stack for LoRaWAN">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Export End Devices from V2">
  <meta itemprop="description" content="The Things Stack for LoRaWAN">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Export End Devices from V2">
  <meta property="og:description" content="The Things Stack for LoRaWAN">
  <meta property="og:url" content="thethingsindustries.com/docs/getting-started/migrating-from-v2/export-v2-devices/">
  <meta name="twitter:title" content="Export End Devices from V2" />
  <meta name="twitter:description" content="The Things Stack for LoRaWAN" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/thethingsindustries.com/docs/">
        <img src="/thethingsindustries.com/docs/img/TTS-horizontal-logo.svg">
        <p class="navbar-item is-size-7">v3.10.0-dev</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="thethingsindustries.com/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/devices/">Devices</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="thethingsindustries.com/docs/reference/">Reference</a>
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="button is-primary" href="thethingsindustries.com/docs/download/">Get The Things Stack</a>
        </div>
      </div>
    </div>
  </div>
</nav>
<section class="search-container">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <div class="field has-addons has-addons-centered">
            <div class="control">
              <input class="input search-bar" id="search-input" type="text" placeholder="Search" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: "",
indexName: "thethingsstack",
inputSelector: '#search-input',
debug: false 
});
</script>

<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">Migrating from The Things Network Stack V2</h2>

<ul class="menu-list">
<a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/" class="">Overview</a>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/major-changes/" class="">Major Changes in The Things Stack</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/configure-ttnctl/" class="">Configure V2 CLI</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/export-v2-devices/" class="is-active">Export End Devices from V2</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/import-devices/" class="">Import End Devices in The Things Stack</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/gateway-migration/" class="">Gateway Migration</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/configure-mac-settings/" class="">Fine-tuning MAC Settings for End Devices</a>
</li>
<li>
  <a href="thethingsindustries.com/docs/getting-started/migrating-from-v2/mqtt-api-comparison/" class="">V2 - V3 MQTT API comparison</a>
</li>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Export End Devices from V2</h1>

<div class="content">

<p>In this step, the end devices from The Things Network Stack V2 will be exported in a JSON format that can then be parsed and imported by The Things Stack.</p>
<p>The exported end devices contain the device name, description, location data, activation mode (ABP/OTAA), root keys and the AppEUI. They also contain the session keys, so your OTAA devices can simply keep working with The Things Stack.</p>
<p>To get started, select the <strong>AppID</strong> and <strong>AppEUI</strong> of the application you want to export your end devices from:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttnctl applications <span class="k">select</span>
</code></pre></div><p>After selecting the application, make sure that you can list the available end devices:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttnctl devices list
</code></pre></div><h3 id="exporting-devices">Exporting Devices</h3>
<p>In order to export a single device, use the following command. The device will be saved to <code>device.json</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttnctl devices <span class="nb">export</span> <span class="s2">&#34;device-id&#34;</span> --frequency-plan-id EU_863_870 &gt; device.json
</code></pre></div><p>Alternatively, you can export all the end devices with a single command and save them in <code>all-devices.json</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttnctl devices export-all --frequency-plan-id EU_863_870 &gt; all-devices.json
</code></pre></div><blockquote>
<p><strong>NOTE</strong>: In the command above we used the <code>EU_863_870</code> frequency plan. You will need to change this to the frequency plan corresponding to your region. See <a href="thethingsindustries.com/docs/reference/frequency-plans/">Frequency Plans</a> for a list of supported Frequency Plans and their respective IDs.</p>
</blockquote>
<blockquote>
<p><strong>NOTE</strong>: Keep in mind that an end device can only be registered in one Network Server at a time. After importing an end device to The Things Stack, you should remove it from The Things Network Stack V2. For OTAA devices, it is enough to simply change the AppKey, so the device can no longer join but the existing session is preserved. Next time the device joins, the activation will be handled by The Things Stack.</p>
</blockquote>
<h3 id="disable-exported-end-devices-on-v2">Disable Exported End Devices on V2</h3>
<p>After exporting, make sure to clear the AppKey of your OTAA devices. This can be achieved with the following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttnctl devices convert-to-abp <span class="s2">&#34;device-id&#34;</span> --save-to-attribute <span class="s2">&#34;original-app-key&#34;</span>
</code></pre></div><p>There is also a convenience command to clear all your devices at once:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttnctl devices convert-all-to-abp --save-to-attribute <span class="s2">&#34;original-app-key&#34;</span>
</code></pre></div><blockquote>
<p><strong>NOTE</strong>: The AppKey of each device will be printed on the standard output, and stored as a device attribute (with name <code>original-app-key</code>). You can retrieve the device attributes with <code>ttnctl devices info &quot;device-id&quot;</code>.</p>
</blockquote>

</div>

<script>window.emojicom_widget = { campaign: "" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
<div class="is-clearfix">
<a class="button is-pulled-left" href="thethingsindustries.com/docs/getting-started/migrating-from-v2/configure-ttnctl/">← Configure V2 CLI</a>
<a class="button is-pulled-right" href="thethingsindustries.com/docs/getting-started/migrating-from-v2/import-devices/">Import End Devices in The Things Stack →</a>
</div>


      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer has-background-primary">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="thethingsindustries.com/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="thethingsindustries.com/docs/devices/">Devices</a></p>
        <p><a class="" href="thethingsindustries.com/docs/gateways/">Gateways</a></p>
        <p><a class="" href="thethingsindustries.com/docs/integrations/">Integrations</a></p>
        <p><a class="" href="thethingsindustries.com/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsNetwork/lorawan-stack">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="has-text-light is-size-7">
  Last changed by Ben Olayinka on 22 Oct 2020.
  <br>
  <a href="https://github.com/TheThingsNetwork/lorawan-stack/commit/6b4daa186a9360e72e50edfe36c09fa7cdf05c68">
      Merge pull request #31 from TheThingsIndustries/util/build-workflow
    </a>
</p>

<a href="https://github.com/TheThingsNetwork/lorawan-stack/blob/default/doc/content/getting-started/migrating-from-v2/export-v2-devices.md" class="button is-primary is-small is-inverted is-outlined">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="/thethingsindustries.com/docs/js/theme.min.4feb1389331adbef9047157f884dbdbd63af1c61ac83f327e60eef42f999cb26.js" integrity="sha256-T&#43;sTiTMa2&#43;&#43;QRxV/iE29vWOvHGGsg/Mn5g7vQvmZyyY="></script><script>
  window.intercomSettings = {
    app_id: "",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
