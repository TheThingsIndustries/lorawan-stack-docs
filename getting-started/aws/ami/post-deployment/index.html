<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.96.0" />
  <title>Post Deployment Configuration | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/post-deployment/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.c994a55269632c4bc7be3364abf857e85ff170cc251dd025099769c910cbbcb4.css" integrity="sha256-yZSlUmljLEvHvjNkq/hX6F/xcMwlHdAlCZdpyRDLvLQ=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Post Deployment Configuration">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Post Deployment Configuration">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/getting-started/aws/ami/post-deployment/">
  <meta name="twitter:title" content="Post Deployment Configuration" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.21.0</p>
      </a><div class="navbar-item navbar-search-brand">
        <div class="field has-addons has-addons-centered">
          <div class="control">
            <input id="search-input-brand" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
          </div>
        </div>
      </div>
      
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a><div class="navbar-item navbar-search-menu">
            <div class="field has-addons has-addons-centered">
              <div class="control">
                <input id="search-input-menu" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
              </div>
            </div>
          </div></div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="https://accounts.thethingsindustries.com/fee-calculator">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-brand',
      debug: false 
    });
    docsearch({
      apiKey: "4372282a02970d8402d43457bf95d486",
      indexName: "thethingsstack",
      inputSelector: '#search-input-menu',
      debug: false 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Getting Started</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/getting-started/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/quick-start/" class="">Quick Start</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/what-is-tts/" class="">What Is The Things Stack?</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/console/" class="">Console</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/cli/" class="">Command-line Interface</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/installation/" class="">Installing The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/upgrading/" class="">Upgrading The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/" class="">Migrating to The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/cloud-hosted/" class="">The Things Stack Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/" class="">The Things Stack AWS Launcher</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/" class="">AWS Marketplace AMI</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/deployment-guide/" class="">Deployment Guide</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/post-deployment/" class="is-active">Post Deployment Configuration</a>
    
    



    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/updating/" class="">Updating AWS AMI Deployment</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/best-practices/" class="">Best Practices</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/application-server-telemetry/" class="">Application Server Telemetry</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ami/troubleshooting/" class="">Troubleshooting AWS AMI Deployment</a>
    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/ecs/" class="">AWS ECS</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/ttn/" class="">The Things Network</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/server-addresses/" class="">Server Addresses</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/packet-broker/" class="">Packet Broker</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/sso/" class="">Single Sign-On</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/user-management/" class="">Users and Organizations</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/api/" class="">Using the API</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/events/" class="">Working with Events</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/troubleshooting/" class="">Troubleshooting Getting Started</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Post Deployment Configuration
          
        </h1>
        
        <div class="content">
          <p>This section provides the information necessary to get started with The Things Stack after it is deployed via <a href="https://aws.amazon.com/marketplace/pp/The-Things-Industries-The-Things-Enterprise-Stack/B081HZKDJ4">AWS Marketplace</a> using AWS CloudFormation.</p>
<h2 id="dns-configuration">DNS Configuration</h2>
<p>In order to access the Console/API of the The Things Stack, the domain name chosen during deployment must be mapped to the public IP address of the CloudFormation stack. This section provides details on how to do that.</p>
<ol>
<li>Log in AWS Console and open the CloudFormation resource and click on your recently deployed stack.</li>
<li>Navigate to the <strong>Outputs</strong> tab and copy the value of the <strong>PublicIP</strong> field.</li>
</ol>
<p>Now, login to the Domain Name Management window of the Domain Name Registrar to which your preferred Domain is registered. Create a DNS <strong>A</strong> record with the parameters shown below.</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Record Type</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@</code></td>
<td><code>A</code></td>
<td><strong>PublicIP</strong></td>
</tr>
</tbody>
</table>
<p>If you are using a sub-domain:</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Record Type</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sub-domain</code></td>
<td><code>A</code></td>
<td><strong>PublicIP</strong></td>
</tr>
</tbody>
</table>
<p>For example, if your <strong>PublicIP</strong> value is <code>3.12.14.15</code> and your sub-domain is <code>lorawan.mycompany.com</code>, then navigate to the management tab for the domain <code>mycompany.com</code> and perform the following mapping:</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Record Type</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lorawan</code></td>
<td><code>A</code></td>
<td>3.12.14.15</td>
</tr>
</tbody>
</table>
<p>There will be an initial propagation delay for this value to be updated. You can check the status via a DNS lookup using either an <a href="https://network-tools.webwiz.net/nslookup.htm">online tool</a> or using a command line tool (ex: <code>nslookup</code>).</p>
<p>Once the domain has been propagated, the DNS Lookup will show that your Domain (or sub-domain) is pointing to the <strong>PublicIP</strong> value.</p>
<h3 id="ssl-certificates">SSL Certificates</h3>
<p>As a security measure, plaintext access to the Console/API is disabled. In order to serve requests securely, The Things Stack has built-in support to automatically request, serve and renew SSL certificates.</p>
<p>Apart from the DNS mapping above, no additional steps are necessary for this.</p>
<h2 id="getting-started-using-the-console">Getting Started using the Console</h2>
<p>Please check the <a href="https://www.thethingsindustries.com/docs/getting-started/console/">Console</a> guide to get quickly started with The Things Stack Console.</p>
<h2 id="getting-started-using-the-command-line-interface-cli">Getting Started using the Command Line Interface (CLI)</h2>
<p>Please check the <a href="https://www.thethingsindustries.com/docs/getting-started/cli/">CLI</a> guide to get quickly started with The Things Stack CLI.</p>
<h2 id="ssh-access">SSH Access</h2>
<p>In most cases, you will interact with The Things Stack only via the Console or the CLI. However, in case there is a need to directly access the EC2 instance, there is an option to do so via SSH.</p>
<p>SSH access is possible only via the IP addresses set using the <strong>Restrict SSH Access to IP Range</strong> parameter during deployment. Also, the SSH client needs access to the private key corresponding to the public key that was chosen in the <strong>SSH Key</strong> parameter during deployment. The SSH username is <code>ec2-user</code>.</p>
<p>For example, you can use the OpenSSH client via the terminal and login using:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ssh -i &lt;private-key-file&gt; ec2-user@PublicIP
</span></span></code></pre></div><p>Upon accessing the machine, navigate to the <code>tti</code> directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /tti
</span></span></code></pre></div><p>This directory is structured as follows:</p>
<pre tabindex="0"><code>├── acme                        # contains SSL certificates and related files
├── bootstrap                   # contains logs generated during deployment and restarts
└── lorawan-stack
    ├── config.yml              # The Things Stack Enterprise configuration
    ├── environment             # additional environment variables
    ├── lorawan-frequency-plans # contains a local copy of the LoRaWAN Frequency Plans Repository
    ├── public                  # contains the static assets
    └── tti-lw-stack            # The Things Stack Enterprise binary
</code></pre><p>The Things Stack binary is run as a <code>systemd</code> service. In order to check the logs, run the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo journalctl -f -u lorawan-stack.service
</span></span></code></pre></div><h2 id="routing-lorawan-traffic">Routing LoRaWAN Traffic</h2>
<p>Now that your stack has been successfully deployed, let&rsquo;s look at how to connect a LoRaWAN Gateway, Register a LoRaWAN Device and read traffic from this device.</p>
<h3 id="connecting-a-gateway">Connecting a Gateway</h3>
<p>Please check <a href="/docs/gateways/">Gateways</a> section to find an extensive connecting guide for the particular brand/model of your gateway.</p>
<h3 id="registering-a-device">Registering a Device</h3>
<p>Please check the <a href="/docs/devices/adding-devices/">Adding Devices</a> guide.</p>
<h2 id="aws-iot">AWS IoT</h2>
<p>The Things Stack supports publishing of uplink messages directly to the <a href="https://aws.amazon.com/iot/">AWS IoT suite</a>. In order for this to work, the <strong>AWS IoT Telemetry</strong> option in the CloudFormation template must be set to <strong>true</strong> during the deployment phase.</p>
<p>Please check the guide on <a href="/docs/integrations/cloud-integrations/aws-iot/">AWS IoT</a> guide for more information.</p>
        </div>
        
          <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/getting-started/aws/ami/deployment-guide/">← Deployment Guide</a>
<a class="button is-pulled-right" href="/docs/getting-started/aws/ami/updating/">Updating AWS AMI Deployment →</a>
</div>

          <script>window.emojicom_widget = { campaign: "NEDHszRC2r2KaGj1mhj7" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#dns-configuration'>DNS Configuration</a></li>
    
      
      <li><a href='#getting-started-using-the-console'>Getting Started using the Console</a></li>
    
      
      <li><a href='#getting-started-using-the-command-line-interface-cli'>Getting Started using the Command Line Interface (CLI)</a></li>
    
      
      <li><a href='#ssh-access'>SSH Access</a></li>
    
      
      <li><a href='#routing-lorawan-traffic'>Routing LoRaWAN Traffic</a></li>
    
      
      <li><a href='#aws-iot'>AWS IoT</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/ttn-network/v3/90">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Johan Stokking on 09 Apr 2022.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/c44467b53b8ce616c3839a2fb89f036d4184f21c">
      doc: Use name The Things Stack Enterprise (#850)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/getting-started/aws/ami/post-deployment/_index.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.a32708c8796e7e8713fa926212adddbbf5c15cdd97676d898ecfc17bc6d9ed4f.js" integrity="sha256-oycIyHlufocT&#43;pJiEq3du/XBXN2XZ22Jjs/Be8bZ7U8=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "pp8esr7h",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pp8esr7h';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
